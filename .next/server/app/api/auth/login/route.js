/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/login/route.ts */ \"(rsc)/./src/app/api/auth/login/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\auth\\\\login\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDZ0M7QUFDN0c7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz9kNDdmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL2xvZ2luL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9sb2dpblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYXV0aC9sb2dpbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvbG9naW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/login/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/auth/login/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n// frontend/src/app/api/auth/login/route.ts\n// ============================================================\n// üîê Login API - MediSuite Pro (MySQL + JWT) | Next.js 14 App Router\n// ============================================================\nconst runtime = \"nodejs\";\n\n\n\n\n\n// ------------------------------------------------------------\n// üß© Esquema de validaci√≥n\n// ------------------------------------------------------------\nconst LoginSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    email: zod__WEBPACK_IMPORTED_MODULE_3__.string().email(\"Correo inv\\xe1lido\"),\n    password: zod__WEBPACK_IMPORTED_MODULE_3__.string().min(6, \"M\\xednimo 6 caracteres\")\n});\n// ------------------------------------------------------------\n// üß© Helpers de roles\n// ------------------------------------------------------------\nfunction quitarAcentos(s) {\n    return (s || \"\").normalize(\"NFD\").replace(/\\p{Diacritic}/gu, \"\");\n}\nfunction rolToPath(rolRaw) {\n    const r = quitarAcentos((rolRaw || \"usuario\").toLowerCase().trim());\n    if (r.includes(\"superadmin\") || r.includes(\"superadministrador\")) return \"/admin\";\n    if (r.includes(\"tecnico\")) return \"/tecnico\";\n    if (r.includes(\"administrativo\")) return \"/administrativo\";\n    if (r.includes(\"secretaria\")) return \"/secretaria\";\n    if (r.includes(\"medico\")) return \"/medico\";\n    return \"/dashboard\";\n}\n// ------------------------------------------------------------\n// üß© Endpoint principal\n// ------------------------------------------------------------\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        const { email, password } = LoginSchema.parse(body);\n        // 1) Buscar usuario (ya con la versi√≥n que prioriza M√âDICO en src/lib/db.ts)\n        const user = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getUserByEmail)(email);\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                ok: false,\n                error: \"Usuario no encontrado\"\n            }, {\n                status: 404\n            });\n        }\n        if (user.estado && user.estado !== \"activo\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                ok: false,\n                error: \"Usuario inactivo\"\n            }, {\n                status: 403\n            });\n        }\n        // 2) Verificar password\n        const hash = user.password_hash || user.password || \"\";\n        const valid = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyPassword)(String(password), String(hash));\n        if (!valid) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                ok: false,\n                error: \"Contrase\\xf1a incorrecta\"\n            }, {\n                status: 401\n            });\n        }\n        // 3) Redirecci√≥n seg√∫n rol\n        const redirectTo = rolToPath(user.rol);\n        // 4) Firmar token JWT (el mismo que pondremos en la cookie y en la tabla)\n        const token = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.signSession)({\n            id: user.id_usuario,\n            email: user.email,\n            rol: user.rol || \"usuario\"\n        });\n        // 5) Guardar sesi√≥n en la tabla que usa tu endpoint de telemedicina\n        //    IMPORTANTE: que sesiones_usuarios tenga UNIQUE(token)\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      INSERT INTO sesiones_usuarios (\r\n        id_usuario,\r\n        token,\r\n        activa,\r\n        fecha_creacion,\r\n        fecha_expiracion,\r\n        ultima_actividad\r\n      ) VALUES (\r\n        ?, ?, 1, NOW(), DATE_ADD(NOW(), INTERVAL 8 HOUR), NOW()\r\n      )\r\n      ON DUPLICATE KEY UPDATE\r\n        activa = 1,\r\n        fecha_expiracion = VALUES(fecha_expiracion),\r\n        ultima_actividad = NOW()\r\n      `, [\n            user.id_usuario,\n            token\n        ]);\n        // 6) Responder con cookie\n        const res = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            ok: true,\n            message: \"Inicio de sesi\\xf3n exitoso\",\n            user: {\n                id: user.id_usuario,\n                email: user.email,\n                nombre: user.nombre,\n                apellido: user.apellido_paterno,\n                rol: user.rol || \"usuario\"\n            },\n            redirectTo\n        }, {\n            headers: {\n                \"Cache-Control\": \"no-store\"\n            }\n        });\n        // Cookie JWT\n        res.cookies.set(\"session\", token, {\n            httpOnly: true,\n            secure: \"development\" === \"production\",\n            sameSite: \"lax\",\n            path: \"/\",\n            maxAge: 60 * 60 * 8\n        });\n        return res;\n    } catch (err) {\n        console.error(\"‚ùå LOGIN ERROR:\", err?.message || err);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            ok: false,\n            error: \"Error interno del servidor\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBRzFCLDBCQUEwQjtRQUMxQixNQUFNSSxNQUFNMUMsa0ZBQVlBLENBQUN5QixJQUFJLENBQzNCO1lBQ0VHLElBQUk7WUFDSmUsU0FBUztZQUNUaEIsTUFBTTtnQkFDSlksSUFBSVosS0FBS2EsVUFBVTtnQkFDbkJoQyxPQUFPbUIsS0FBS25CLEtBQUs7Z0JBQ2pCb0MsUUFBUWpCLEtBQUtpQixNQUFNO2dCQUNuQkMsVUFBVWxCLEtBQUttQixnQkFBZ0I7Z0JBQy9CVCxLQUFLVixLQUFLVSxHQUFHLElBQUk7WUFDbkI7WUFDQUQ7UUFDRixHQUNBO1lBQ0VXLFNBQVM7Z0JBQ1AsaUJBQWlCO1lBQ25CO1FBQ0Y7UUFHRixhQUFhO1FBQ2JMLElBQUlNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFdBQVdYLE9BQU87WUFDaENZLFVBQVU7WUFDVkMsUUFBUUMsa0JBQXlCO1lBQ2pDQyxVQUFVO1lBQ1ZDLE1BQU07WUFDTkMsUUFBUSxLQUFLLEtBQUs7UUFDcEI7UUFFQSxPQUFPYjtJQUNULEVBQUUsT0FBT2MsS0FBVTtRQUNqQkMsUUFBUTVCLEtBQUssQ0FBQyxrQkFBa0IyQixLQUFLYixXQUFXYTtRQUNoRCxPQUFPeEQsa0ZBQVlBLENBQUN5QixJQUFJLENBQ3RCO1lBQUVHLElBQUk7WUFBT0MsT0FBTztRQUE2QixHQUNqRDtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzP2QzMWEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbnRlbmQvc3JjL2FwcC9hcGkvYXV0aC9sb2dpbi9yb3V0ZS50c1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflJAgTG9naW4gQVBJIC0gTWVkaVN1aXRlIFBybyAoTXlTUUwgKyBKV1QpIHwgTmV4dC5qcyAxNCBBcHAgUm91dGVyXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSBcIm5vZGVqc1wiO1xyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xyXG5pbXBvcnQgeyBnZXRVc2VyQnlFbWFpbCB9IGZyb20gXCJAL2xpYi9kYlwiO1xyXG5pbXBvcnQgeyBzaWduU2Vzc2lvbiwgdmVyaWZ5UGFzc3dvcmQgfSBmcm9tIFwiQC9saWIvYXV0aFwiO1xyXG5pbXBvcnQgcG9vbCBmcm9tIFwiQC9saWIvZGJcIjtcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyDwn6epIEVzcXVlbWEgZGUgdmFsaWRhY2nDs25cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IExvZ2luU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gIGVtYWlsOiB6LnN0cmluZygpLmVtYWlsKFwiQ29ycmVvIGludsOhbGlkb1wiKSxcclxuICBwYXNzd29yZDogei5zdHJpbmcoKS5taW4oNiwgXCJNw61uaW1vIDYgY2FyYWN0ZXJlc1wiKSxcclxufSk7XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8g8J+nqSBIZWxwZXJzIGRlIHJvbGVzXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5mdW5jdGlvbiBxdWl0YXJBY2VudG9zKHM6IHN0cmluZykge1xyXG4gIHJldHVybiAocyB8fCBcIlwiKS5ub3JtYWxpemUoXCJORkRcIikucmVwbGFjZSgvXFxwe0RpYWNyaXRpY30vZ3UsIFwiXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByb2xUb1BhdGgocm9sUmF3Pzogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCByID0gcXVpdGFyQWNlbnRvcygocm9sUmF3IHx8IFwidXN1YXJpb1wiKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSk7XHJcbiAgaWYgKHIuaW5jbHVkZXMoXCJzdXBlcmFkbWluXCIpIHx8IHIuaW5jbHVkZXMoXCJzdXBlcmFkbWluaXN0cmFkb3JcIikpIHJldHVybiBcIi9hZG1pblwiO1xyXG4gIGlmIChyLmluY2x1ZGVzKFwidGVjbmljb1wiKSkgcmV0dXJuIFwiL3RlY25pY29cIjtcclxuICBpZiAoci5pbmNsdWRlcyhcImFkbWluaXN0cmF0aXZvXCIpKSByZXR1cm4gXCIvYWRtaW5pc3RyYXRpdm9cIjtcclxuICBpZiAoci5pbmNsdWRlcyhcInNlY3JldGFyaWFcIikpIHJldHVybiBcIi9zZWNyZXRhcmlhXCI7XHJcbiAgaWYgKHIuaW5jbHVkZXMoXCJtZWRpY29cIikpIHJldHVybiBcIi9tZWRpY29cIjtcclxuICByZXR1cm4gXCIvZGFzaGJvYXJkXCI7XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyDwn6epIEVuZHBvaW50IHByaW5jaXBhbFxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkIH0gPSBMb2dpblNjaGVtYS5wYXJzZShib2R5KTtcclxuXHJcbiAgICAvLyAxKSBCdXNjYXIgdXN1YXJpbyAoeWEgY29uIGxhIHZlcnNpw7NuIHF1ZSBwcmlvcml6YSBNw4lESUNPIGVuIHNyYy9saWIvZGIudHMpXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckJ5RW1haWwoZW1haWwpO1xyXG5cclxuICAgIGlmICghdXNlcikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBvazogZmFsc2UsIGVycm9yOiBcIlVzdWFyaW8gbm8gZW5jb250cmFkb1wiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHVzZXIuZXN0YWRvICYmIHVzZXIuZXN0YWRvICE9PSBcImFjdGl2b1wiKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IG9rOiBmYWxzZSwgZXJyb3I6IFwiVXN1YXJpbyBpbmFjdGl2b1wiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMikgVmVyaWZpY2FyIHBhc3N3b3JkXHJcbiAgICBjb25zdCBoYXNoID0gdXNlci5wYXNzd29yZF9oYXNoIHx8IHVzZXIucGFzc3dvcmQgfHwgXCJcIjtcclxuICAgIGNvbnN0IHZhbGlkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQoU3RyaW5nKHBhc3N3b3JkKSwgU3RyaW5nKGhhc2gpKTtcclxuXHJcbiAgICBpZiAoIXZhbGlkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IG9rOiBmYWxzZSwgZXJyb3I6IFwiQ29udHJhc2XDsWEgaW5jb3JyZWN0YVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMykgUmVkaXJlY2Npw7NuIHNlZ8O6biByb2xcclxuICAgIGNvbnN0IHJlZGlyZWN0VG8gPSByb2xUb1BhdGgodXNlci5yb2wpO1xyXG5cclxuICAgIC8vIDQpIEZpcm1hciB0b2tlbiBKV1QgKGVsIG1pc21vIHF1ZSBwb25kcmVtb3MgZW4gbGEgY29va2llIHkgZW4gbGEgdGFibGEpXHJcbiAgICBjb25zdCB0b2tlbiA9IHNpZ25TZXNzaW9uKHtcclxuICAgICAgaWQ6IHVzZXIuaWRfdXN1YXJpbyxcclxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXHJcbiAgICAgIHJvbDogdXNlci5yb2wgfHwgXCJ1c3VhcmlvXCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyA1KSBHdWFyZGFyIHNlc2nDs24gZW4gbGEgdGFibGEgcXVlIHVzYSB0dSBlbmRwb2ludCBkZSB0ZWxlbWVkaWNpbmFcclxuICAgIC8vICAgIElNUE9SVEFOVEU6IHF1ZSBzZXNpb25lc191c3VhcmlvcyB0ZW5nYSBVTklRVUUodG9rZW4pXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgXHJcbiAgICAgIElOU0VSVCBJTlRPIHNlc2lvbmVzX3VzdWFyaW9zIChcclxuICAgICAgICBpZF91c3VhcmlvLFxyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIGFjdGl2YSxcclxuICAgICAgICBmZWNoYV9jcmVhY2lvbixcclxuICAgICAgICBmZWNoYV9leHBpcmFjaW9uLFxyXG4gICAgICAgIHVsdGltYV9hY3RpdmlkYWRcclxuICAgICAgKSBWQUxVRVMgKFxyXG4gICAgICAgID8sID8sIDEsIE5PVygpLCBEQVRFX0FERChOT1coKSwgSU5URVJWQUwgOCBIT1VSKSwgTk9XKClcclxuICAgICAgKVxyXG4gICAgICBPTiBEVVBMSUNBVEUgS0VZIFVQREFURVxyXG4gICAgICAgIGFjdGl2YSA9IDEsXHJcbiAgICAgICAgZmVjaGFfZXhwaXJhY2lvbiA9IFZBTFVFUyhmZWNoYV9leHBpcmFjaW9uKSxcclxuICAgICAgICB1bHRpbWFfYWN0aXZpZGFkID0gTk9XKClcclxuICAgICAgYCxcclxuICAgICAgW3VzZXIuaWRfdXN1YXJpbywgdG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIC8vIDYpIFJlc3BvbmRlciBjb24gY29va2llXHJcbiAgICBjb25zdCByZXMgPSBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIG9rOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwiSW5pY2lvIGRlIHNlc2nDs24gZXhpdG9zb1wiLFxyXG4gICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgIGlkOiB1c2VyLmlkX3VzdWFyaW8sXHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIG5vbWJyZTogdXNlci5ub21icmUsXHJcbiAgICAgICAgICBhcGVsbGlkbzogdXNlci5hcGVsbGlkb19wYXRlcm5vLFxyXG4gICAgICAgICAgcm9sOiB1c2VyLnJvbCB8fCBcInVzdWFyaW9cIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZGlyZWN0VG8sXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBcIkNhY2hlLUNvbnRyb2xcIjogXCJuby1zdG9yZVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gQ29va2llIEpXVFxyXG4gICAgcmVzLmNvb2tpZXMuc2V0KFwic2Vzc2lvblwiLCB0b2tlbiwge1xyXG4gICAgICBodHRwT25seTogdHJ1ZSxcclxuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIsXHJcbiAgICAgIHNhbWVTaXRlOiBcImxheFwiLFxyXG4gICAgICBwYXRoOiBcIi9cIixcclxuICAgICAgbWF4QWdlOiA2MCAqIDYwICogOCwgLy8gOCBob3Jhc1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcztcclxuICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBMT0dJTiBFUlJPUjpcIiwgZXJyPy5tZXNzYWdlIHx8IGVycik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgb2s6IGZhbHNlLCBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInJ1bnRpbWUiLCJOZXh0UmVzcG9uc2UiLCJ6IiwiZ2V0VXNlckJ5RW1haWwiLCJzaWduU2Vzc2lvbiIsInZlcmlmeVBhc3N3b3JkIiwicG9vbCIsIkxvZ2luU2NoZW1hIiwib2JqZWN0IiwiZW1haWwiLCJzdHJpbmciLCJwYXNzd29yZCIsIm1pbiIsInF1aXRhckFjZW50b3MiLCJzIiwibm9ybWFsaXplIiwicmVwbGFjZSIsInJvbFRvUGF0aCIsInJvbFJhdyIsInIiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJpbmNsdWRlcyIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsInBhcnNlIiwidXNlciIsIm9rIiwiZXJyb3IiLCJzdGF0dXMiLCJlc3RhZG8iLCJoYXNoIiwicGFzc3dvcmRfaGFzaCIsInZhbGlkIiwiU3RyaW5nIiwicmVkaXJlY3RUbyIsInJvbCIsInRva2VuIiwiaWQiLCJpZF91c3VhcmlvIiwicXVlcnkiLCJyZXMiLCJtZXNzYWdlIiwibm9tYnJlIiwiYXBlbGxpZG8iLCJhcGVsbGlkb19wYXRlcm5vIiwiaGVhZGVycyIsImNvb2tpZXMiLCJzZXQiLCJodHRwT25seSIsInNlY3VyZSIsInByb2Nlc3MiLCJzYW1lU2l0ZSIsInBhdGgiLCJtYXhBZ2UiLCJlcnIiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/login/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeToken: () => (/* binding */ decodeToken),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   refreshSession: () => (/* binding */ refreshSession),\n/* harmony export */   signSession: () => (/* binding */ signSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n// frontend\\src\\lib\\auth.ts\n// üîê M√≥dulo de Autenticaci√≥n - MediSuite Pro\n// ============================================================\n// Compatibilidad total con Next.js 14 App Router\n// Integra bcryptjs para contrase√±as y JWT para sesiones\n// ============================================================\n\n\n// ============================================================\n// üîß Clave secreta JWT (usa variable de entorno en producci√≥n)\n// ============================================================\nconst JWT_SECRET = process.env.JWT_SECRET || \"clave-ultra-secreta-dev\";\n// ============================================================\n// ‚úÖ Funci√≥n: verificar contrase√±a con bcrypt\n// ============================================================\nasync function verifyPassword(plainPassword, hashedPassword) {\n    try {\n        if (!plainPassword || !hashedPassword) return false;\n        // Si est√° en modo de prueba y no se us√≥ hash, comparar directamente\n        if (!hashedPassword.startsWith(\"$2\")) {\n            return plainPassword === hashedPassword;\n        }\n        // Comparaci√≥n segura con bcrypt\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(plainPassword, hashedPassword);\n    } catch (err) {\n        console.error(\"‚ùå Error al verificar contrase\\xf1a:\", err);\n        return false;\n    }\n}\n// ============================================================\n// ‚úÖ Funci√≥n: generar token de sesi√≥n JWT\n// ============================================================\nfunction signSession(payload) {\n    try {\n        // Firmar token con expiraci√≥n de 8 horas\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, JWT_SECRET, {\n            expiresIn: \"8h\"\n        });\n    } catch (err) {\n        console.error(\"‚ùå Error al firmar token JWT:\", err);\n        throw new Error(\"No se pudo generar el token JWT\");\n    }\n}\n// ============================================================\n// ‚úÖ Funci√≥n: verificar token JWT\n// ============================================================\nfunction verifyToken(token) {\n    try {\n        if (!token) return null;\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n    } catch (err) {\n        console.error(\"‚ö†Ô∏è Token inv\\xe1lido o expirado:\", err);\n        return null;\n    }\n}\n// ============================================================\n// ‚úÖ Funci√≥n: decodificar token sin verificar (solo lectura r√°pida)\n// ============================================================\nfunction decodeToken(token) {\n    try {\n        if (!token) return null;\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().decode(token);\n    } catch (err) {\n        console.error(\"‚ö†Ô∏è Error al decodificar token:\", err);\n        return null;\n    }\n}\n// ============================================================\n// üîÅ Funci√≥n: refrescar token cuando est√° por expirar\n// ============================================================\nfunction refreshSession(token) {\n    try {\n        const decoded = verifyToken(token);\n        if (!decoded) return null;\n        const { iat, exp, ...payload } = decoded;\n        return signSession(payload);\n    } catch (err) {\n        console.error(\"‚ö†Ô∏è No se pudo refrescar el token:\", err);\n        return null;\n    }\n}\n// ============================================================\n// üß© Exportaci√≥n por defecto\n// ============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    verifyPassword,\n    signSession,\n    verifyToken,\n    decodeToken,\n    refreshSession\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsMkJBQTJCO0FBQzNCLDZDQUE2QztBQUM3QywrREFBK0Q7QUFDL0QsaURBQWlEO0FBQ2pELHdEQUF3RDtBQUN4RCwrREFBK0Q7QUFFakM7QUFDaUI7QUFFL0MsK0RBQStEO0FBQy9ELCtEQUErRDtBQUMvRCwrREFBK0Q7QUFDL0QsTUFBTUUsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFFN0MsK0RBQStEO0FBQy9ELDZDQUE2QztBQUM3QywrREFBK0Q7QUFDeEQsZUFBZUcsZUFDcEJDLGFBQXFCLEVBQ3JCQyxjQUFzQjtJQUV0QixJQUFJO1FBQ0YsSUFBSSxDQUFDRCxpQkFBaUIsQ0FBQ0MsZ0JBQWdCLE9BQU87UUFFOUMsb0VBQW9FO1FBQ3BFLElBQUksQ0FBQ0EsZUFBZUMsVUFBVSxDQUFDLE9BQU87WUFDcEMsT0FBT0Ysa0JBQWtCQztRQUMzQjtRQUVBLGdDQUFnQztRQUNoQyxPQUFPLE1BQU1QLHdEQUFjLENBQUNNLGVBQWVDO0lBQzdDLEVBQUUsT0FBT0csS0FBSztRQUNaQyxRQUFRQyxLQUFLLENBQUMsdUNBQW9DRjtRQUNsRCxPQUFPO0lBQ1Q7QUFDRjtBQUVBLCtEQUErRDtBQUMvRCx5Q0FBeUM7QUFDekMsK0RBQStEO0FBQ3hELFNBQVNHLFlBQVlDLE9BQTRCO0lBQ3RELElBQUk7UUFDRix5Q0FBeUM7UUFDekMsT0FBT2Isd0RBQVEsQ0FBQ2EsU0FBU1osWUFBWTtZQUFFYyxXQUFXO1FBQUs7SUFDekQsRUFBRSxPQUFPTixLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxnQ0FBZ0NGO1FBQzlDLE1BQU0sSUFBSU8sTUFBTTtJQUNsQjtBQUNGO0FBRUEsK0RBQStEO0FBQy9ELGlDQUFpQztBQUNqQywrREFBK0Q7QUFDeEQsU0FBU0MsWUFBWUMsS0FBYTtJQUN2QyxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxPQUFPLE9BQU87UUFDbkIsT0FBT2xCLDBEQUFVLENBQUNrQixPQUFPakI7SUFDM0IsRUFBRSxPQUFPUSxLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxvQ0FBaUNGO1FBQy9DLE9BQU87SUFDVDtBQUNGO0FBRUEsK0RBQStEO0FBQy9ELG1FQUFtRTtBQUNuRSwrREFBK0Q7QUFDeEQsU0FBU1csWUFBWUYsS0FBYTtJQUN2QyxJQUFJO1FBQ0YsSUFBSSxDQUFDQSxPQUFPLE9BQU87UUFDbkIsT0FBT2xCLDBEQUFVLENBQUNrQjtJQUNwQixFQUFFLE9BQU9ULEtBQUs7UUFDWkMsUUFBUUMsS0FBSyxDQUFDLGtDQUFrQ0Y7UUFDaEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSwrREFBK0Q7QUFDL0Qsc0RBQXNEO0FBQ3RELCtEQUErRDtBQUN4RCxTQUFTYSxlQUFlSixLQUFhO0lBQzFDLElBQUk7UUFDRixNQUFNSyxVQUFVTixZQUFZQztRQUM1QixJQUFJLENBQUNLLFNBQVMsT0FBTztRQUVyQixNQUFNLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFLEdBQUdaLFNBQVMsR0FBR1U7UUFDakMsT0FBT1gsWUFBWUM7SUFDckIsRUFBRSxPQUFPSixLQUFLO1FBQ1pDLFFBQVFDLEtBQUssQ0FBQyxxQ0FBcUNGO1FBQ25ELE9BQU87SUFDVDtBQUNGO0FBRUEsK0RBQStEO0FBQy9ELDZCQUE2QjtBQUM3QiwrREFBK0Q7QUFDL0QsaUVBQWU7SUFDYkw7SUFDQVE7SUFDQUs7SUFDQUc7SUFDQUU7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLy4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZnJvbnRlbmRcXHNyY1xcbGliXFxhdXRoLnRzXHJcbi8vIPCflJAgTcOzZHVsbyBkZSBBdXRlbnRpY2FjacOzbiAtIE1lZGlTdWl0ZSBQcm9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENvbXBhdGliaWxpZGFkIHRvdGFsIGNvbiBOZXh0LmpzIDE0IEFwcCBSb3V0ZXJcclxuLy8gSW50ZWdyYSBiY3J5cHRqcyBwYXJhIGNvbnRyYXNlw7FhcyB5IEpXVCBwYXJhIHNlc2lvbmVzXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IGJjcnlwdCBmcm9tIFwiYmNyeXB0anNcIjtcclxuaW1wb3J0IGp3dCwgeyBKd3RQYXlsb2FkIH0gZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflKcgQ2xhdmUgc2VjcmV0YSBKV1QgKHVzYSB2YXJpYWJsZSBkZSBlbnRvcm5vIGVuIHByb2R1Y2Npw7NuKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJjbGF2ZS11bHRyYS1zZWNyZXRhLWRldlwiO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIOKchSBGdW5jacOzbjogdmVyaWZpY2FyIGNvbnRyYXNlw7FhIGNvbiBiY3J5cHRcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChcclxuICBwbGFpblBhc3N3b3JkOiBzdHJpbmcsXHJcbiAgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICB0cnkge1xyXG4gICAgaWYgKCFwbGFpblBhc3N3b3JkIHx8ICFoYXNoZWRQYXNzd29yZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIC8vIFNpIGVzdMOhIGVuIG1vZG8gZGUgcHJ1ZWJhIHkgbm8gc2UgdXPDsyBoYXNoLCBjb21wYXJhciBkaXJlY3RhbWVudGVcclxuICAgIGlmICghaGFzaGVkUGFzc3dvcmQuc3RhcnRzV2l0aChcIiQyXCIpKSB7XHJcbiAgICAgIHJldHVybiBwbGFpblBhc3N3b3JkID09PSBoYXNoZWRQYXNzd29yZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb21wYXJhY2nDs24gc2VndXJhIGNvbiBiY3J5cHRcclxuICAgIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwbGFpblBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGFsIHZlcmlmaWNhciBjb250cmFzZcOxYTpcIiwgZXJyKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDinIUgRnVuY2nDs246IGdlbmVyYXIgdG9rZW4gZGUgc2VzacOzbiBKV1RcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBmdW5jdGlvbiBzaWduU2Vzc2lvbihwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nIHtcclxuICB0cnkge1xyXG4gICAgLy8gRmlybWFyIHRva2VuIGNvbiBleHBpcmFjacOzbiBkZSA4IGhvcmFzXHJcbiAgICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgSldUX1NFQ1JFVCwgeyBleHBpcmVzSW46IFwiOGhcIiB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgYWwgZmlybWFyIHRva2VuIEpXVDpcIiwgZXJyKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHNlIHB1ZG8gZ2VuZXJhciBlbCB0b2tlbiBKV1RcIik7XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g4pyFIEZ1bmNpw7NuOiB2ZXJpZmljYXIgdG9rZW4gSldUXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IEp3dFBheWxvYWQgfCBudWxsIHtcclxuICB0cnkge1xyXG4gICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgSnd0UGF5bG9hZDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLimqDvuI8gVG9rZW4gaW52w6FsaWRvIG8gZXhwaXJhZG86XCIsIGVycik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDinIUgRnVuY2nDs246IGRlY29kaWZpY2FyIHRva2VuIHNpbiB2ZXJpZmljYXIgKHNvbG8gbGVjdHVyYSByw6FwaWRhKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZVRva2VuKHRva2VuOiBzdHJpbmcpOiBKd3RQYXlsb2FkIHwgbnVsbCB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xyXG4gICAgcmV0dXJuIGp3dC5kZWNvZGUodG9rZW4pIGFzIEp3dFBheWxvYWQ7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4pqg77iPIEVycm9yIGFsIGRlY29kaWZpY2FyIHRva2VuOlwiLCBlcnIpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UgSBGdW5jacOzbjogcmVmcmVzY2FyIHRva2VuIGN1YW5kbyBlc3TDoSBwb3IgZXhwaXJhclxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZnJlc2hTZXNzaW9uKHRva2VuOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeVRva2VuKHRva2VuKTtcclxuICAgIGlmICghZGVjb2RlZCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY29uc3QgeyBpYXQsIGV4cCwgLi4ucGF5bG9hZCB9ID0gZGVjb2RlZDtcclxuICAgIHJldHVybiBzaWduU2Vzc2lvbihwYXlsb2FkKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLimqDvuI8gTm8gc2UgcHVkbyByZWZyZXNjYXIgZWwgdG9rZW46XCIsIGVycik7XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn6epIEV4cG9ydGFjacOzbiBwb3IgZGVmZWN0b1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIHZlcmlmeVBhc3N3b3JkLFxyXG4gIHNpZ25TZXNzaW9uLFxyXG4gIHZlcmlmeVRva2VuLFxyXG4gIGRlY29kZVRva2VuLFxyXG4gIHJlZnJlc2hTZXNzaW9uLFxyXG59O1xyXG4iXSwibmFtZXMiOlsiYmNyeXB0Iiwiand0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJ2ZXJpZnlQYXNzd29yZCIsInBsYWluUGFzc3dvcmQiLCJoYXNoZWRQYXNzd29yZCIsInN0YXJ0c1dpdGgiLCJjb21wYXJlIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwic2lnblNlc3Npb24iLCJwYXlsb2FkIiwic2lnbiIsImV4cGlyZXNJbiIsIkVycm9yIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInZlcmlmeSIsImRlY29kZVRva2VuIiwiZGVjb2RlIiwicmVmcmVzaFNlc3Npb24iLCJkZWNvZGVkIiwiaWF0IiwiZXhwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// üì¶ Archivo: src/lib/db.ts\n// üß† Descripci√≥n: Configuraci√≥n central de conexi√≥n a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// üîó Conexi√≥n al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// üß© Funci√≥n gen√©rica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"‚ùå Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// üë§ Obtener usuario por email o username (para login o validaciones)\n// ‚úÖ Versi√≥n que PRIORIZA el rol M√âDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) m√©dico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) t√©cnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// üîí Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// üìä Ejemplo de utilidad: obtener estad√≠sticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// üîå NUEVO: obtener una conexi√≥n dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexi√≥n\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// üîÅ NUEVO (opcional): helper para ejecutar en transacci√≥n\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// üîÅ Exportar conexi√≥n global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/jwa","vendor-chunks/lodash.once","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();