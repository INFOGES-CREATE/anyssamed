/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/medico/dashboard/route";
exports.ids = ["app/api/medico/dashboard/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fdashboard%2Froute&page=%2Fapi%2Fmedico%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fdashboard%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fdashboard%2Froute&page=%2Fapi%2Fmedico%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fdashboard%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/medico/dashboard/route.ts */ \"(rsc)/./src/app/api/medico/dashboard/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/medico/dashboard/route\",\n        pathname: \"/api/medico/dashboard\",\n        filename: \"route\",\n        bundlePath: \"app/api/medico/dashboard/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\medico\\\\dashboard\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/medico/dashboard/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZWRpY28lMkZkYXNoYm9hcmQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1lZGljbyUyRmRhc2hib2FyZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1lZGljbyUyRmRhc2hib2FyZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDc0M7QUFDbkg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz85NTk3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxcZGFzaGJvYXJkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZWRpY28vZGFzaGJvYXJkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWVkaWNvL2Rhc2hib2FyZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVkaWNvL2Rhc2hib2FyZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxcZGFzaGJvYXJkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21lZGljby9kYXNoYm9hcmQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fdashboard%2Froute&page=%2Fapi%2Fmedico%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fdashboard%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/medico/dashboard/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/medico/dashboard/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n// app/api/medico/dashboard/route.ts\n\n\n// ========================================\n// HELPER PARA OBTENER EL TOKEN\n// ========================================\nconst SESSION_COOKIE_CANDIDATES = [\n    \"session\",\n    \"session_token\",\n    \"medisalud_session\",\n    \"auth_session\",\n    \"next-auth.session-token\",\n    \"__Secure-next-auth.session-token\"\n];\nfunction getSessionToken(request) {\n    const cookieHeader = request.headers.get(\"cookie\") || \"\";\n    if (cookieHeader) {\n        const cookies = cookieHeader.split(\";\").map((c)=>c.trim()).filter(Boolean).reduce((acc, c)=>{\n            const [k, ...rest] = c.split(\"=\");\n            acc[k] = rest.join(\"=\");\n            return acc;\n        }, {});\n        for (const name of SESSION_COOKIE_CANDIDATES){\n            if (cookies[name]) {\n                return decodeURIComponent(cookies[name]);\n            }\n        }\n    }\n    const auth = request.headers.get(\"authorization\");\n    if (auth?.startsWith(\"Bearer \")) {\n        return auth.slice(7);\n    }\n    return null;\n}\n// ========================================\n// FUNCIONES AUXILIARES\n// ========================================\n/**\r\n * Obtiene la información del médico autenticado\r\n */ async function obtenerMedicoAutenticado(idUsuario) {\n    try {\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        m.id_medico,\r\n        m.id_usuario,\r\n        m.id_centro_principal,\r\n        m.numero_registro_medico,\r\n        m.titulo_profesional,\r\n        m.especialidad_principal,\r\n        m.anos_experiencia,\r\n        m.calificacion_promedio\r\n      FROM medicos m\r\n      WHERE m.id_usuario = ? AND m.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            idUsuario\n        ]);\n        if (rows.length === 0) {\n            return null;\n        }\n        return rows[0];\n    } catch (error) {\n        console.error(\"Error al obtener m\\xe9dico:\", error);\n        throw error;\n    }\n}\n/**\r\n * Obtiene las estadísticas resumen del médico\r\n */ async function obtenerEstadisticas(idMedico) {\n    try {\n        const hoy = new Date().toISOString().split(\"T\")[0];\n        const inicioMes = new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split(\"T\")[0];\n        const inicioAno = new Date(new Date().getFullYear(), 0, 1).toISOString().split(\"T\")[0];\n        // Consultas paralelas para mejor rendimiento\n        const [citasHoy, citasPendientes, citasCompletadasHoy, citasCanceladasHoy, pacientesNuevosMes, totalPacientes, consultasMes, consultasAno, recetasMes, ordenesMes, interconsultasPendientes, mensajesSinLeer, calificacion, ingresosMes, telemedicina, certificadosMes, procedimientosMes] = await Promise.all([\n            // Citas de hoy\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM citas \r\n         WHERE id_medico = ? AND DATE(fecha_hora_inicio) = ? \r\n         AND estado NOT IN ('cancelada', 'no_asistio')`, [\n                idMedico,\n                hoy\n            ]),\n            // Citas pendientes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM citas \r\n         WHERE id_medico = ? AND estado IN ('programada', 'pendiente') \r\n         AND fecha_hora_inicio > NOW()`, [\n                idMedico\n            ]),\n            // Citas completadas hoy\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM citas \r\n         WHERE id_medico = ? AND DATE(fecha_hora_inicio) = ? \r\n         AND estado = 'completada'`, [\n                idMedico,\n                hoy\n            ]),\n            // Citas canceladas hoy\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM citas c \r\n         INNER JOIN cancelaciones can ON c.id_cita = can.id_cita \r\n         WHERE c.id_medico = ? AND DATE(can.fecha_cancelacion) = ?`, [\n                idMedico,\n                hoy\n            ]),\n            // Pacientes nuevos del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(DISTINCT pm.id_paciente) as total \r\n         FROM pacientes_medico pm \r\n         WHERE pm.id_medico = ? AND pm.fecha_asignacion >= ? AND pm.activo = 1`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Total pacientes activos\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(DISTINCT id_paciente) as total \r\n         FROM pacientes_medico WHERE id_medico = ? AND activo = 1`, [\n                idMedico\n            ]),\n            // Consultas del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion >= ? AND estado_registro != 'anulado'`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Consultas del año\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion >= ? AND estado_registro != 'anulado'`, [\n                idMedico,\n                inicioAno\n            ]),\n            // Recetas del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM recetas_medicas \r\n         WHERE id_medico = ? AND fecha_emision >= ? AND estado != 'anulada'`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Órdenes de examen del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM ordenes_examenes \r\n         WHERE id_medico = ? AND fecha_emision\r\n >= ? AND estado != 'anulada'`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Interconsultas pendientes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM interconsultas \r\n         WHERE id_medico_solicitante = ? AND estado IN ('pendiente', 'en_revision')`, [\n                idMedico\n            ]),\n            // Mensajes sin leer\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM mensajes_chat \r\n         WHERE id_destinatario = (SELECT id_usuario FROM medicos WHERE id_medico = ?) \r\n         AND leido = 0`, [\n                idMedico\n            ]),\n            // Calificación promedio\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COALESCE(AVG(calificacion), 0) as promedio, COUNT(*) as total \r\n         FROM valoraciones_medicas WHERE id_medico = ? AND estado = 'visible'`, [\n                idMedico\n            ]),\n            // Ingresos del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COALESCE(SUM(monto), 0) as total FROM citas \r\n         WHERE id_medico = ? AND fecha_hora_inicio >= ? AND pagada = 1 AND estado = 'completada'`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Telemedicina activas\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM telemedicina_sesiones \r\n         WHERE id_medico = ? AND estado IN ('en_espera', 'en_curso')`, [\n                idMedico\n            ]),\n            // Certificados emitidos del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM certificados_medicos \r\n         WHERE id_medico = ? AND fecha_emision >= ? AND estado != 'anulado'`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Procedimientos del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM procedimientos \r\n         WHERE id_medico = ? AND fecha_procedimiento >= ? AND estado != 'cancelado'`, [\n                idMedico,\n                inicioMes\n            ])\n        ]);\n        return {\n            citas_hoy: citasHoy[0][0]?.total || 0,\n            citas_pendientes: citasPendientes[0][0]?.total || 0,\n            citas_completadas_hoy: citasCompletadasHoy[0][0]?.total || 0,\n            citas_canceladas_hoy: citasCanceladasHoy[0][0]?.total || 0,\n            pacientes_nuevos_mes: pacientesNuevosMes[0][0]?.total || 0,\n            total_pacientes: totalPacientes[0][0]?.total || 0,\n            consultas_mes: consultasMes[0][0]?.total || 0,\n            consultas_ano: consultasAno[0][0]?.total || 0,\n            recetas_emitidas_mes: recetasMes[0][0]?.total || 0,\n            ordenes_examen_mes: ordenesMes[0][0]?.total || 0,\n            interconsultas_pendientes: interconsultasPendientes[0][0]?.total || 0,\n            mensajes_sin_leer: mensajesSinLeer[0][0]?.total || 0,\n            calificacion_promedio: parseFloat(calificacion[0][0]?.promedio || \"0\"),\n            total_resenas: calificacion[0][0]?.total || 0,\n            ingresos_mes: parseFloat(ingresosMes[0][0]?.total || \"0\"),\n            telemedicina_activas: telemedicina[0][0]?.total || 0,\n            certificados_emitidos: certificadosMes[0][0]?.total || 0,\n            procedimientos_mes: procedimientosMes[0][0]?.total || 0\n        };\n    } catch (error) {\n        console.error(\"Error al obtener estad\\xedsticas:\", error);\n        throw error;\n    }\n}\n/**\r\n * Obtiene las citas próximas del médico para hoy\r\n */ async function obtenerCitasProximas(idMedico) {\n    try {\n        const hoy = new Date().toISOString().split(\"T\")[0];\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        c.id_cita,\r\n        c.fecha_hora_inicio as fecha_hora,\r\n        c.duracion_minutos,\r\n        c.tipo_cita,\r\n        CASE \r\n          WHEN c.tipo_cita = 'telemedicina' THEN 'telemedicina'\r\n          ELSE 'presencial'\r\n        END as modalidad,\r\n        c.estado,\r\n        c.motivo,\r\n        c.notas,\r\n        p.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno, ' ', COALESCE(p.apellido_materno, '')) as nombre_completo,\r\n        TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) as edad,\r\n        p.foto_url,\r\n        p.telefono,\r\n        p.grupo_sanguineo,\r\n        COALESCE(s.nombre, 'Consultorio Principal') as sala\r\n      FROM citas c\r\n      INNER JOIN pacientes p ON c.id_paciente = p.id_paciente\r\n      LEFT JOIN salas s ON c.id_sala = s.id_sala\r\n      WHERE c.id_medico = ?\r\n        AND DATE(c.fecha_hora_inicio) = ?\r\n        AND c.estado NOT IN ('cancelada', 'no_asistio')\r\n      ORDER BY c.fecha_hora_inicio ASC\r\n      LIMIT 20\r\n      `, [\n            idMedico,\n            hoy\n        ]);\n        return rows.map((row)=>({\n                id_cita: row.id_cita,\n                fecha_hora: row.fecha_hora,\n                duracion_minutos: row.duracion_minutos,\n                tipo_cita: row.tipo_cita,\n                modalidad: row.modalidad,\n                estado: row.estado,\n                paciente: {\n                    id_paciente: row.id_paciente,\n                    nombre_completo: row.nombre_completo,\n                    edad: row.edad,\n                    foto_url: row.foto_url,\n                    telefono: row.telefono,\n                    grupo_sanguineo: row.grupo_sanguineo || \"N/A\"\n                },\n                motivo: row.motivo,\n                notas: row.notas,\n                sala: row.sala\n            }));\n    } catch (error) {\n        console.error(\"Error al obtener citas pr\\xf3ximas:\", error);\n        throw error;\n    }\n}\n/**\r\n * Genera alertas urgentes basadas en múltiples criterios\r\n */ async function obtenerAlertasUrgentes(idMedico) {\n    try {\n        const alertas = [];\n        let idAlerta = 1;\n        // 1. Pacientes con signos vitales críticos (últimas 24 horas)\n        const [signosVitalesCriticos] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT DISTINCT\r\n        sv.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno) as nombre_completo,\r\n        sv.presion_sistolica,\r\n        sv.presion_diastolica,\r\n        sv.pulso as frecuencia_cardiaca,\r\n        sv.temperatura,\r\n        sv.saturacion_oxigeno,\r\n        sv.fecha_creacion as fecha_hora_registro\r\n      FROM signos_vitales sv\r\n      INNER JOIN pacientes p ON sv.id_paciente = p.id_paciente\r\n      INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n      WHERE pm.id_medico = ?\r\n        AND pm.activo = 1\r\n        AND sv.fecha_creacion >= DATE_SUB(NOW(), INTERVAL 24 HOUR)\r\n        AND (\r\n          sv.presion_sistolica > 180 OR sv.presion_sistolica < 90\r\n          OR sv.presion_diastolica > 120 OR sv.presion_diastolica < 60\r\n          OR sv.pulso > 120 OR sv.pulso < 50\r\n          OR sv.temperatura > 39 OR sv.temperatura < 35\r\n          OR sv.saturacion_oxigeno < 90\r\n        )\r\n      ORDER BY sv.fecha_creacion DESC\r\n      LIMIT 5\r\n      `, [\n            idMedico\n        ]);\n        for (const signo of signosVitalesCriticos){\n            const problemas = [];\n            if (signo.presion_sistolica > 180 || signo.presion_sistolica < 90) problemas.push(`Presión sistólica: ${signo.presion_sistolica} mmHg`);\n            if (signo.presion_diastolica > 120 || signo.presion_diastolica < 60) problemas.push(`Presión diastólica: ${signo.presion_diastolica} mmHg`);\n            if (signo.frecuencia_cardiaca > 120 || signo.frecuencia_cardiaca < 50) problemas.push(`Frecuencia cardíaca: ${signo.frecuencia_cardiaca} lpm`);\n            if (signo.temperatura > 39 || signo.temperatura < 35) problemas.push(`Temperatura: ${signo.temperatura}°C`);\n            if (signo.saturacion_oxigeno < 90) problemas.push(`SpO2: ${signo.saturacion_oxigeno}%`);\n            alertas.push({\n                id_alerta: idAlerta++,\n                tipo: \"critica\",\n                titulo: \"\\uD83D\\uDEA8 Signos Vitales Cr\\xedticos\",\n                descripcion: `${signo.nombre_completo}: ${problemas.join(\", \")}`,\n                fecha_hora: signo.fecha_hora_registro,\n                leida: false,\n                paciente: {\n                    id_paciente: signo.id_paciente,\n                    nombre_completo: signo.nombre_completo\n                },\n                accion_requerida: \"Evaluar inmediatamente al paciente\",\n                url_accion: `/medico/pacientes/${signo.id_paciente}`\n            });\n        }\n        // 2. Resultados de exámenes críticos pendientes\n        const [examenesCriticos] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        re.id_resultado,\r\n        re.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno) as nombre_completo,\r\n        oe.tipo_examen,\r\n        re.fecha_resultado,\r\n        re.resultado_preliminar\r\n      FROM resultados_examenes re\r\n      INNER JOIN ordenes_examenes oe ON re.id_orden = oe.id_orden\r\n      INNER JOIN pacientes p ON re.id_paciente = p.id_paciente\r\n      INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n      WHERE oe.id_medico = ?\r\n        AND pm.activo = 1\r\n        AND re.estado = 'disponible'\r\n        AND re.revisado_por_medico = 0\r\n        AND (\r\n          re.resultado_preliminar LIKE '%anormal%'\r\n          OR re.resultado_preliminar LIKE '%crítico%'\r\n          OR re.resultado_preliminar LIKE '%urgente%'\r\n          OR re.alerta_valor_critico = 1\r\n        )\r\n      ORDER BY re.fecha_resultado DESC\r\n      LIMIT 5\r\n      `, [\n            idMedico\n        ]);\n        for (const examen of examenesCriticos){\n            alertas.push({\n                id_alerta: idAlerta++,\n                tipo: \"alta\",\n                titulo: \"⚠️ Examen con Valores Cr\\xedticos\",\n                descripcion: `${examen.nombre_completo}: ${examen.tipo_examen} requiere revisión urgente`,\n                fecha_hora: examen.fecha_resultado,\n                leida: false,\n                paciente: {\n                    id_paciente: examen.id_paciente,\n                    nombre_completo: examen.nombre_completo\n                },\n                accion_requerida: \"Revisar resultados y contactar al paciente\",\n                url_accion: `/medico/examenes/${examen.id_resultado}`\n            });\n        }\n        // 3. Citas sin confirmar (próximas 24 horas)\n        const [citasSinConfirmar] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        c.id_cita,\r\n        c.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno) as nombre_completo,\r\n        c.fecha_hora_inicio,\r\n        c.tipo_cita\r\n      FROM citas c\r\n      INNER JOIN pacientes p ON c.id_paciente = p.id_paciente\r\n      WHERE c.id_medico = ?\r\n        AND c.estado = 'programada'\r\n        AND c.confirmado_por_paciente = 0\r\n        AND c.fecha_hora_inicio BETWEEN NOW() AND DATE_ADD(NOW(), INTERVAL 24 HOUR)\r\n      ORDER BY c.fecha_hora_inicio ASC\r\n      LIMIT 5\r\n      `, [\n            idMedico\n        ]);\n        for (const cita of citasSinConfirmar){\n            alertas.push({\n                id_alerta: idAlerta++,\n                tipo: \"media\",\n                titulo: \"\\uD83D\\uDCC5 Cita Sin Confirmar\",\n                descripcion: `${cita.nombre_completo} - Cita pendiente de confirmación`,\n                fecha_hora: cita.fecha_hora_inicio,\n                leida: false,\n                paciente: {\n                    id_paciente: cita.id_paciente,\n                    nombre_completo: cita.nombre_completo\n                },\n                accion_requerida: \"Contactar al paciente\",\n                url_accion: `/medico/agenda/${cita.id_cita}`\n            });\n        }\n        // 4. Tratamientos vencidos\n        const [tratamientosVencidos] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        rm.id_receta,\r\n        rm.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno) as nombre_completo,\r\n        rm.fecha_fin_tratamiento,\r\n        COUNT(DISTINCT rmed.id_medicamento) as num_medicamentos\r\n      FROM recetas_medicas rm\r\n      INNER JOIN receta_medicamentos rmed ON rm.id_receta = rmed.id_receta\r\n      INNER JOIN pacientes p ON rm.id_paciente = p.id_paciente\r\n      INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n      WHERE rm.id_medico = ?\r\n        AND pm.activo = 1\r\n        AND rm.estado = 'activa'\r\n        AND rm.fecha_fin_tratamiento < CURDATE()\r\n        AND rm.requiere_seguimiento = 1\r\n      GROUP BY rm.id_receta\r\n      ORDER BY rm.fecha_fin_tratamiento DESC\r\n      LIMIT 5\r\n      `, [\n            idMedico\n        ]);\n        for (const tratamiento of tratamientosVencidos){\n            alertas.push({\n                id_alerta: idAlerta++,\n                tipo: \"media\",\n                titulo: \"\\uD83D\\uDC8A Tratamiento Vencido\",\n                descripcion: `${tratamiento.nombre_completo}: ${tratamiento.num_medicamentos} medicamento(s) requieren seguimiento`,\n                fecha_hora: tratamiento.fecha_fin_tratamiento,\n                leida: false,\n                paciente: {\n                    id_paciente: tratamiento.id_paciente,\n                    nombre_completo: tratamiento.nombre_completo\n                },\n                accion_requerida: \"Evaluar renovaci\\xf3n de tratamiento\",\n                url_accion: `/medico/recetas/${tratamiento.id_receta}`\n            });\n        }\n        // 5. Interconsultas urgentes sin respuesta\n        const [interconsultasUrgentes] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        i.id_interconsulta,\r\n        i.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno) as nombre_completo,\r\n        i.fecha_solicitud,\r\n        e.nombre as especialidad_solicitada\r\n      FROM interconsultas i\r\n      INNER JOIN pacientes p ON i.id_paciente = p.id_paciente\r\n      INNER JOIN especialidades e ON i.id_especialidad_destino = e.id_especialidad\r\n      WHERE i.id_medico_solicitante = ?\r\n        AND i.prioridad = 'urgente'\r\n        AND i.estado = 'pendiente'\r\n        AND i.fecha_solicitud < DATE_SUB(NOW(), INTERVAL 24 HOUR)\r\n      ORDER BY i.fecha_solicitud ASC\r\n      LIMIT 5\r\n      `, [\n            idMedico\n        ]);\n        for (const interconsulta of interconsultasUrgentes){\n            alertas.push({\n                id_alerta: idAlerta++,\n                tipo: \"alta\",\n                titulo: \"\\uD83D\\uDD04 Interconsulta Sin Respuesta\",\n                descripcion: `${interconsulta.nombre_completo}: ${interconsulta.especialidad_solicitada} pendiente +24h`,\n                fecha_hora: interconsulta.fecha_solicitud,\n                leida: false,\n                paciente: {\n                    id_paciente: interconsulta.id_paciente,\n                    nombre_completo: interconsulta.nombre_completo\n                },\n                accion_requerida: \"Seguimiento con especialista\",\n                url_accion: `/medico/interconsultas/${interconsulta.id_interconsulta}`\n            });\n        }\n        // Ordenar por prioridad y fecha\n        const ordenTipo = {\n            critica: 1,\n            alta: 2,\n            media: 3,\n            baja: 4\n        };\n        alertas.sort((a, b)=>{\n            if (ordenTipo[a.tipo] !== ordenTipo[b.tipo]) {\n                return ordenTipo[a.tipo] - ordenTipo[b.tipo];\n            }\n            return new Date(b.fecha_hora).getTime() - new Date(a.fecha_hora).getTime();\n        });\n        return alertas;\n    } catch (error) {\n        console.error(\"Error al obtener alertas urgentes:\", error);\n        throw error;\n    }\n}\n/**\r\n * Obtiene los pacientes recientes del médico\r\n */ async function obtenerPacientesRecientes(idMedico) {\n    try {\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT DISTINCT\r\n        p.id_paciente,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno, ' ', COALESCE(p.apellido_materno, '')) as nombre_completo,\r\n        TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) as edad,\r\n        p.genero,\r\n        p.foto_url,\r\n        p.grupo_sanguineo,\r\n        hc.fecha_atencion as ultima_consulta,\r\n        d.diagnostico as diagnostico_principal,\r\n        CASE \r\n          WHEN EXISTS (\r\n            SELECT 1 FROM signos_vitales sv \r\n            WHERE sv.id_paciente = p.id_paciente \r\n            AND sv.fecha_creacion >= DATE_SUB(NOW(), INTERVAL 7 DAY)\r\n            AND (sv.presion_sistolica > 180 OR sv.presion_diastolica > 120 \r\n                 OR sv.pulso > 120 OR sv.pulso < 50\r\n                 OR sv.temperatura > 39 OR sv.saturacion_oxigeno < 90)\r\n          ) THEN 'critico'\r\n          WHEN EXISTS (\r\n            SELECT 1 FROM signos_vitales sv \r\n            WHERE sv.id_paciente = p.id_paciente \r\n            AND sv.fecha_creacion >= DATE_SUB(NOW(), INTERVAL 7 DAY)\r\n            AND (sv.presion_sistolica > 160 OR sv.presion_diastolica > 100 \r\n                 OR sv.pulso > 100 OR sv.temperatura > 38)\r\n          ) THEN 'atencion'\r\n          ELSE 'estable'\r\n        END as estado_salud,\r\n        (\r\n          SELECT MIN(fecha_hora_inicio)\r\n          FROM citas\r\n          WHERE id_paciente = p.id_paciente\r\n            AND id_medico = ?\r\n            AND fecha_hora_inicio > NOW()\r\n            AND estado NOT IN ('cancelada', 'no_asistio')\r\n        ) as proxima_cita,\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM alergias\r\n          WHERE id_paciente = p.id_paciente\r\n            AND estado = 'activa'\r\n            AND severidad IN ('severa', 'fatal')\r\n        ) as alergias_criticas,\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM antecedentes\r\n          WHERE id_paciente = p.id_paciente\r\n            AND estado = 'activo'\r\n            AND tipo = 'patologico'\r\n        ) as condiciones_cronicas\r\n      FROM pacientes p\r\n      INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n      LEFT JOIN historial_clinico hc ON p.id_paciente = hc.id_paciente\r\n        AND hc.id_medico = ?\r\n        AND hc.id_historial = (\r\n          SELECT MAX(id_historial)\r\n          FROM historial_clinico\r\n          WHERE id_paciente = p.id_paciente AND id_medico = ?\r\n        )\r\n      LEFT JOIN diagnosticos d ON p.id_paciente = d.id_paciente\r\n        AND d.tipo = 'principal' AND d.estado = 'activo'\r\n        AND d.id_diagnostico = (\r\n          SELECT MAX(id_diagnostico)\r\n          FROM diagnosticos\r\n          WHERE id_paciente = p.id_paciente \r\n            AND tipo = 'principal' AND estado = 'activo'\r\n        )\r\n      WHERE pm.id_medico = ?\r\n        AND pm.activo = 1\r\n        AND hc.fecha_atencion >= DATE_SUB(NOW(), INTERVAL 30 DAY)\r\n      ORDER BY hc.fecha_atencion DESC\r\n      LIMIT 10\r\n      `, [\n            idMedico,\n            idMedico,\n            idMedico,\n            idMedico\n        ]);\n        return rows.map((row)=>({\n                id_paciente: row.id_paciente,\n                nombre_completo: row.nombre_completo,\n                edad: row.edad,\n                genero: row.genero,\n                foto_url: row.foto_url,\n                ultima_consulta: row.ultima_consulta,\n                diagnostico_principal: row.diagnostico_principal,\n                estado_salud: row.estado_salud,\n                proxima_cita: row.proxima_cita,\n                alergias_criticas: row.alergias_criticas,\n                condiciones_cronicas: row.condiciones_cronicas,\n                grupo_sanguineo: row.grupo_sanguineo || \"N/A\"\n            }));\n    } catch (error) {\n        console.error(\"Error al obtener pacientes recientes:\", error);\n        throw error;\n    }\n}\n/**\r\n * Calcula métricas de rendimiento\r\n */ async function obtenerMetricasRendimiento(idMedico) {\n    try {\n        const inicioMesActual = new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split(\"T\")[0];\n        const inicioMesAnterior = new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1).toISOString().split(\"T\")[0];\n        const finMesAnterior = new Date(new Date().getFullYear(), new Date().getMonth(), 0).toISOString().split(\"T\")[0];\n        const [consultasActual, consultasAnterior, pacientesActual, pacientesAnterior, asistenciaActual, asistenciaAnterior, ingresosActual, ingresosAnterior] = await Promise.all([\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion >= ?`, [\n                idMedico,\n                inicioMesActual\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion BETWEEN ? AND ?`, [\n                idMedico,\n                inicioMesAnterior,\n                finMesAnterior\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(DISTINCT id_paciente) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion >= ?`, [\n                idMedico,\n                inicioMesActual\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(DISTINCT id_paciente) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion BETWEEN ? AND ?`, [\n                idMedico,\n                inicioMesAnterior,\n                finMesAnterior\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT \r\n          COUNT(CASE WHEN estado = 'completada' THEN 1 END) as completadas,\r\n          COUNT(*) as total\r\n         FROM citas WHERE id_medico = ? AND fecha_hora_inicio >= ?`, [\n                idMedico,\n                inicioMesActual\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT \r\n          COUNT(CASE WHEN estado = 'completada' THEN 1 END) as completadas,\r\n          COUNT(*) as total\r\n         FROM citas WHERE id_medico = ? AND fecha_hora_inicio BETWEEN ? AND ?`, [\n                idMedico,\n                inicioMesAnterior,\n                finMesAnterior\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COALESCE(SUM(monto), 0) as total FROM citas \r\n         WHERE id_medico = ? AND fecha_hora_inicio >= ? \r\n         AND pagada = 1 AND estado = 'completada'`, [\n                idMedico,\n                inicioMesActual\n            ]),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COALESCE(SUM(monto), 0) as total FROM citas \r\n         WHERE id_medico = ? AND fecha_hora_inicio BETWEEN ? AND ? \r\n         AND pagada = 1 AND estado = 'completada'`, [\n                idMedico,\n                inicioMesAnterior,\n                finMesAnterior\n            ])\n        ]);\n        const calcularMetrica = (actual, anterior, unidad, nombre, icono, color, descripcion)=>{\n            const cambio = anterior > 0 ? (actual - anterior) / anterior * 100 : 0;\n            const tendencia = cambio > 5 ? \"up\" : cambio < -5 ? \"down\" : \"neutral\";\n            return {\n                nombre,\n                valor_actual: actual,\n                valor_anterior: anterior,\n                unidad,\n                tendencia,\n                porcentaje_cambio: Math.abs(Math.round(cambio)),\n                icono,\n                color,\n                descripcion\n            };\n        };\n        const tasaAsistenciaActual = asistenciaActual[0][0].total > 0 ? asistenciaActual[0][0].completadas / asistenciaActual[0][0].total * 100 : 0;\n        const tasaAsistenciaAnterior = asistenciaAnterior[0][0].total > 0 ? asistenciaAnterior[0][0].completadas / asistenciaAnterior[0][0].total * 100 : 0;\n        return [\n            calcularMetrica(consultasActual[0][0].total, consultasAnterior[0][0].total, \"\", \"Consultas\", \"Activity\", \"from-blue-500 to-cyan-500\", \"Total de consultas realizadas este mes\"),\n            calcularMetrica(pacientesActual[0][0].total, pacientesAnterior[0][0].total, \"\", \"Pacientes\", \"Users\", \"from-green-500 to-emerald-500\", \"Pacientes \\xfanicos atendidos este mes\"),\n            calcularMetrica(Math.round(tasaAsistenciaActual), Math.round(tasaAsistenciaAnterior), \"%\", \"Asistencia\", \"CheckCircle2\", \"from-purple-500 to-pink-500\", \"Porcentaje de citas completadas\"),\n            calcularMetrica(parseFloat(ingresosActual[0][0].total), parseFloat(ingresosAnterior[0][0].total), \"$\", \"Ingresos\", \"DollarSign\", \"from-emerald-500 to-teal-500\", \"Ingresos generados este mes\")\n        ];\n    } catch (error) {\n        console.error(\"Error al calcular m\\xe9tricas:\", error);\n        throw error;\n    }\n}\n/**\r\n * Obtiene eventos del calendario\r\n */ async function obtenerEventosCalendario(idMedico) {\n    try {\n        const hoy = new Date().toISOString().split(\"T\")[0];\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        c.id_cita as id,\r\n        CONCAT('Cita: ', p.nombre, ' ', p.apellido_paterno) as titulo,\r\n        'cita' as tipo,\r\n        c.fecha_hora_inicio as fecha_hora_inicio,\r\n        c.fecha_hora_fin as fecha_hora_fin,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno) as paciente,\r\n        COALESCE(s.nombre, 'Consultorio Principal') as ubicacion,\r\n        c.estado,\r\n        CASE \r\n          WHEN c.estado = 'completada' THEN '#10b981'\r\n          WHEN c.estado = 'confirmada' THEN '#3b82f6'\r\n          WHEN c.estado = 'programada' THEN '#f59e0b'\r\n          ELSE '#6b7280'\r\n        END as color\r\n      FROM citas c\r\n      INNER JOIN pacientes p ON c.id_paciente = p.id_paciente\r\n      LEFT JOIN salas s ON c.id_sala = s.id_sala\r\n      WHERE c.id_medico = ?\r\n        AND DATE(c.fecha_hora_inicio) = ?\r\n        AND c.estado NOT IN ('cancelada', 'no_asistio')\r\n      ORDER BY c.fecha_hora_inicio ASC\r\n      `, [\n            idMedico,\n            hoy\n        ]);\n        return rows.map((row)=>({\n                id: row.id,\n                titulo: row.titulo,\n                tipo: row.tipo,\n                fecha_hora_inicio: row.fecha_hora_inicio,\n                fecha_hora_fin: row.fecha_hora_fin,\n                paciente: row.paciente,\n                ubicacion: row.ubicacion,\n                estado: row.estado,\n                color: row.color\n            }));\n    } catch (error) {\n        console.error(\"Error al obtener eventos:\", error);\n        throw error;\n    }\n}\n/**\r\n * Obtiene actividades recientes\r\n */ async function obtenerActividadesRecientes(idMedico) {\n    try {\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        l.id_log as id,\r\n        l.tipo,\r\n        l.accion as descripcion,\r\n        l.fecha_hora,\r\n        CONCAT(u.nombre, ' ', u.apellido_paterno) as usuario,\r\n        CASE \r\n          WHEN l.tipo = 'consulta' THEN 'ClipboardCheck'\r\n          WHEN l.tipo = 'receta' THEN 'Pill'\r\n          WHEN l.tipo = 'examen' THEN 'TestTube'\r\n          WHEN l.tipo = 'certificado' THEN 'FileText'\r\n          ELSE 'Activity'\r\n        END as icono,\r\n        CASE \r\n          WHEN l.tipo = 'consulta' THEN 'from-blue-500 to-cyan-500'\r\n          WHEN l.tipo = 'receta' THEN 'from-green-500 to-emerald-500'\r\n          WHEN l.tipo = 'examen' THEN 'from-purple-500 to-pink-500'\r\n          WHEN l.tipo = 'certificado' THEN 'from-orange-500 to-red-500'\r\n          ELSE 'from-gray-500 to-slate-500'\r\n        END as color\r\n      FROM logs_sistema l\r\n      INNER JOIN usuarios u ON l.id_usuario = u.id_usuario\r\n      WHERE l.id_usuario = (SELECT id_usuario FROM medicos WHERE id_medico = ?)\r\n      ORDER BY l.fecha_hora DESC\r\n      LIMIT 10\r\n      `, [\n            idMedico\n        ]);\n        return rows.map((row)=>({\n                id: row.id,\n                tipo: row.tipo,\n                descripcion: row.descripcion,\n                fecha_hora: row.fecha_hora,\n                usuario: row.usuario,\n                icono: row.icono,\n                color: row.color\n            }));\n    } catch (error) {\n        console.error(\"Error al obtener actividades:\", error);\n        // Retornar array vacío en caso de error\n        return [];\n    }\n}\n// ========================================\n// HANDLER GET\n// ========================================\nasync function GET(request) {\n    try {\n        // 1. Obtener token\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        // 2. Verificar sesión\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario, u.nombre, u.apellido_paterno\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        // 3. Verificar que sea médico\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo. Contacta al administrador.\"\n            }, {\n                status: 403\n            });\n        }\n        // 4. Actualizar última actividad\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE sesiones_usuarios SET ultima_actividad = NOW() WHERE token = ?`, [\n            sessionToken\n        ]);\n        // 5. Obtener todos los datos en paralelo\n        const [estadisticas, citasProximas, alertasUrgentes, pacientesRecientes, metricasRendimiento, eventosCalendario, actividadesRecientes] = await Promise.all([\n            obtenerEstadisticas(medico.id_medico),\n            obtenerCitasProximas(medico.id_medico),\n            obtenerAlertasUrgentes(medico.id_medico),\n            obtenerPacientesRecientes(medico.id_medico),\n            obtenerMetricasRendimiento(medico.id_medico),\n            obtenerEventosCalendario(medico.id_medico),\n            obtenerActividadesRecientes(medico.id_medico)\n        ]);\n        // 6. Respuesta exitosa\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            medico: {\n                id_medico: medico.id_medico,\n                numero_registro_medico: medico.numero_registro_medico,\n                titulo_profesional: medico.titulo_profesional,\n                especialidad_principal: medico.especialidad_principal,\n                anos_experiencia: medico.anos_experiencia,\n                calificacion_promedio: medico.calificacion_promedio\n            },\n            estadisticas,\n            citas_proximas: citasProximas,\n            alertas_urgentes: alertasUrgentes,\n            pacientes_recientes: pacientesRecientes,\n            metricas_rendimiento: metricasRendimiento,\n            eventos_calendario: eventosCalendario,\n            actividades_recientes: actividadesRecientes,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en GET /api/medico/dashboard:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// MÉTODOS NO PERMITIDOS\n// ========================================\nasync function POST() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: false,\n        error: \"M\\xe9todo no permitido\"\n    }, {\n        status: 405\n    });\n}\nasync function PUT() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: false,\n        error: \"M\\xe9todo no permitido\"\n    }, {\n        status: 405\n    });\n}\nasync function DELETE() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: false,\n        error: \"M\\xe9todo no permitido\"\n    }, {\n        status: 405\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZWRpY28vZGFzaGJvYXJkL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLG9DQUFvQztBQUNvQjtBQUM1QjtBQTJINUIsMkNBQTJDO0FBQzNDLCtCQUErQjtBQUMvQiwyQ0FBMkM7QUFFM0MsTUFBTUUsNEJBQTRCO0lBQ2hDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNEO0FBRUQsU0FBU0MsZ0JBQWdCQyxPQUFvQjtJQUMzQyxNQUFNQyxlQUFlRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxhQUFhO0lBRXRELElBQUlGLGNBQWM7UUFDaEIsTUFBTUcsVUFBVUgsYUFDYkksS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ2pCQyxNQUFNLENBQUNDLFNBQ1BDLE1BQU0sQ0FBQyxDQUFDQyxLQUFLTDtZQUNaLE1BQU0sQ0FBQ00sR0FBRyxHQUFHQyxLQUFLLEdBQUdQLEVBQUVGLEtBQUssQ0FBQztZQUM3Qk8sR0FBRyxDQUFDQyxFQUFFLEdBQUdDLEtBQUtDLElBQUksQ0FBQztZQUNuQixPQUFPSDtRQUNULEdBQUcsQ0FBQztRQUVOLEtBQUssTUFBTUksUUFBUWxCLDBCQUEyQjtZQUM1QyxJQUFJTSxPQUFPLENBQUNZLEtBQUssRUFBRTtnQkFDakIsT0FBT0MsbUJBQW1CYixPQUFPLENBQUNZLEtBQUs7WUFDekM7UUFDRjtJQUNGO0lBRUEsTUFBTUUsT0FBT2xCLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ2pDLElBQUllLE1BQU1DLFdBQVcsWUFBWTtRQUMvQixPQUFPRCxLQUFLRSxLQUFLLENBQUM7SUFDcEI7SUFFQSxPQUFPO0FBQ1Q7QUFFQSwyQ0FBMkM7QUFDM0MsdUJBQXVCO0FBQ3ZCLDJDQUEyQztBQUUzQzs7Q0FFQyxHQUNELGVBQWVDLHlCQUNiQyxTQUFpQjtJQUVqQixJQUFJO1FBQ0YsTUFBTSxDQUFDQyxLQUFLLEdBQUcsTUFBTTFC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LGtCQUFrQlg7WUFDbEJZLHFCQUFxQlg7WUFDckJZLHNCQUFzQlg7WUFDdEJZLG9CQUFvQlg7WUFDcEJZLHVCQUF1Qlg7WUFDdkJZLFdBQVcsSUFBSXJMLE9BQU9DLFdBQVc7UUFDbkMsR0FDQTtZQUFFOEosUUFBUTtRQUFJO0lBRWxCLEVBQUUsT0FBT3BLLE9BQVk7UUFDbkJDLFFBQVFELEtBQUssQ0FBQyx5Q0FBeUNBO1FBRXZELE9BQU85QixrRkFBWUEsQ0FBQ2dNLElBQUksQ0FDdEI7WUFDRUMsU0FBUztZQUNUbkssT0FBTztZQUNQMkwsU0FDRUMsS0FBc0MsR0FBRzVMLE1BQU02TCxPQUFPLEdBQUdDLENBQVNBO1FBQ3RFLEdBQ0E7WUFBRTFCLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsMkNBQTJDO0FBQzNDLHdCQUF3QjtBQUN4QiwyQ0FBMkM7QUFFcEMsZUFBZTJCO0lBQ3BCLE9BQU83TixrRkFBWUEsQ0FBQ2dNLElBQUksQ0FDdEI7UUFBRUMsU0FBUztRQUFPbkssT0FBTztJQUFzQixHQUMvQztRQUFFb0ssUUFBUTtJQUFJO0FBRWxCO0FBRU8sZUFBZTRCO0lBQ3BCLE9BQU85TixrRkFBWUEsQ0FBQ2dNLElBQUksQ0FDdEI7UUFBRUMsU0FBUztRQUFPbkssT0FBTztJQUFzQixHQUMvQztRQUFFb0ssUUFBUTtJQUFJO0FBRWxCO0FBRU8sZUFBZTZCO0lBQ3BCLE9BQU8vTixrRkFBWUEsQ0FBQ2dNLElBQUksQ0FDdEI7UUFBRUMsU0FBUztRQUFPbkssT0FBTztJQUFzQixHQUMvQztRQUFFb0ssUUFBUTtJQUFJO0FBRWxCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVkaXN1aXRlLXByby8uL3NyYy9hcHAvYXBpL21lZGljby9kYXNoYm9hcmQvcm91dGUudHM/ZTBjZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL21lZGljby9kYXNoYm9hcmQvcm91dGUudHNcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgcG9vbCBmcm9tIFwiQC9saWIvZGJcIjtcclxuaW1wb3J0IHsgUm93RGF0YVBhY2tldCB9IGZyb20gXCJteXNxbDJcIjtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1NcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW50ZXJmYWNlIE1lZGljb0RhdGEge1xyXG4gIGlkX21lZGljbzogbnVtYmVyO1xyXG4gIGlkX3VzdWFyaW86IG51bWJlcjtcclxuICBpZF9jZW50cm9fcHJpbmNpcGFsOiBudW1iZXI7XHJcbiAgbnVtZXJvX3JlZ2lzdHJvX21lZGljbzogc3RyaW5nO1xyXG4gIHRpdHVsb19wcm9mZXNpb25hbDogc3RyaW5nO1xyXG4gIGVzcGVjaWFsaWRhZF9wcmluY2lwYWw6IHN0cmluZztcclxuICBhbm9zX2V4cGVyaWVuY2lhOiBudW1iZXI7XHJcbiAgY2FsaWZpY2FjaW9uX3Byb21lZGlvOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBFc3RhZGlzdGljYXNSZXN1bWVuIHtcclxuICBjaXRhc19ob3k6IG51bWJlcjtcclxuICBjaXRhc19wZW5kaWVudGVzOiBudW1iZXI7XHJcbiAgY2l0YXNfY29tcGxldGFkYXNfaG95OiBudW1iZXI7XHJcbiAgY2l0YXNfY2FuY2VsYWRhc19ob3k6IG51bWJlcjtcclxuICBwYWNpZW50ZXNfbnVldm9zX21lczogbnVtYmVyO1xyXG4gIHRvdGFsX3BhY2llbnRlczogbnVtYmVyO1xyXG4gIGNvbnN1bHRhc19tZXM6IG51bWJlcjtcclxuICBjb25zdWx0YXNfYW5vOiBudW1iZXI7XHJcbiAgcmVjZXRhc19lbWl0aWRhc19tZXM6IG51bWJlcjtcclxuICBvcmRlbmVzX2V4YW1lbl9tZXM6IG51bWJlcjtcclxuICBpbnRlcmNvbnN1bHRhc19wZW5kaWVudGVzOiBudW1iZXI7XHJcbiAgbWVuc2FqZXNfc2luX2xlZXI6IG51bWJlcjtcclxuICBjYWxpZmljYWNpb25fcHJvbWVkaW86IG51bWJlcjtcclxuICB0b3RhbF9yZXNlbmFzOiBudW1iZXI7XHJcbiAgaW5ncmVzb3NfbWVzOiBudW1iZXI7XHJcbiAgdGVsZW1lZGljaW5hX2FjdGl2YXM6IG51bWJlcjtcclxuICBjZXJ0aWZpY2Fkb3NfZW1pdGlkb3M6IG51bWJlcjtcclxuICBwcm9jZWRpbWllbnRvc19tZXM6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIENpdGFQcm94aW1hIHtcclxuICBpZF9jaXRhOiBudW1iZXI7XHJcbiAgZmVjaGFfaG9yYTogc3RyaW5nO1xyXG4gIGR1cmFjaW9uX21pbnV0b3M6IG51bWJlcjtcclxuICB0aXBvX2NpdGE6IHN0cmluZztcclxuICBtb2RhbGlkYWQ6IFwicHJlc2VuY2lhbFwiIHwgXCJ0ZWxlbWVkaWNpbmFcIjtcclxuICBlc3RhZG86IHN0cmluZztcclxuICBwYWNpZW50ZToge1xyXG4gICAgaWRfcGFjaWVudGU6IG51bWJlcjtcclxuICAgIG5vbWJyZV9jb21wbGV0bzogc3RyaW5nO1xyXG4gICAgZWRhZDogbnVtYmVyO1xyXG4gICAgZm90b191cmw6IHN0cmluZyB8IG51bGw7XHJcbiAgICB0ZWxlZm9ubzogc3RyaW5nIHwgbnVsbDtcclxuICAgIGdydXBvX3Nhbmd1aW5lbzogc3RyaW5nO1xyXG4gIH07XHJcbiAgbW90aXZvOiBzdHJpbmcgfCBudWxsO1xyXG4gIG5vdGFzOiBzdHJpbmcgfCBudWxsO1xyXG4gIHNhbGE6IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmludGVyZmFjZSBBbGVydGFVcmdlbnRlIHtcclxuICBpZF9hbGVydGE6IG51bWJlcjtcclxuICB0aXBvOiBcImNyaXRpY2FcIiB8IFwiYWx0YVwiIHwgXCJtZWRpYVwiIHwgXCJiYWphXCI7XHJcbiAgdGl0dWxvOiBzdHJpbmc7XHJcbiAgZGVzY3JpcGNpb246IHN0cmluZztcclxuICBmZWNoYV9ob3JhOiBzdHJpbmc7XHJcbiAgbGVpZGE6IGJvb2xlYW47XHJcbiAgcGFjaWVudGU/OiB7XHJcbiAgICBpZF9wYWNpZW50ZTogbnVtYmVyO1xyXG4gICAgbm9tYnJlX2NvbXBsZXRvOiBzdHJpbmc7XHJcbiAgfTtcclxuICBhY2Npb25fcmVxdWVyaWRhOiBzdHJpbmcgfCBudWxsO1xyXG4gIHVybF9hY2Npb24/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQYWNpZW50ZVJlY2llbnRlIHtcclxuICBpZF9wYWNpZW50ZTogbnVtYmVyO1xyXG4gIG5vbWJyZV9jb21wbGV0bzogc3RyaW5nO1xyXG4gIGVkYWQ6IG51bWJlcjtcclxuICBnZW5lcm86IHN0cmluZztcclxuICBmb3RvX3VybDogc3RyaW5nIHwgbnVsbDtcclxuICB1bHRpbWFfY29uc3VsdGE6IHN0cmluZztcclxuICBkaWFnbm9zdGljb19wcmluY2lwYWw6IHN0cmluZyB8IG51bGw7XHJcbiAgZXN0YWRvX3NhbHVkOiBcImVzdGFibGVcIiB8IFwiYXRlbmNpb25cIiB8IFwiY3JpdGljb1wiO1xyXG4gIHByb3hpbWFfY2l0YTogc3RyaW5nIHwgbnVsbDtcclxuICBhbGVyZ2lhc19jcml0aWNhczogbnVtYmVyO1xyXG4gIGNvbmRpY2lvbmVzX2Nyb25pY2FzOiBudW1iZXI7XHJcbiAgZ3J1cG9fc2FuZ3VpbmVvOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBNZXRyaWNhUmVuZGltaWVudG8ge1xyXG4gIG5vbWJyZTogc3RyaW5nO1xyXG4gIHZhbG9yX2FjdHVhbDogbnVtYmVyO1xyXG4gIHZhbG9yX2FudGVyaW9yOiBudW1iZXI7XHJcbiAgdW5pZGFkOiBzdHJpbmc7XHJcbiAgdGVuZGVuY2lhOiBcInVwXCIgfCBcImRvd25cIiB8IFwibmV1dHJhbFwiO1xyXG4gIHBvcmNlbnRhamVfY2FtYmlvOiBudW1iZXI7XHJcbiAgaWNvbm86IHN0cmluZztcclxuICBjb2xvcjogc3RyaW5nO1xyXG4gIGRlc2NyaXBjaW9uOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBFdmVudG9DYWxlbmRhcmlvIHtcclxuICBpZDogbnVtYmVyO1xyXG4gIHRpdHVsbzogc3RyaW5nO1xyXG4gIHRpcG86IFwiY2l0YVwiIHwgXCJjaXJ1Z2lhXCIgfCBcInJldW5pb25cIiB8IFwiY2FwYWNpdGFjaW9uXCIgfCBcIm90cm9cIjtcclxuICBmZWNoYV9ob3JhX2luaWNpbzogc3RyaW5nO1xyXG4gIGZlY2hhX2hvcmFfZmluOiBzdHJpbmc7XHJcbiAgcGFjaWVudGU/OiBzdHJpbmc7XHJcbiAgdWJpY2FjaW9uOiBzdHJpbmc7XHJcbiAgZXN0YWRvOiBzdHJpbmc7XHJcbiAgY29sb3I6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEFjdGl2aWRhZFJlY2llbnRlIHtcclxuICBpZDogbnVtYmVyO1xyXG4gIHRpcG86IHN0cmluZztcclxuICBkZXNjcmlwY2lvbjogc3RyaW5nO1xyXG4gIGZlY2hhX2hvcmE6IHN0cmluZztcclxuICB1c3VhcmlvOiBzdHJpbmc7XHJcbiAgaWNvbm86IHN0cmluZztcclxuICBjb2xvcjogc3RyaW5nO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhFTFBFUiBQQVJBIE9CVEVORVIgRUwgVE9LRU5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuY29uc3QgU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUyA9IFtcclxuICBcInNlc3Npb25cIixcclxuICBcInNlc3Npb25fdG9rZW5cIixcclxuICBcIm1lZGlzYWx1ZF9zZXNzaW9uXCIsXHJcbiAgXCJhdXRoX3Nlc3Npb25cIixcclxuICBcIm5leHQtYXV0aC5zZXNzaW9uLXRva2VuXCIsXHJcbiAgXCJfX1NlY3VyZS1uZXh0LWF1dGguc2Vzc2lvbi10b2tlblwiLFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgY29uc3QgY29va2llSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImNvb2tpZVwiKSB8fCBcIlwiO1xyXG5cclxuICBpZiAoY29va2llSGVhZGVyKSB7XHJcbiAgICBjb25zdCBjb29raWVzID0gY29va2llSGVhZGVyXHJcbiAgICAgIC5zcGxpdChcIjtcIilcclxuICAgICAgLm1hcCgoYykgPT4gYy50cmltKCkpXHJcbiAgICAgIC5maWx0ZXIoQm9vbGVhbilcclxuICAgICAgLnJlZHVjZSgoYWNjLCBjKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW2ssIC4uLnJlc3RdID0gYy5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgYWNjW2tdID0gcmVzdC5qb2luKFwiPVwiKTtcclxuICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUykge1xyXG4gICAgICBpZiAoY29va2llc1tuYW1lXSkge1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llc1tuYW1lXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGF1dGggPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcclxuICBpZiAoYXV0aD8uc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcclxuICAgIHJldHVybiBhdXRoLnNsaWNlKDcpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gRlVOQ0lPTkVTIEFVWElMSUFSRVNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLyoqXHJcbiAqIE9idGllbmUgbGEgaW5mb3JtYWNpw7NuIGRlbCBtw6lkaWNvIGF1dGVudGljYWRvXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oXHJcbiAgaWRVc3VhcmlvOiBudW1iZXJcclxuKTogUHJvbWlzZTxNZWRpY29EYXRhIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIG0uaWRfbWVkaWNvLFxyXG4gICAgICAgIG0uaWRfdXN1YXJpbyxcclxuICAgICAgICBtLmlkX2NlbnRyb19wcmluY2lwYWwsXHJcbiAgICAgICAgbS5udW1lcm9fcmVnaXN0cm9fbWVkaWNvLFxyXG4gICAgICAgIG0udGl0dWxvX3Byb2Zlc2lvbmFsLFxyXG4gICAgICAgIG0uZXNwZWNpYWxpZGFkX3ByaW5jaXBhbCxcclxuICAgICAgICBtLmFub3NfZXhwZXJpZW5jaWEsXHJcbiAgICAgICAgbS5jYWxpZmljYWNpb25fcHJvbWVkaW9cclxuICAgICAgRlJPTSBtZWRpY29zIG1cclxuICAgICAgV0hFUkUgbS5pZF91c3VhcmlvID0gPyBBTkQgbS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtpZFVzdWFyaW9dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm93c1swXSBhcyBNZWRpY29EYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgb2J0ZW5lciBtw6lkaWNvOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGxhcyBlc3RhZMOtc3RpY2FzIHJlc3VtZW4gZGVsIG3DqWRpY29cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJFc3RhZGlzdGljYXMoXHJcbiAgaWRNZWRpY286IG51bWJlclxyXG4pOiBQcm9taXNlPEVzdGFkaXN0aWNhc1Jlc3VtZW4+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaG95ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcclxuICAgIGNvbnN0IGluaWNpb01lcyA9IG5ldyBEYXRlKFxyXG4gICAgICBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSxcclxuICAgICAgMVxyXG4gICAgKVxyXG4gICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAuc3BsaXQoXCJUXCIpWzBdO1xyXG4gICAgY29uc3QgaW5pY2lvQW5vID0gbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAwLCAxKVxyXG4gICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAuc3BsaXQoXCJUXCIpWzBdO1xyXG5cclxuICAgIC8vIENvbnN1bHRhcyBwYXJhbGVsYXMgcGFyYSBtZWpvciByZW5kaW1pZW50b1xyXG4gICAgY29uc3QgW1xyXG4gICAgICBjaXRhc0hveSxcclxuICAgICAgY2l0YXNQZW5kaWVudGVzLFxyXG4gICAgICBjaXRhc0NvbXBsZXRhZGFzSG95LFxyXG4gICAgICBjaXRhc0NhbmNlbGFkYXNIb3ksXHJcbiAgICAgIHBhY2llbnRlc051ZXZvc01lcyxcclxuICAgICAgdG90YWxQYWNpZW50ZXMsXHJcbiAgICAgIGNvbnN1bHRhc01lcyxcclxuICAgICAgY29uc3VsdGFzQW5vLFxyXG4gICAgICByZWNldGFzTWVzLFxyXG4gICAgICBvcmRlbmVzTWVzLFxyXG4gICAgICBpbnRlcmNvbnN1bHRhc1BlbmRpZW50ZXMsXHJcbiAgICAgIG1lbnNhamVzU2luTGVlcixcclxuICAgICAgY2FsaWZpY2FjaW9uLFxyXG4gICAgICBpbmdyZXNvc01lcyxcclxuICAgICAgdGVsZW1lZGljaW5hLFxyXG4gICAgICBjZXJ0aWZpY2Fkb3NNZXMsXHJcbiAgICAgIHByb2NlZGltaWVudG9zTWVzLFxyXG4gICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgLy8gQ2l0YXMgZGUgaG95XHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gY2l0YXMgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIERBVEUoZmVjaGFfaG9yYV9pbmljaW8pID0gPyBcclxuICAgICAgICAgQU5EIGVzdGFkbyBOT1QgSU4gKCdjYW5jZWxhZGEnLCAnbm9fYXNpc3RpbycpYCxcclxuICAgICAgICBbaWRNZWRpY28sIGhveV1cclxuICAgICAgKSxcclxuXHJcbiAgICAgIC8vIENpdGFzIHBlbmRpZW50ZXNcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBjaXRhcyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZXN0YWRvIElOICgncHJvZ3JhbWFkYScsICdwZW5kaWVudGUnKSBcclxuICAgICAgICAgQU5EIGZlY2hhX2hvcmFfaW5pY2lvID4gTk9XKClgLFxyXG4gICAgICAgIFtpZE1lZGljb11cclxuICAgICAgKSxcclxuXHJcbiAgICAgIC8vIENpdGFzIGNvbXBsZXRhZGFzIGhveVxyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIGNpdGFzIFxyXG4gICAgICAgICBXSEVSRSBpZF9tZWRpY28gPSA/IEFORCBEQVRFKGZlY2hhX2hvcmFfaW5pY2lvKSA9ID8gXHJcbiAgICAgICAgIEFORCBlc3RhZG8gPSAnY29tcGxldGFkYSdgLFxyXG4gICAgICAgIFtpZE1lZGljbywgaG95XVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gQ2l0YXMgY2FuY2VsYWRhcyBob3lcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBjaXRhcyBjIFxyXG4gICAgICAgICBJTk5FUiBKT0lOIGNhbmNlbGFjaW9uZXMgY2FuIE9OIGMuaWRfY2l0YSA9IGNhbi5pZF9jaXRhIFxyXG4gICAgICAgICBXSEVSRSBjLmlkX21lZGljbyA9ID8gQU5EIERBVEUoY2FuLmZlY2hhX2NhbmNlbGFjaW9uKSA9ID9gLFxyXG4gICAgICAgIFtpZE1lZGljbywgaG95XVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gUGFjaWVudGVzIG51ZXZvcyBkZWwgbWVzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKERJU1RJTkNUIHBtLmlkX3BhY2llbnRlKSBhcyB0b3RhbCBcclxuICAgICAgICAgRlJPTSBwYWNpZW50ZXNfbWVkaWNvIHBtIFxyXG4gICAgICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/IEFORCBwbS5mZWNoYV9hc2lnbmFjaW9uID49ID8gQU5EIHBtLmFjdGl2byA9IDFgLFxyXG4gICAgICAgIFtpZE1lZGljbywgaW5pY2lvTWVzXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gVG90YWwgcGFjaWVudGVzIGFjdGl2b3NcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoRElTVElOQ1QgaWRfcGFjaWVudGUpIGFzIHRvdGFsIFxyXG4gICAgICAgICBGUk9NIHBhY2llbnRlc19tZWRpY28gV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgYWN0aXZvID0gMWAsXHJcbiAgICAgICAgW2lkTWVkaWNvXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gQ29uc3VsdGFzIGRlbCBtZXNcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBoaXN0b3JpYWxfY2xpbmljbyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZmVjaGFfYXRlbmNpb24gPj0gPyBBTkQgZXN0YWRvX3JlZ2lzdHJvICE9ICdhbnVsYWRvJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNdXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBDb25zdWx0YXMgZGVsIGHDsW9cclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBoaXN0b3JpYWxfY2xpbmljbyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZmVjaGFfYXRlbmNpb24gPj0gPyBBTkQgZXN0YWRvX3JlZ2lzdHJvICE9ICdhbnVsYWRvJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9Bbm9dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBSZWNldGFzIGRlbCBtZXNcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSByZWNldGFzX21lZGljYXMgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2VtaXNpb24gPj0gPyBBTkQgZXN0YWRvICE9ICdhbnVsYWRhJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNdXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyDDk3JkZW5lcyBkZSBleGFtZW4gZGVsIG1lc1xyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIG9yZGVuZXNfZXhhbWVuZXMgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2VtaXNpb25cclxuID49ID8gQU5EIGVzdGFkbyAhPSAnYW51bGFkYSdgLFxyXG4gICAgICAgIFtpZE1lZGljbywgaW5pY2lvTWVzXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gSW50ZXJjb25zdWx0YXMgcGVuZGllbnRlc1xyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIGludGVyY29uc3VsdGFzIFxyXG4gICAgICAgICBXSEVSRSBpZF9tZWRpY29fc29saWNpdGFudGUgPSA/IEFORCBlc3RhZG8gSU4gKCdwZW5kaWVudGUnLCAnZW5fcmV2aXNpb24nKWAsXHJcbiAgICAgICAgW2lkTWVkaWNvXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gTWVuc2FqZXMgc2luIGxlZXJcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBtZW5zYWplc19jaGF0IFxyXG4gICAgICAgICBXSEVSRSBpZF9kZXN0aW5hdGFyaW8gPSAoU0VMRUNUIGlkX3VzdWFyaW8gRlJPTSBtZWRpY29zIFdIRVJFIGlkX21lZGljbyA9ID8pIFxyXG4gICAgICAgICBBTkQgbGVpZG8gPSAwYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBDYWxpZmljYWNpw7NuIHByb21lZGlvXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPQUxFU0NFKEFWRyhjYWxpZmljYWNpb24pLCAwKSBhcyBwcm9tZWRpbywgQ09VTlQoKikgYXMgdG90YWwgXHJcbiAgICAgICAgIEZST00gdmFsb3JhY2lvbmVzX21lZGljYXMgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZXN0YWRvID0gJ3Zpc2libGUnYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBJbmdyZXNvcyBkZWwgbWVzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPQUxFU0NFKFNVTShtb250byksIDApIGFzIHRvdGFsIEZST00gY2l0YXMgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2hvcmFfaW5pY2lvID49ID8gQU5EIHBhZ2FkYSA9IDEgQU5EIGVzdGFkbyA9ICdjb21wbGV0YWRhJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNdXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBUZWxlbWVkaWNpbmEgYWN0aXZhc1xyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIHRlbGVtZWRpY2luYV9zZXNpb25lcyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZXN0YWRvIElOICgnZW5fZXNwZXJhJywgJ2VuX2N1cnNvJylgLFxyXG4gICAgICAgIFtpZE1lZGljb11cclxuICAgICAgKSxcclxuXHJcbiAgICAgIC8vIENlcnRpZmljYWRvcyBlbWl0aWRvcyBkZWwgbWVzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gY2VydGlmaWNhZG9zX21lZGljb3MgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2VtaXNpb24gPj0gPyBBTkQgZXN0YWRvICE9ICdhbnVsYWRvJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNdXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBQcm9jZWRpbWllbnRvcyBkZWwgbWVzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gcHJvY2VkaW1pZW50b3MgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX3Byb2NlZGltaWVudG8gPj0gPyBBTkQgZXN0YWRvICE9ICdjYW5jZWxhZG8nYCxcclxuICAgICAgICBbaWRNZWRpY28sIGluaWNpb01lc11cclxuICAgICAgKSxcclxuICAgIF0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNpdGFzX2hveTogY2l0YXNIb3lbMF1bMF0/LnRvdGFsIHx8IDAsXHJcbiAgICAgIGNpdGFzX3BlbmRpZW50ZXM6IGNpdGFzUGVuZGllbnRlc1swXVswXT8udG90YWwgfHwgMCxcclxuICAgICAgY2l0YXNfY29tcGxldGFkYXNfaG95OiBjaXRhc0NvbXBsZXRhZGFzSG95WzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBjaXRhc19jYW5jZWxhZGFzX2hveTogY2l0YXNDYW5jZWxhZGFzSG95WzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBwYWNpZW50ZXNfbnVldm9zX21lczogcGFjaWVudGVzTnVldm9zTWVzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICB0b3RhbF9wYWNpZW50ZXM6IHRvdGFsUGFjaWVudGVzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBjb25zdWx0YXNfbWVzOiBjb25zdWx0YXNNZXNbMF1bMF0/LnRvdGFsIHx8IDAsXHJcbiAgICAgIGNvbnN1bHRhc19hbm86IGNvbnN1bHRhc0Fub1swXVswXT8udG90YWwgfHwgMCxcclxuICAgICAgcmVjZXRhc19lbWl0aWRhc19tZXM6IHJlY2V0YXNNZXNbMF1bMF0/LnRvdGFsIHx8IDAsXHJcbiAgICAgIG9yZGVuZXNfZXhhbWVuX21lczogb3JkZW5lc01lc1swXVswXT8udG90YWwgfHwgMCxcclxuICAgICAgaW50ZXJjb25zdWx0YXNfcGVuZGllbnRlczogaW50ZXJjb25zdWx0YXNQZW5kaWVudGVzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBtZW5zYWplc19zaW5fbGVlcjogbWVuc2FqZXNTaW5MZWVyWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBjYWxpZmljYWNpb25fcHJvbWVkaW86IHBhcnNlRmxvYXQoY2FsaWZpY2FjaW9uWzBdWzBdPy5wcm9tZWRpbyB8fCBcIjBcIiksXHJcbiAgICAgIHRvdGFsX3Jlc2VuYXM6IGNhbGlmaWNhY2lvblswXVswXT8udG90YWwgfHwgMCxcclxuICAgICAgaW5ncmVzb3NfbWVzOiBwYXJzZUZsb2F0KGluZ3Jlc29zTWVzWzBdWzBdPy50b3RhbCB8fCBcIjBcIiksXHJcbiAgICAgIHRlbGVtZWRpY2luYV9hY3RpdmFzOiB0ZWxlbWVkaWNpbmFbMF1bMF0/LnRvdGFsIHx8IDAsXHJcbiAgICAgIGNlcnRpZmljYWRvc19lbWl0aWRvczogY2VydGlmaWNhZG9zTWVzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBwcm9jZWRpbWllbnRvc19tZXM6IHByb2NlZGltaWVudG9zTWVzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgZXN0YWTDrXN0aWNhczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogT2J0aWVuZSBsYXMgY2l0YXMgcHLDs3hpbWFzIGRlbCBtw6lkaWNvIHBhcmEgaG95XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyQ2l0YXNQcm94aW1hcyhcclxuICBpZE1lZGljbzogbnVtYmVyXHJcbik6IFByb21pc2U8Q2l0YVByb3hpbWFbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBob3kgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xyXG5cclxuICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgYy5pZF9jaXRhLFxyXG4gICAgICAgIGMuZmVjaGFfaG9yYV9pbmljaW8gYXMgZmVjaGFfaG9yYSxcclxuICAgICAgICBjLmR1cmFjaW9uX21pbnV0b3MsXHJcbiAgICAgICAgYy50aXBvX2NpdGEsXHJcbiAgICAgICAgQ0FTRSBcclxuICAgICAgICAgIFdIRU4gYy50aXBvX2NpdGEgPSAndGVsZW1lZGljaW5hJyBUSEVOICd0ZWxlbWVkaWNpbmEnXHJcbiAgICAgICAgICBFTFNFICdwcmVzZW5jaWFsJ1xyXG4gICAgICAgIEVORCBhcyBtb2RhbGlkYWQsXHJcbiAgICAgICAgYy5lc3RhZG8sXHJcbiAgICAgICAgYy5tb3Rpdm8sXHJcbiAgICAgICAgYy5ub3RhcyxcclxuICAgICAgICBwLmlkX3BhY2llbnRlLFxyXG4gICAgICAgIENPTkNBVChwLm5vbWJyZSwgJyAnLCBwLmFwZWxsaWRvX3BhdGVybm8sICcgJywgQ09BTEVTQ0UocC5hcGVsbGlkb19tYXRlcm5vLCAnJykpIGFzIG5vbWJyZV9jb21wbGV0byxcclxuICAgICAgICBUSU1FU1RBTVBESUZGKFlFQVIsIHAuZmVjaGFfbmFjaW1pZW50bywgQ1VSREFURSgpKSBhcyBlZGFkLFxyXG4gICAgICAgIHAuZm90b191cmwsXHJcbiAgICAgICAgcC50ZWxlZm9ubyxcclxuICAgICAgICBwLmdydXBvX3Nhbmd1aW5lbyxcclxuICAgICAgICBDT0FMRVNDRShzLm5vbWJyZSwgJ0NvbnN1bHRvcmlvIFByaW5jaXBhbCcpIGFzIHNhbGFcclxuICAgICAgRlJPTSBjaXRhcyBjXHJcbiAgICAgIElOTkVSIEpPSU4gcGFjaWVudGVzIHAgT04gYy5pZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGVcclxuICAgICAgTEVGVCBKT0lOIHNhbGFzIHMgT04gYy5pZF9zYWxhID0gcy5pZF9zYWxhXHJcbiAgICAgIFdIRVJFIGMuaWRfbWVkaWNvID0gP1xyXG4gICAgICAgIEFORCBEQVRFKGMuZmVjaGFfaG9yYV9pbmljaW8pID0gP1xyXG4gICAgICAgIEFORCBjLmVzdGFkbyBOT1QgSU4gKCdjYW5jZWxhZGEnLCAnbm9fYXNpc3RpbycpXHJcbiAgICAgIE9SREVSIEJZIGMuZmVjaGFfaG9yYV9pbmljaW8gQVNDXHJcbiAgICAgIExJTUlUIDIwXHJcbiAgICAgIGAsXHJcbiAgICAgIFtpZE1lZGljbywgaG95XVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcm93cy5tYXAoKHJvdykgPT4gKHtcclxuICAgICAgaWRfY2l0YTogcm93LmlkX2NpdGEsXHJcbiAgICAgIGZlY2hhX2hvcmE6IHJvdy5mZWNoYV9ob3JhLFxyXG4gICAgICBkdXJhY2lvbl9taW51dG9zOiByb3cuZHVyYWNpb25fbWludXRvcyxcclxuICAgICAgdGlwb19jaXRhOiByb3cudGlwb19jaXRhLFxyXG4gICAgICBtb2RhbGlkYWQ6IHJvdy5tb2RhbGlkYWQsXHJcbiAgICAgIGVzdGFkbzogcm93LmVzdGFkbyxcclxuICAgICAgcGFjaWVudGU6IHtcclxuICAgICAgICBpZF9wYWNpZW50ZTogcm93LmlkX3BhY2llbnRlLFxyXG4gICAgICAgIG5vbWJyZV9jb21wbGV0bzogcm93Lm5vbWJyZV9jb21wbGV0byxcclxuICAgICAgICBlZGFkOiByb3cuZWRhZCxcclxuICAgICAgICBmb3RvX3VybDogcm93LmZvdG9fdXJsLFxyXG4gICAgICAgIHRlbGVmb25vOiByb3cudGVsZWZvbm8sXHJcbiAgICAgICAgZ3J1cG9fc2FuZ3VpbmVvOiByb3cuZ3J1cG9fc2FuZ3VpbmVvIHx8IFwiTi9BXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIG1vdGl2bzogcm93Lm1vdGl2byxcclxuICAgICAgbm90YXM6IHJvdy5ub3RhcyxcclxuICAgICAgc2FsYTogcm93LnNhbGEsXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIGNpdGFzIHByw7N4aW1hczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhIGFsZXJ0YXMgdXJnZW50ZXMgYmFzYWRhcyBlbiBtw7psdGlwbGVzIGNyaXRlcmlvc1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gb2J0ZW5lckFsZXJ0YXNVcmdlbnRlcyhcclxuICBpZE1lZGljbzogbnVtYmVyXHJcbik6IFByb21pc2U8QWxlcnRhVXJnZW50ZVtdPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGFsZXJ0YXM6IEFsZXJ0YVVyZ2VudGVbXSA9IFtdO1xyXG4gICAgbGV0IGlkQWxlcnRhID0gMTtcclxuXHJcbiAgICAvLyAxLiBQYWNpZW50ZXMgY29uIHNpZ25vcyB2aXRhbGVzIGNyw610aWNvcyAow7psdGltYXMgMjQgaG9yYXMpXHJcbiAgICBjb25zdCBbc2lnbm9zVml0YWxlc0NyaXRpY29zXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgRElTVElOQ1RcclxuICAgICAgICBzdi5pZF9wYWNpZW50ZSxcclxuICAgICAgICBDT05DQVQocC5ub21icmUsICcgJywgcC5hcGVsbGlkb19wYXRlcm5vKSBhcyBub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgc3YucHJlc2lvbl9zaXN0b2xpY2EsXHJcbiAgICAgICAgc3YucHJlc2lvbl9kaWFzdG9saWNhLFxyXG4gICAgICAgIHN2LnB1bHNvIGFzIGZyZWN1ZW5jaWFfY2FyZGlhY2EsXHJcbiAgICAgICAgc3YudGVtcGVyYXR1cmEsXHJcbiAgICAgICAgc3Yuc2F0dXJhY2lvbl9veGlnZW5vLFxyXG4gICAgICAgIHN2LmZlY2hhX2NyZWFjaW9uIGFzIGZlY2hhX2hvcmFfcmVnaXN0cm9cclxuICAgICAgRlJPTSBzaWdub3Nfdml0YWxlcyBzdlxyXG4gICAgICBJTk5FUiBKT0lOIHBhY2llbnRlcyBwIE9OIHN2LmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICBJTk5FUiBKT0lOIHBhY2llbnRlc19tZWRpY28gcG0gT04gcC5pZF9wYWNpZW50ZSA9IHBtLmlkX3BhY2llbnRlXHJcbiAgICAgIFdIRVJFIHBtLmlkX21lZGljbyA9ID9cclxuICAgICAgICBBTkQgcG0uYWN0aXZvID0gMVxyXG4gICAgICAgIEFORCBzdi5mZWNoYV9jcmVhY2lvbiA+PSBEQVRFX1NVQihOT1coKSwgSU5URVJWQUwgMjQgSE9VUilcclxuICAgICAgICBBTkQgKFxyXG4gICAgICAgICAgc3YucHJlc2lvbl9zaXN0b2xpY2EgPiAxODAgT1Igc3YucHJlc2lvbl9zaXN0b2xpY2EgPCA5MFxyXG4gICAgICAgICAgT1Igc3YucHJlc2lvbl9kaWFzdG9saWNhID4gMTIwIE9SIHN2LnByZXNpb25fZGlhc3RvbGljYSA8IDYwXHJcbiAgICAgICAgICBPUiBzdi5wdWxzbyA+IDEyMCBPUiBzdi5wdWxzbyA8IDUwXHJcbiAgICAgICAgICBPUiBzdi50ZW1wZXJhdHVyYSA+IDM5IE9SIHN2LnRlbXBlcmF0dXJhIDwgMzVcclxuICAgICAgICAgIE9SIHN2LnNhdHVyYWNpb25fb3hpZ2VubyA8IDkwXHJcbiAgICAgICAgKVxyXG4gICAgICBPUkRFUiBCWSBzdi5mZWNoYV9jcmVhY2lvbiBERVNDXHJcbiAgICAgIExJTUlUIDVcclxuICAgICAgYCxcclxuICAgICAgW2lkTWVkaWNvXVxyXG4gICAgKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IHNpZ25vIG9mIHNpZ25vc1ZpdGFsZXNDcml0aWNvcykge1xyXG4gICAgICBjb25zdCBwcm9ibGVtYXMgPSBbXTtcclxuICAgICAgaWYgKHNpZ25vLnByZXNpb25fc2lzdG9saWNhID4gMTgwIHx8IHNpZ25vLnByZXNpb25fc2lzdG9saWNhIDwgOTApXHJcbiAgICAgICAgcHJvYmxlbWFzLnB1c2goYFByZXNpw7NuIHNpc3TDs2xpY2E6ICR7c2lnbm8ucHJlc2lvbl9zaXN0b2xpY2F9IG1tSGdgKTtcclxuICAgICAgaWYgKHNpZ25vLnByZXNpb25fZGlhc3RvbGljYSA+IDEyMCB8fCBzaWduby5wcmVzaW9uX2RpYXN0b2xpY2EgPCA2MClcclxuICAgICAgICBwcm9ibGVtYXMucHVzaChcclxuICAgICAgICAgIGBQcmVzacOzbiBkaWFzdMOzbGljYTogJHtzaWduby5wcmVzaW9uX2RpYXN0b2xpY2F9IG1tSGdgXHJcbiAgICAgICAgKTtcclxuICAgICAgaWYgKHNpZ25vLmZyZWN1ZW5jaWFfY2FyZGlhY2EgPiAxMjAgfHwgc2lnbm8uZnJlY3VlbmNpYV9jYXJkaWFjYSA8IDUwKVxyXG4gICAgICAgIHByb2JsZW1hcy5wdXNoKFxyXG4gICAgICAgICAgYEZyZWN1ZW5jaWEgY2FyZMOtYWNhOiAke3NpZ25vLmZyZWN1ZW5jaWFfY2FyZGlhY2F9IGxwbWBcclxuICAgICAgICApO1xyXG4gICAgICBpZiAoc2lnbm8udGVtcGVyYXR1cmEgPiAzOSB8fCBzaWduby50ZW1wZXJhdHVyYSA8IDM1KVxyXG4gICAgICAgIHByb2JsZW1hcy5wdXNoKGBUZW1wZXJhdHVyYTogJHtzaWduby50ZW1wZXJhdHVyYX3CsENgKTtcclxuICAgICAgaWYgKHNpZ25vLnNhdHVyYWNpb25fb3hpZ2VubyA8IDkwKVxyXG4gICAgICAgIHByb2JsZW1hcy5wdXNoKGBTcE8yOiAke3NpZ25vLnNhdHVyYWNpb25fb3hpZ2Vub30lYCk7XHJcblxyXG4gICAgICBhbGVydGFzLnB1c2goe1xyXG4gICAgICAgIGlkX2FsZXJ0YTogaWRBbGVydGErKyxcclxuICAgICAgICB0aXBvOiBcImNyaXRpY2FcIixcclxuICAgICAgICB0aXR1bG86IFwi8J+aqCBTaWdub3MgVml0YWxlcyBDcsOtdGljb3NcIixcclxuICAgICAgICBkZXNjcmlwY2lvbjogYCR7c2lnbm8ubm9tYnJlX2NvbXBsZXRvfTogJHtwcm9ibGVtYXMuam9pbihcIiwgXCIpfWAsXHJcbiAgICAgICAgZmVjaGFfaG9yYTogc2lnbm8uZmVjaGFfaG9yYV9yZWdpc3RybyxcclxuICAgICAgICBsZWlkYTogZmFsc2UsXHJcbiAgICAgICAgcGFjaWVudGU6IHtcclxuICAgICAgICAgIGlkX3BhY2llbnRlOiBzaWduby5pZF9wYWNpZW50ZSxcclxuICAgICAgICAgIG5vbWJyZV9jb21wbGV0bzogc2lnbm8ubm9tYnJlX2NvbXBsZXRvLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWNjaW9uX3JlcXVlcmlkYTogXCJFdmFsdWFyIGlubWVkaWF0YW1lbnRlIGFsIHBhY2llbnRlXCIsXHJcbiAgICAgICAgdXJsX2FjY2lvbjogYC9tZWRpY28vcGFjaWVudGVzLyR7c2lnbm8uaWRfcGFjaWVudGV9YCxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMi4gUmVzdWx0YWRvcyBkZSBleMOhbWVuZXMgY3LDrXRpY29zIHBlbmRpZW50ZXNcclxuICAgIGNvbnN0IFtleGFtZW5lc0NyaXRpY29zXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgcmUuaWRfcmVzdWx0YWRvLFxyXG4gICAgICAgIHJlLmlkX3BhY2llbnRlLFxyXG4gICAgICAgIENPTkNBVChwLm5vbWJyZSwgJyAnLCBwLmFwZWxsaWRvX3BhdGVybm8pIGFzIG5vbWJyZV9jb21wbGV0byxcclxuICAgICAgICBvZS50aXBvX2V4YW1lbixcclxuICAgICAgICByZS5mZWNoYV9yZXN1bHRhZG8sXHJcbiAgICAgICAgcmUucmVzdWx0YWRvX3ByZWxpbWluYXJcclxuICAgICAgRlJPTSByZXN1bHRhZG9zX2V4YW1lbmVzIHJlXHJcbiAgICAgIElOTkVSIEpPSU4gb3JkZW5lc19leGFtZW5lcyBvZSBPTiByZS5pZF9vcmRlbiA9IG9lLmlkX29yZGVuXHJcbiAgICAgIElOTkVSIEpPSU4gcGFjaWVudGVzIHAgT04gcmUuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgIElOTkVSIEpPSU4gcGFjaWVudGVzX21lZGljbyBwbSBPTiBwLmlkX3BhY2llbnRlID0gcG0uaWRfcGFjaWVudGVcclxuICAgICAgV0hFUkUgb2UuaWRfbWVkaWNvID0gP1xyXG4gICAgICAgIEFORCBwbS5hY3Rpdm8gPSAxXHJcbiAgICAgICAgQU5EIHJlLmVzdGFkbyA9ICdkaXNwb25pYmxlJ1xyXG4gICAgICAgIEFORCByZS5yZXZpc2Fkb19wb3JfbWVkaWNvID0gMFxyXG4gICAgICAgIEFORCAoXHJcbiAgICAgICAgICByZS5yZXN1bHRhZG9fcHJlbGltaW5hciBMSUtFICclYW5vcm1hbCUnXHJcbiAgICAgICAgICBPUiByZS5yZXN1bHRhZG9fcHJlbGltaW5hciBMSUtFICclY3LDrXRpY28lJ1xyXG4gICAgICAgICAgT1IgcmUucmVzdWx0YWRvX3ByZWxpbWluYXIgTElLRSAnJXVyZ2VudGUlJ1xyXG4gICAgICAgICAgT1IgcmUuYWxlcnRhX3ZhbG9yX2NyaXRpY28gPSAxXHJcbiAgICAgICAgKVxyXG4gICAgICBPUkRFUiBCWSByZS5mZWNoYV9yZXN1bHRhZG8gREVTQ1xyXG4gICAgICBMSU1JVCA1XHJcbiAgICAgIGAsXHJcbiAgICAgIFtpZE1lZGljb11cclxuICAgICk7XHJcblxyXG4gICAgZm9yIChjb25zdCBleGFtZW4gb2YgZXhhbWVuZXNDcml0aWNvcykge1xyXG4gICAgICBhbGVydGFzLnB1c2goe1xyXG4gICAgICAgIGlkX2FsZXJ0YTogaWRBbGVydGErKyxcclxuICAgICAgICB0aXBvOiBcImFsdGFcIixcclxuICAgICAgICB0aXR1bG86IFwi4pqg77iPIEV4YW1lbiBjb24gVmFsb3JlcyBDcsOtdGljb3NcIixcclxuICAgICAgICBkZXNjcmlwY2lvbjogYCR7ZXhhbWVuLm5vbWJyZV9jb21wbGV0b306ICR7ZXhhbWVuLnRpcG9fZXhhbWVufSByZXF1aWVyZSByZXZpc2nDs24gdXJnZW50ZWAsXHJcbiAgICAgICAgZmVjaGFfaG9yYTogZXhhbWVuLmZlY2hhX3Jlc3VsdGFkbyxcclxuICAgICAgICBsZWlkYTogZmFsc2UsXHJcbiAgICAgICAgcGFjaWVudGU6IHtcclxuICAgICAgICAgIGlkX3BhY2llbnRlOiBleGFtZW4uaWRfcGFjaWVudGUsXHJcbiAgICAgICAgICBub21icmVfY29tcGxldG86IGV4YW1lbi5ub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY2Npb25fcmVxdWVyaWRhOiBcIlJldmlzYXIgcmVzdWx0YWRvcyB5IGNvbnRhY3RhciBhbCBwYWNpZW50ZVwiLFxyXG4gICAgICAgIHVybF9hY2Npb246IGAvbWVkaWNvL2V4YW1lbmVzLyR7ZXhhbWVuLmlkX3Jlc3VsdGFkb31gLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAzLiBDaXRhcyBzaW4gY29uZmlybWFyIChwcsOzeGltYXMgMjQgaG9yYXMpXHJcbiAgICBjb25zdCBbY2l0YXNTaW5Db25maXJtYXJdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVCBcclxuICAgICAgICBjLmlkX2NpdGEsXHJcbiAgICAgICAgYy5pZF9wYWNpZW50ZSxcclxuICAgICAgICBDT05DQVQocC5ub21icmUsICcgJywgcC5hcGVsbGlkb19wYXRlcm5vKSBhcyBub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgYy5mZWNoYV9ob3JhX2luaWNpbyxcclxuICAgICAgICBjLnRpcG9fY2l0YVxyXG4gICAgICBGUk9NIGNpdGFzIGNcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXMgcCBPTiBjLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICBXSEVSRSBjLmlkX21lZGljbyA9ID9cclxuICAgICAgICBBTkQgYy5lc3RhZG8gPSAncHJvZ3JhbWFkYSdcclxuICAgICAgICBBTkQgYy5jb25maXJtYWRvX3Bvcl9wYWNpZW50ZSA9IDBcclxuICAgICAgICBBTkQgYy5mZWNoYV9ob3JhX2luaWNpbyBCRVRXRUVOIE5PVygpIEFORCBEQVRFX0FERChOT1coKSwgSU5URVJWQUwgMjQgSE9VUilcclxuICAgICAgT1JERVIgQlkgYy5mZWNoYV9ob3JhX2luaWNpbyBBU0NcclxuICAgICAgTElNSVQgNVxyXG4gICAgICBgLFxyXG4gICAgICBbaWRNZWRpY29dXHJcbiAgICApO1xyXG5cclxuICAgIGZvciAoY29uc3QgY2l0YSBvZiBjaXRhc1NpbkNvbmZpcm1hcikge1xyXG4gICAgICBhbGVydGFzLnB1c2goe1xyXG4gICAgICAgIGlkX2FsZXJ0YTogaWRBbGVydGErKyxcclxuICAgICAgICB0aXBvOiBcIm1lZGlhXCIsXHJcbiAgICAgICAgdGl0dWxvOiBcIvCfk4UgQ2l0YSBTaW4gQ29uZmlybWFyXCIsXHJcbiAgICAgICAgZGVzY3JpcGNpb246IGAke2NpdGEubm9tYnJlX2NvbXBsZXRvfSAtIENpdGEgcGVuZGllbnRlIGRlIGNvbmZpcm1hY2nDs25gLFxyXG4gICAgICAgIGZlY2hhX2hvcmE6IGNpdGEuZmVjaGFfaG9yYV9pbmljaW8sXHJcbiAgICAgICAgbGVpZGE6IGZhbHNlLFxyXG4gICAgICAgIHBhY2llbnRlOiB7XHJcbiAgICAgICAgICBpZF9wYWNpZW50ZTogY2l0YS5pZF9wYWNpZW50ZSxcclxuICAgICAgICAgIG5vbWJyZV9jb21wbGV0bzogY2l0YS5ub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY2Npb25fcmVxdWVyaWRhOiBcIkNvbnRhY3RhciBhbCBwYWNpZW50ZVwiLFxyXG4gICAgICAgIHVybF9hY2Npb246IGAvbWVkaWNvL2FnZW5kYS8ke2NpdGEuaWRfY2l0YX1gLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA0LiBUcmF0YW1pZW50b3MgdmVuY2lkb3NcclxuICAgIGNvbnN0IFt0cmF0YW1pZW50b3NWZW5jaWRvc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIHJtLmlkX3JlY2V0YSxcclxuICAgICAgICBybS5pZF9wYWNpZW50ZSxcclxuICAgICAgICBDT05DQVQocC5ub21icmUsICcgJywgcC5hcGVsbGlkb19wYXRlcm5vKSBhcyBub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgcm0uZmVjaGFfZmluX3RyYXRhbWllbnRvLFxyXG4gICAgICAgIENPVU5UKERJU1RJTkNUIHJtZWQuaWRfbWVkaWNhbWVudG8pIGFzIG51bV9tZWRpY2FtZW50b3NcclxuICAgICAgRlJPTSByZWNldGFzX21lZGljYXMgcm1cclxuICAgICAgSU5ORVIgSk9JTiByZWNldGFfbWVkaWNhbWVudG9zIHJtZWQgT04gcm0uaWRfcmVjZXRhID0gcm1lZC5pZF9yZWNldGFcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXMgcCBPTiBybS5pZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGVcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIHAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICBXSEVSRSBybS5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgQU5EIHBtLmFjdGl2byA9IDFcclxuICAgICAgICBBTkQgcm0uZXN0YWRvID0gJ2FjdGl2YSdcclxuICAgICAgICBBTkQgcm0uZmVjaGFfZmluX3RyYXRhbWllbnRvIDwgQ1VSREFURSgpXHJcbiAgICAgICAgQU5EIHJtLnJlcXVpZXJlX3NlZ3VpbWllbnRvID0gMVxyXG4gICAgICBHUk9VUCBCWSBybS5pZF9yZWNldGFcclxuICAgICAgT1JERVIgQlkgcm0uZmVjaGFfZmluX3RyYXRhbWllbnRvIERFU0NcclxuICAgICAgTElNSVQgNVxyXG4gICAgICBgLFxyXG4gICAgICBbaWRNZWRpY29dXHJcbiAgICApO1xyXG5cclxuICAgIGZvciAoY29uc3QgdHJhdGFtaWVudG8gb2YgdHJhdGFtaWVudG9zVmVuY2lkb3MpIHtcclxuICAgICAgYWxlcnRhcy5wdXNoKHtcclxuICAgICAgICBpZF9hbGVydGE6IGlkQWxlcnRhKyssXHJcbiAgICAgICAgdGlwbzogXCJtZWRpYVwiLFxyXG4gICAgICAgIHRpdHVsbzogXCLwn5KKIFRyYXRhbWllbnRvIFZlbmNpZG9cIixcclxuICAgICAgICBkZXNjcmlwY2lvbjogYCR7dHJhdGFtaWVudG8ubm9tYnJlX2NvbXBsZXRvfTogJHt0cmF0YW1pZW50by5udW1fbWVkaWNhbWVudG9zfSBtZWRpY2FtZW50byhzKSByZXF1aWVyZW4gc2VndWltaWVudG9gLFxyXG4gICAgICAgIGZlY2hhX2hvcmE6IHRyYXRhbWllbnRvLmZlY2hhX2Zpbl90cmF0YW1pZW50byxcclxuICAgICAgICBsZWlkYTogZmFsc2UsXHJcbiAgICAgICAgcGFjaWVudGU6IHtcclxuICAgICAgICAgIGlkX3BhY2llbnRlOiB0cmF0YW1pZW50by5pZF9wYWNpZW50ZSxcclxuICAgICAgICAgIG5vbWJyZV9jb21wbGV0bzogdHJhdGFtaWVudG8ubm9tYnJlX2NvbXBsZXRvLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWNjaW9uX3JlcXVlcmlkYTogXCJFdmFsdWFyIHJlbm92YWNpw7NuIGRlIHRyYXRhbWllbnRvXCIsXHJcbiAgICAgICAgdXJsX2FjY2lvbjogYC9tZWRpY28vcmVjZXRhcy8ke3RyYXRhbWllbnRvLmlkX3JlY2V0YX1gLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA1LiBJbnRlcmNvbnN1bHRhcyB1cmdlbnRlcyBzaW4gcmVzcHVlc3RhXHJcbiAgICBjb25zdCBbaW50ZXJjb25zdWx0YXNVcmdlbnRlc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGkuaWRfaW50ZXJjb25zdWx0YSxcclxuICAgICAgICBpLmlkX3BhY2llbnRlLFxyXG4gICAgICAgIENPTkNBVChwLm5vbWJyZSwgJyAnLCBwLmFwZWxsaWRvX3BhdGVybm8pIGFzIG5vbWJyZV9jb21wbGV0byxcclxuICAgICAgICBpLmZlY2hhX3NvbGljaXR1ZCxcclxuICAgICAgICBlLm5vbWJyZSBhcyBlc3BlY2lhbGlkYWRfc29saWNpdGFkYVxyXG4gICAgICBGUk9NIGludGVyY29uc3VsdGFzIGlcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXMgcCBPTiBpLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICBJTk5FUiBKT0lOIGVzcGVjaWFsaWRhZGVzIGUgT04gaS5pZF9lc3BlY2lhbGlkYWRfZGVzdGlubyA9IGUuaWRfZXNwZWNpYWxpZGFkXHJcbiAgICAgIFdIRVJFIGkuaWRfbWVkaWNvX3NvbGljaXRhbnRlID0gP1xyXG4gICAgICAgIEFORCBpLnByaW9yaWRhZCA9ICd1cmdlbnRlJ1xyXG4gICAgICAgIEFORCBpLmVzdGFkbyA9ICdwZW5kaWVudGUnXHJcbiAgICAgICAgQU5EIGkuZmVjaGFfc29saWNpdHVkIDwgREFURV9TVUIoTk9XKCksIElOVEVSVkFMIDI0IEhPVVIpXHJcbiAgICAgIE9SREVSIEJZIGkuZmVjaGFfc29saWNpdHVkIEFTQ1xyXG4gICAgICBMSU1JVCA1XHJcbiAgICAgIGAsXHJcbiAgICAgIFtpZE1lZGljb11cclxuICAgICk7XHJcblxyXG4gICAgZm9yIChjb25zdCBpbnRlcmNvbnN1bHRhIG9mIGludGVyY29uc3VsdGFzVXJnZW50ZXMpIHtcclxuICAgICAgYWxlcnRhcy5wdXNoKHtcclxuICAgICAgICBpZF9hbGVydGE6IGlkQWxlcnRhKyssXHJcbiAgICAgICAgdGlwbzogXCJhbHRhXCIsXHJcbiAgICAgICAgdGl0dWxvOiBcIvCflIQgSW50ZXJjb25zdWx0YSBTaW4gUmVzcHVlc3RhXCIsXHJcbiAgICAgICAgZGVzY3JpcGNpb246IGAke2ludGVyY29uc3VsdGEubm9tYnJlX2NvbXBsZXRvfTogJHtpbnRlcmNvbnN1bHRhLmVzcGVjaWFsaWRhZF9zb2xpY2l0YWRhfSBwZW5kaWVudGUgKzI0aGAsXHJcbiAgICAgICAgZmVjaGFfaG9yYTogaW50ZXJjb25zdWx0YS5mZWNoYV9zb2xpY2l0dWQsXHJcbiAgICAgICAgbGVpZGE6IGZhbHNlLFxyXG4gICAgICAgIHBhY2llbnRlOiB7XHJcbiAgICAgICAgICBpZF9wYWNpZW50ZTogaW50ZXJjb25zdWx0YS5pZF9wYWNpZW50ZSxcclxuICAgICAgICAgIG5vbWJyZV9jb21wbGV0bzogaW50ZXJjb25zdWx0YS5ub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhY2Npb25fcmVxdWVyaWRhOiBcIlNlZ3VpbWllbnRvIGNvbiBlc3BlY2lhbGlzdGFcIixcclxuICAgICAgICB1cmxfYWNjaW9uOiBgL21lZGljby9pbnRlcmNvbnN1bHRhcy8ke2ludGVyY29uc3VsdGEuaWRfaW50ZXJjb25zdWx0YX1gLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPcmRlbmFyIHBvciBwcmlvcmlkYWQgeSBmZWNoYVxyXG4gICAgY29uc3Qgb3JkZW5UaXBvID0geyBjcml0aWNhOiAxLCBhbHRhOiAyLCBtZWRpYTogMywgYmFqYTogNCB9O1xyXG4gICAgYWxlcnRhcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgIGlmIChvcmRlblRpcG9bYS50aXBvXSAhPT0gb3JkZW5UaXBvW2IudGlwb10pIHtcclxuICAgICAgICByZXR1cm4gb3JkZW5UaXBvW2EudGlwb10gLSBvcmRlblRpcG9bYi50aXBvXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIG5ldyBEYXRlKGIuZmVjaGFfaG9yYSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS5mZWNoYV9ob3JhKS5nZXRUaW1lKClcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBhbGVydGFzO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgb2J0ZW5lciBhbGVydGFzIHVyZ2VudGVzOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGxvcyBwYWNpZW50ZXMgcmVjaWVudGVzIGRlbCBtw6lkaWNvXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyUGFjaWVudGVzUmVjaWVudGVzKFxyXG4gIGlkTWVkaWNvOiBudW1iZXJcclxuKTogUHJvbWlzZTxQYWNpZW50ZVJlY2llbnRlW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVCBESVNUSU5DVFxyXG4gICAgICAgIHAuaWRfcGFjaWVudGUsXHJcbiAgICAgICAgQ09OQ0FUKHAubm9tYnJlLCAnICcsIHAuYXBlbGxpZG9fcGF0ZXJubywgJyAnLCBDT0FMRVNDRShwLmFwZWxsaWRvX21hdGVybm8sICcnKSkgYXMgbm9tYnJlX2NvbXBsZXRvLFxyXG4gICAgICAgIFRJTUVTVEFNUERJRkYoWUVBUiwgcC5mZWNoYV9uYWNpbWllbnRvLCBDVVJEQVRFKCkpIGFzIGVkYWQsXHJcbiAgICAgICAgcC5nZW5lcm8sXHJcbiAgICAgICAgcC5mb3RvX3VybCxcclxuICAgICAgICBwLmdydXBvX3Nhbmd1aW5lbyxcclxuICAgICAgICBoYy5mZWNoYV9hdGVuY2lvbiBhcyB1bHRpbWFfY29uc3VsdGEsXHJcbiAgICAgICAgZC5kaWFnbm9zdGljbyBhcyBkaWFnbm9zdGljb19wcmluY2lwYWwsXHJcbiAgICAgICAgQ0FTRSBcclxuICAgICAgICAgIFdIRU4gRVhJU1RTIChcclxuICAgICAgICAgICAgU0VMRUNUIDEgRlJPTSBzaWdub3Nfdml0YWxlcyBzdiBcclxuICAgICAgICAgICAgV0hFUkUgc3YuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlIFxyXG4gICAgICAgICAgICBBTkQgc3YuZmVjaGFfY3JlYWNpb24gPj0gREFURV9TVUIoTk9XKCksIElOVEVSVkFMIDcgREFZKVxyXG4gICAgICAgICAgICBBTkQgKHN2LnByZXNpb25fc2lzdG9saWNhID4gMTgwIE9SIHN2LnByZXNpb25fZGlhc3RvbGljYSA+IDEyMCBcclxuICAgICAgICAgICAgICAgICBPUiBzdi5wdWxzbyA+IDEyMCBPUiBzdi5wdWxzbyA8IDUwXHJcbiAgICAgICAgICAgICAgICAgT1Igc3YudGVtcGVyYXR1cmEgPiAzOSBPUiBzdi5zYXR1cmFjaW9uX294aWdlbm8gPCA5MClcclxuICAgICAgICAgICkgVEhFTiAnY3JpdGljbydcclxuICAgICAgICAgIFdIRU4gRVhJU1RTIChcclxuICAgICAgICAgICAgU0VMRUNUIDEgRlJPTSBzaWdub3Nfdml0YWxlcyBzdiBcclxuICAgICAgICAgICAgV0hFUkUgc3YuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlIFxyXG4gICAgICAgICAgICBBTkQgc3YuZmVjaGFfY3JlYWNpb24gPj0gREFURV9TVUIoTk9XKCksIElOVEVSVkFMIDcgREFZKVxyXG4gICAgICAgICAgICBBTkQgKHN2LnByZXNpb25fc2lzdG9saWNhID4gMTYwIE9SIHN2LnByZXNpb25fZGlhc3RvbGljYSA+IDEwMCBcclxuICAgICAgICAgICAgICAgICBPUiBzdi5wdWxzbyA+IDEwMCBPUiBzdi50ZW1wZXJhdHVyYSA+IDM4KVxyXG4gICAgICAgICAgKSBUSEVOICdhdGVuY2lvbidcclxuICAgICAgICAgIEVMU0UgJ2VzdGFibGUnXHJcbiAgICAgICAgRU5EIGFzIGVzdGFkb19zYWx1ZCxcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgTUlOKGZlY2hhX2hvcmFfaW5pY2lvKVxyXG4gICAgICAgICAgRlJPTSBjaXRhc1xyXG4gICAgICAgICAgV0hFUkUgaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCBpZF9tZWRpY28gPSA/XHJcbiAgICAgICAgICAgIEFORCBmZWNoYV9ob3JhX2luaWNpbyA+IE5PVygpXHJcbiAgICAgICAgICAgIEFORCBlc3RhZG8gTk9UIElOICgnY2FuY2VsYWRhJywgJ25vX2FzaXN0aW8nKVxyXG4gICAgICAgICkgYXMgcHJveGltYV9jaXRhLFxyXG4gICAgICAgIChcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKVxyXG4gICAgICAgICAgRlJPTSBhbGVyZ2lhc1xyXG4gICAgICAgICAgV0hFUkUgaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCBlc3RhZG8gPSAnYWN0aXZhJ1xyXG4gICAgICAgICAgICBBTkQgc2V2ZXJpZGFkIElOICgnc2V2ZXJhJywgJ2ZhdGFsJylcclxuICAgICAgICApIGFzIGFsZXJnaWFzX2NyaXRpY2FzLFxyXG4gICAgICAgIChcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKVxyXG4gICAgICAgICAgRlJPTSBhbnRlY2VkZW50ZXNcclxuICAgICAgICAgIFdIRVJFIGlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICAgICAgICBBTkQgZXN0YWRvID0gJ2FjdGl2bydcclxuICAgICAgICAgICAgQU5EIHRpcG8gPSAncGF0b2xvZ2ljbydcclxuICAgICAgICApIGFzIGNvbmRpY2lvbmVzX2Nyb25pY2FzXHJcbiAgICAgIEZST00gcGFjaWVudGVzIHBcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIHAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICBMRUZUIEpPSU4gaGlzdG9yaWFsX2NsaW5pY28gaGMgT04gcC5pZF9wYWNpZW50ZSA9IGhjLmlkX3BhY2llbnRlXHJcbiAgICAgICAgQU5EIGhjLmlkX21lZGljbyA9ID9cclxuICAgICAgICBBTkQgaGMuaWRfaGlzdG9yaWFsID0gKFxyXG4gICAgICAgICAgU0VMRUNUIE1BWChpZF9oaXN0b3JpYWwpXHJcbiAgICAgICAgICBGUk9NIGhpc3RvcmlhbF9jbGluaWNvXHJcbiAgICAgICAgICBXSEVSRSBpZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGUgQU5EIGlkX21lZGljbyA9ID9cclxuICAgICAgICApXHJcbiAgICAgIExFRlQgSk9JTiBkaWFnbm9zdGljb3MgZCBPTiBwLmlkX3BhY2llbnRlID0gZC5pZF9wYWNpZW50ZVxyXG4gICAgICAgIEFORCBkLnRpcG8gPSAncHJpbmNpcGFsJyBBTkQgZC5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICAgIEFORCBkLmlkX2RpYWdub3N0aWNvID0gKFxyXG4gICAgICAgICAgU0VMRUNUIE1BWChpZF9kaWFnbm9zdGljbylcclxuICAgICAgICAgIEZST00gZGlhZ25vc3RpY29zXHJcbiAgICAgICAgICBXSEVSRSBpZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGUgXHJcbiAgICAgICAgICAgIEFORCB0aXBvID0gJ3ByaW5jaXBhbCcgQU5EIGVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgICAgKVxyXG4gICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgQU5EIHBtLmFjdGl2byA9IDFcclxuICAgICAgICBBTkQgaGMuZmVjaGFfYXRlbmNpb24gPj0gREFURV9TVUIoTk9XKCksIElOVEVSVkFMIDMwIERBWSlcclxuICAgICAgT1JERVIgQlkgaGMuZmVjaGFfYXRlbmNpb24gREVTQ1xyXG4gICAgICBMSU1JVCAxMFxyXG4gICAgICBgLFxyXG4gICAgICBbaWRNZWRpY28sIGlkTWVkaWNvLCBpZE1lZGljbywgaWRNZWRpY29dXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiByb3dzLm1hcCgocm93KSA9PiAoe1xyXG4gICAgICBpZF9wYWNpZW50ZTogcm93LmlkX3BhY2llbnRlLFxyXG4gICAgICBub21icmVfY29tcGxldG86IHJvdy5ub21icmVfY29tcGxldG8sXHJcbiAgICAgIGVkYWQ6IHJvdy5lZGFkLFxyXG4gICAgICBnZW5lcm86IHJvdy5nZW5lcm8sXHJcbiAgICAgIGZvdG9fdXJsOiByb3cuZm90b191cmwsXHJcbiAgICAgIHVsdGltYV9jb25zdWx0YTogcm93LnVsdGltYV9jb25zdWx0YSxcclxuICAgICAgZGlhZ25vc3RpY29fcHJpbmNpcGFsOiByb3cuZGlhZ25vc3RpY29fcHJpbmNpcGFsLFxyXG4gICAgICBlc3RhZG9fc2FsdWQ6IHJvdy5lc3RhZG9fc2FsdWQsXHJcbiAgICAgIHByb3hpbWFfY2l0YTogcm93LnByb3hpbWFfY2l0YSxcclxuICAgICAgYWxlcmdpYXNfY3JpdGljYXM6IHJvdy5hbGVyZ2lhc19jcml0aWNhcyxcclxuICAgICAgY29uZGljaW9uZXNfY3JvbmljYXM6IHJvdy5jb25kaWNpb25lc19jcm9uaWNhcyxcclxuICAgICAgZ3J1cG9fc2FuZ3VpbmVvOiByb3cuZ3J1cG9fc2FuZ3VpbmVvIHx8IFwiTi9BXCIsXHJcbiAgICB9KSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIHBhY2llbnRlcyByZWNpZW50ZXM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGEgbcOpdHJpY2FzIGRlIHJlbmRpbWllbnRvXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyTWV0cmljYXNSZW5kaW1pZW50byhcclxuICBpZE1lZGljbzogbnVtYmVyXHJcbik6IFByb21pc2U8TWV0cmljYVJlbmRpbWllbnRvW10+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaW5pY2lvTWVzQWN0dWFsID0gbmV3IERhdGUoXHJcbiAgICAgIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgbmV3IERhdGUoKS5nZXRNb250aCgpLFxyXG4gICAgICAxXHJcbiAgICApXHJcbiAgICAgIC50b0lTT1N0cmluZygpXHJcbiAgICAgIC5zcGxpdChcIlRcIilbMF07XHJcbiAgICBjb25zdCBpbmljaW9NZXNBbnRlcmlvciA9IG5ldyBEYXRlKFxyXG4gICAgICBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgIG5ldyBEYXRlKCkuZ2V0TW9udGgoKSAtIDEsXHJcbiAgICAgIDFcclxuICAgIClcclxuICAgICAgLnRvSVNPU3RyaW5nKClcclxuICAgICAgLnNwbGl0KFwiVFwiKVswXTtcclxuICAgIGNvbnN0IGZpbk1lc0FudGVyaW9yID0gbmV3IERhdGUoXHJcbiAgICAgIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSxcclxuICAgICAgbmV3IERhdGUoKS5nZXRNb250aCgpLFxyXG4gICAgICAwXHJcbiAgICApXHJcbiAgICAgIC50b0lTT1N0cmluZygpXHJcbiAgICAgIC5zcGxpdChcIlRcIilbMF07XHJcblxyXG4gICAgY29uc3QgW1xyXG4gICAgICBjb25zdWx0YXNBY3R1YWwsXHJcbiAgICAgIGNvbnN1bHRhc0FudGVyaW9yLFxyXG4gICAgICBwYWNpZW50ZXNBY3R1YWwsXHJcbiAgICAgIHBhY2llbnRlc0FudGVyaW9yLFxyXG4gICAgICBhc2lzdGVuY2lhQWN0dWFsLFxyXG4gICAgICBhc2lzdGVuY2lhQW50ZXJpb3IsXHJcbiAgICAgIGluZ3Jlc29zQWN0dWFsLFxyXG4gICAgICBpbmdyZXNvc0FudGVyaW9yLFxyXG4gICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBoaXN0b3JpYWxfY2xpbmljbyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZmVjaGFfYXRlbmNpb24gPj0gP2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNBY3R1YWxdXHJcbiAgICAgICksXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gaGlzdG9yaWFsX2NsaW5pY28gXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2F0ZW5jaW9uIEJFVFdFRU4gPyBBTkQgP2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNBbnRlcmlvciwgZmluTWVzQW50ZXJpb3JdXHJcbiAgICAgICksXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKERJU1RJTkNUIGlkX3BhY2llbnRlKSBhcyB0b3RhbCBGUk9NIGhpc3RvcmlhbF9jbGluaWNvIFxyXG4gICAgICAgICBXSEVSRSBpZF9tZWRpY28gPSA/IEFORCBmZWNoYV9hdGVuY2lvbiA+PSA/YCxcclxuICAgICAgICBbaWRNZWRpY28sIGluaWNpb01lc0FjdHVhbF1cclxuICAgICAgKSxcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoRElTVElOQ1QgaWRfcGFjaWVudGUpIGFzIHRvdGFsIEZST00gaGlzdG9yaWFsX2NsaW5pY28gXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2F0ZW5jaW9uIEJFVFdFRU4gPyBBTkQgP2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNBbnRlcmlvciwgZmluTWVzQW50ZXJpb3JdXHJcbiAgICAgICksXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIFxyXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIGVzdGFkbyA9ICdjb21wbGV0YWRhJyBUSEVOIDEgRU5EKSBhcyBjb21wbGV0YWRhcyxcclxuICAgICAgICAgIENPVU5UKCopIGFzIHRvdGFsXHJcbiAgICAgICAgIEZST00gY2l0YXMgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZmVjaGFfaG9yYV9pbmljaW8gPj0gP2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNBY3R1YWxdXHJcbiAgICAgICksXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIFxyXG4gICAgICAgICAgQ09VTlQoQ0FTRSBXSEVOIGVzdGFkbyA9ICdjb21wbGV0YWRhJyBUSEVOIDEgRU5EKSBhcyBjb21wbGV0YWRhcyxcclxuICAgICAgICAgIENPVU5UKCopIGFzIHRvdGFsXHJcbiAgICAgICAgIEZST00gY2l0YXMgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZmVjaGFfaG9yYV9pbmljaW8gQkVUV0VFTiA/IEFORCA/YCxcclxuICAgICAgICBbaWRNZWRpY28sIGluaWNpb01lc0FudGVyaW9yLCBmaW5NZXNBbnRlcmlvcl1cclxuICAgICAgKSxcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09BTEVTQ0UoU1VNKG1vbnRvKSwgMCkgYXMgdG90YWwgRlJPTSBjaXRhcyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZmVjaGFfaG9yYV9pbmljaW8gPj0gPyBcclxuICAgICAgICAgQU5EIHBhZ2FkYSA9IDEgQU5EIGVzdGFkbyA9ICdjb21wbGV0YWRhJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNBY3R1YWxdXHJcbiAgICAgICksXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPQUxFU0NFKFNVTShtb250byksIDApIGFzIHRvdGFsIEZST00gY2l0YXMgXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2hvcmFfaW5pY2lvIEJFVFdFRU4gPyBBTkQgPyBcclxuICAgICAgICAgQU5EIHBhZ2FkYSA9IDEgQU5EIGVzdGFkbyA9ICdjb21wbGV0YWRhJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvLCBpbmljaW9NZXNBbnRlcmlvciwgZmluTWVzQW50ZXJpb3JdXHJcbiAgICAgICksXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBjYWxjdWxhck1ldHJpY2EgPSAoXHJcbiAgICAgIGFjdHVhbDogbnVtYmVyLFxyXG4gICAgICBhbnRlcmlvcjogbnVtYmVyLFxyXG4gICAgICB1bmlkYWQ6IHN0cmluZyxcclxuICAgICAgbm9tYnJlOiBzdHJpbmcsXHJcbiAgICAgIGljb25vOiBzdHJpbmcsXHJcbiAgICAgIGNvbG9yOiBzdHJpbmcsXHJcbiAgICAgIGRlc2NyaXBjaW9uOiBzdHJpbmdcclxuICAgICk6IE1ldHJpY2FSZW5kaW1pZW50byA9PiB7XHJcbiAgICAgIGNvbnN0IGNhbWJpbyA9XHJcbiAgICAgICAgYW50ZXJpb3IgPiAwID8gKChhY3R1YWwgLSBhbnRlcmlvcikgLyBhbnRlcmlvcikgKiAxMDAgOiAwO1xyXG4gICAgICBjb25zdCB0ZW5kZW5jaWE6IFwidXBcIiB8IFwiZG93blwiIHwgXCJuZXV0cmFsXCIgPVxyXG4gICAgICAgIGNhbWJpbyA+IDUgPyBcInVwXCIgOiBjYW1iaW8gPCAtNSA/IFwiZG93blwiIDogXCJuZXV0cmFsXCI7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG5vbWJyZSxcclxuICAgICAgICB2YWxvcl9hY3R1YWw6IGFjdHVhbCxcclxuICAgICAgICB2YWxvcl9hbnRlcmlvcjogYW50ZXJpb3IsXHJcbiAgICAgICAgdW5pZGFkLFxyXG4gICAgICAgIHRlbmRlbmNpYSxcclxuICAgICAgICBwb3JjZW50YWplX2NhbWJpbzogTWF0aC5hYnMoTWF0aC5yb3VuZChjYW1iaW8pKSxcclxuICAgICAgICBpY29ubyxcclxuICAgICAgICBjb2xvcixcclxuICAgICAgICBkZXNjcmlwY2lvbixcclxuICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgdGFzYUFzaXN0ZW5jaWFBY3R1YWwgPVxyXG4gICAgICBhc2lzdGVuY2lhQWN0dWFsWzBdWzBdLnRvdGFsID4gMFxyXG4gICAgICAgID8gKGFzaXN0ZW5jaWFBY3R1YWxbMF1bMF0uY29tcGxldGFkYXMgLyBhc2lzdGVuY2lhQWN0dWFsWzBdWzBdLnRvdGFsKSAqXHJcbiAgICAgICAgICAxMDBcclxuICAgICAgICA6IDA7XHJcbiAgICBjb25zdCB0YXNhQXNpc3RlbmNpYUFudGVyaW9yID1cclxuICAgICAgYXNpc3RlbmNpYUFudGVyaW9yWzBdWzBdLnRvdGFsID4gMFxyXG4gICAgICAgID8gKGFzaXN0ZW5jaWFBbnRlcmlvclswXVswXS5jb21wbGV0YWRhcyAvXHJcbiAgICAgICAgICAgIGFzaXN0ZW5jaWFBbnRlcmlvclswXVswXS50b3RhbCkgKlxyXG4gICAgICAgICAgMTAwXHJcbiAgICAgICAgOiAwO1xyXG5cclxuICAgIHJldHVybiBbXHJcbiAgICAgIGNhbGN1bGFyTWV0cmljYShcclxuICAgICAgICBjb25zdWx0YXNBY3R1YWxbMF1bMF0udG90YWwsXHJcbiAgICAgICAgY29uc3VsdGFzQW50ZXJpb3JbMF1bMF0udG90YWwsXHJcbiAgICAgICAgXCJcIixcclxuICAgICAgICBcIkNvbnN1bHRhc1wiLFxyXG4gICAgICAgIFwiQWN0aXZpdHlcIixcclxuICAgICAgICBcImZyb20tYmx1ZS01MDAgdG8tY3lhbi01MDBcIixcclxuICAgICAgICBcIlRvdGFsIGRlIGNvbnN1bHRhcyByZWFsaXphZGFzIGVzdGUgbWVzXCJcclxuICAgICAgKSxcclxuICAgICAgY2FsY3VsYXJNZXRyaWNhKFxyXG4gICAgICAgIHBhY2llbnRlc0FjdHVhbFswXVswXS50b3RhbCxcclxuICAgICAgICBwYWNpZW50ZXNBbnRlcmlvclswXVswXS50b3RhbCxcclxuICAgICAgICBcIlwiLFxyXG4gICAgICAgIFwiUGFjaWVudGVzXCIsXHJcbiAgICAgICAgXCJVc2Vyc1wiLFxyXG4gICAgICAgIFwiZnJvbS1ncmVlbi01MDAgdG8tZW1lcmFsZC01MDBcIixcclxuICAgICAgICBcIlBhY2llbnRlcyDDum5pY29zIGF0ZW5kaWRvcyBlc3RlIG1lc1wiXHJcbiAgICAgICksXHJcbiAgICAgIGNhbGN1bGFyTWV0cmljYShcclxuICAgICAgICBNYXRoLnJvdW5kKHRhc2FBc2lzdGVuY2lhQWN0dWFsKSxcclxuICAgICAgICBNYXRoLnJvdW5kKHRhc2FBc2lzdGVuY2lhQW50ZXJpb3IpLFxyXG4gICAgICAgIFwiJVwiLFxyXG4gICAgICAgIFwiQXNpc3RlbmNpYVwiLFxyXG4gICAgICAgIFwiQ2hlY2tDaXJjbGUyXCIsXHJcbiAgICAgICAgXCJmcm9tLXB1cnBsZS01MDAgdG8tcGluay01MDBcIixcclxuICAgICAgICBcIlBvcmNlbnRhamUgZGUgY2l0YXMgY29tcGxldGFkYXNcIlxyXG4gICAgICApLFxyXG4gICAgICBjYWxjdWxhck1ldHJpY2EoXHJcbiAgICAgICAgcGFyc2VGbG9hdChpbmdyZXNvc0FjdHVhbFswXVswXS50b3RhbCksXHJcbiAgICAgICAgcGFyc2VGbG9hdChpbmdyZXNvc0FudGVyaW9yWzBdWzBdLnRvdGFsKSxcclxuICAgICAgICBcIiRcIixcclxuICAgICAgICBcIkluZ3Jlc29zXCIsXHJcbiAgICAgICAgXCJEb2xsYXJTaWduXCIsXHJcbiAgICAgICAgXCJmcm9tLWVtZXJhbGQtNTAwIHRvLXRlYWwtNTAwXCIsXHJcbiAgICAgICAgXCJJbmdyZXNvcyBnZW5lcmFkb3MgZXN0ZSBtZXNcIlxyXG4gICAgICApLFxyXG4gICAgXTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbGN1bGFyIG3DqXRyaWNhczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogT2J0aWVuZSBldmVudG9zIGRlbCBjYWxlbmRhcmlvXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyRXZlbnRvc0NhbGVuZGFyaW8oXHJcbiAgaWRNZWRpY286IG51bWJlclxyXG4pOiBQcm9taXNlPEV2ZW50b0NhbGVuZGFyaW9bXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBob3kgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xyXG5cclxuICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgYy5pZF9jaXRhIGFzIGlkLFxyXG4gICAgICAgIENPTkNBVCgnQ2l0YTogJywgcC5ub21icmUsICcgJywgcC5hcGVsbGlkb19wYXRlcm5vKSBhcyB0aXR1bG8sXHJcbiAgICAgICAgJ2NpdGEnIGFzIHRpcG8sXHJcbiAgICAgICAgYy5mZWNoYV9ob3JhX2luaWNpbyBhcyBmZWNoYV9ob3JhX2luaWNpbyxcclxuICAgICAgICBjLmZlY2hhX2hvcmFfZmluIGFzIGZlY2hhX2hvcmFfZmluLFxyXG4gICAgICAgIENPTkNBVChwLm5vbWJyZSwgJyAnLCBwLmFwZWxsaWRvX3BhdGVybm8pIGFzIHBhY2llbnRlLFxyXG4gICAgICAgIENPQUxFU0NFKHMubm9tYnJlLCAnQ29uc3VsdG9yaW8gUHJpbmNpcGFsJykgYXMgdWJpY2FjaW9uLFxyXG4gICAgICAgIGMuZXN0YWRvLFxyXG4gICAgICAgIENBU0UgXHJcbiAgICAgICAgICBXSEVOIGMuZXN0YWRvID0gJ2NvbXBsZXRhZGEnIFRIRU4gJyMxMGI5ODEnXHJcbiAgICAgICAgICBXSEVOIGMuZXN0YWRvID0gJ2NvbmZpcm1hZGEnIFRIRU4gJyMzYjgyZjYnXHJcbiAgICAgICAgICBXSEVOIGMuZXN0YWRvID0gJ3Byb2dyYW1hZGEnIFRIRU4gJyNmNTllMGInXHJcbiAgICAgICAgICBFTFNFICcjNmI3MjgwJ1xyXG4gICAgICAgIEVORCBhcyBjb2xvclxyXG4gICAgICBGUk9NIGNpdGFzIGNcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXMgcCBPTiBjLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICBMRUZUIEpPSU4gc2FsYXMgcyBPTiBjLmlkX3NhbGEgPSBzLmlkX3NhbGFcclxuICAgICAgV0hFUkUgYy5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgQU5EIERBVEUoYy5mZWNoYV9ob3JhX2luaWNpbykgPSA/XHJcbiAgICAgICAgQU5EIGMuZXN0YWRvIE5PVCBJTiAoJ2NhbmNlbGFkYScsICdub19hc2lzdGlvJylcclxuICAgICAgT1JERVIgQlkgYy5mZWNoYV9ob3JhX2luaWNpbyBBU0NcclxuICAgICAgYCxcclxuICAgICAgW2lkTWVkaWNvLCBob3ldXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiByb3dzLm1hcCgocm93KSA9PiAoe1xyXG4gICAgICBpZDogcm93LmlkLFxyXG4gICAgICB0aXR1bG86IHJvdy50aXR1bG8sXHJcbiAgICAgIHRpcG86IHJvdy50aXBvLFxyXG4gICAgICBmZWNoYV9ob3JhX2luaWNpbzogcm93LmZlY2hhX2hvcmFfaW5pY2lvLFxyXG4gICAgICBmZWNoYV9ob3JhX2Zpbjogcm93LmZlY2hhX2hvcmFfZmluLFxyXG4gICAgICBwYWNpZW50ZTogcm93LnBhY2llbnRlLFxyXG4gICAgICB1YmljYWNpb246IHJvdy51YmljYWNpb24sXHJcbiAgICAgIGVzdGFkbzogcm93LmVzdGFkbyxcclxuICAgICAgY29sb3I6IHJvdy5jb2xvcixcclxuICAgIH0pKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgZXZlbnRvczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogT2J0aWVuZSBhY3RpdmlkYWRlcyByZWNpZW50ZXNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJBY3RpdmlkYWRlc1JlY2llbnRlcyhcclxuICBpZE1lZGljbzogbnVtYmVyXHJcbik6IFByb21pc2U8QWN0aXZpZGFkUmVjaWVudGVbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGwuaWRfbG9nIGFzIGlkLFxyXG4gICAgICAgIGwudGlwbyxcclxuICAgICAgICBsLmFjY2lvbiBhcyBkZXNjcmlwY2lvbixcclxuICAgICAgICBsLmZlY2hhX2hvcmEsXHJcbiAgICAgICAgQ09OQ0FUKHUubm9tYnJlLCAnICcsIHUuYXBlbGxpZG9fcGF0ZXJubykgYXMgdXN1YXJpbyxcclxuICAgICAgICBDQVNFIFxyXG4gICAgICAgICAgV0hFTiBsLnRpcG8gPSAnY29uc3VsdGEnIFRIRU4gJ0NsaXBib2FyZENoZWNrJ1xyXG4gICAgICAgICAgV0hFTiBsLnRpcG8gPSAncmVjZXRhJyBUSEVOICdQaWxsJ1xyXG4gICAgICAgICAgV0hFTiBsLnRpcG8gPSAnZXhhbWVuJyBUSEVOICdUZXN0VHViZSdcclxuICAgICAgICAgIFdIRU4gbC50aXBvID0gJ2NlcnRpZmljYWRvJyBUSEVOICdGaWxlVGV4dCdcclxuICAgICAgICAgIEVMU0UgJ0FjdGl2aXR5J1xyXG4gICAgICAgIEVORCBhcyBpY29ubyxcclxuICAgICAgICBDQVNFIFxyXG4gICAgICAgICAgV0hFTiBsLnRpcG8gPSAnY29uc3VsdGEnIFRIRU4gJ2Zyb20tYmx1ZS01MDAgdG8tY3lhbi01MDAnXHJcbiAgICAgICAgICBXSEVOIGwudGlwbyA9ICdyZWNldGEnIFRIRU4gJ2Zyb20tZ3JlZW4tNTAwIHRvLWVtZXJhbGQtNTAwJ1xyXG4gICAgICAgICAgV0hFTiBsLnRpcG8gPSAnZXhhbWVuJyBUSEVOICdmcm9tLXB1cnBsZS01MDAgdG8tcGluay01MDAnXHJcbiAgICAgICAgICBXSEVOIGwudGlwbyA9ICdjZXJ0aWZpY2FkbycgVEhFTiAnZnJvbS1vcmFuZ2UtNTAwIHRvLXJlZC01MDAnXHJcbiAgICAgICAgICBFTFNFICdmcm9tLWdyYXktNTAwIHRvLXNsYXRlLTUwMCdcclxuICAgICAgICBFTkQgYXMgY29sb3JcclxuICAgICAgRlJPTSBsb2dzX3Npc3RlbWEgbFxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gbC5pZF91c3VhcmlvID0gdS5pZF91c3VhcmlvXHJcbiAgICAgIFdIRVJFIGwuaWRfdXN1YXJpbyA9IChTRUxFQ1QgaWRfdXN1YXJpbyBGUk9NIG1lZGljb3MgV0hFUkUgaWRfbWVkaWNvID0gPylcclxuICAgICAgT1JERVIgQlkgbC5mZWNoYV9ob3JhIERFU0NcclxuICAgICAgTElNSVQgMTBcclxuICAgICAgYCxcclxuICAgICAgW2lkTWVkaWNvXVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gcm93cy5tYXAoKHJvdykgPT4gKHtcclxuICAgICAgaWQ6IHJvdy5pZCxcclxuICAgICAgdGlwbzogcm93LnRpcG8sXHJcbiAgICAgIGRlc2NyaXBjaW9uOiByb3cuZGVzY3JpcGNpb24sXHJcbiAgICAgIGZlY2hhX2hvcmE6IHJvdy5mZWNoYV9ob3JhLFxyXG4gICAgICB1c3VhcmlvOiByb3cudXN1YXJpbyxcclxuICAgICAgaWNvbm86IHJvdy5pY29ubyxcclxuICAgICAgY29sb3I6IHJvdy5jb2xvcixcclxuICAgIH0pKTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgYWN0aXZpZGFkZXM6XCIsIGVycm9yKTtcclxuICAgIC8vIFJldG9ybmFyIGFycmF5IHZhY8OtbyBlbiBjYXNvIGRlIGVycm9yXHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhBTkRMRVIgR0VUXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gMS4gT2J0ZW5lciB0b2tlblxyXG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3QpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiBcIk5vIGhheSBzZXNpw7NuIGFjdGl2YVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMi4gVmVyaWZpY2FyIHNlc2nDs25cclxuICAgIGNvbnN0IFtzZXNpb25lc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHN1LmlkX3VzdWFyaW8sIHUubm9tYnJlLCB1LmFwZWxsaWRvX3BhdGVybm9cclxuICAgICAgRlJPTSBzZXNpb25lc191c3VhcmlvcyBzdVxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gc3UuaWRfdXN1YXJpbyA9IHUuaWRfdXN1YXJpb1xyXG4gICAgICBXSEVSRSBzdS50b2tlbiA9ID9cclxuICAgICAgICBBTkQgc3UuYWN0aXZhID0gMVxyXG4gICAgICAgIEFORCBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKClcclxuICAgICAgICBBTkQgdS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzZXNpb25lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6IFwiU2VzacOzbiBpbnbDoWxpZGEgbyBleHBpcmFkYVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRVc3VhcmlvID0gc2VzaW9uZXNbMF0uaWRfdXN1YXJpbztcclxuXHJcbiAgICAvLyAzLiBWZXJpZmljYXIgcXVlIHNlYSBtw6lkaWNvXHJcbiAgICBjb25zdCBtZWRpY28gPSBhd2FpdCBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oaWRVc3VhcmlvKTtcclxuXHJcbiAgICBpZiAoIW1lZGljbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjpcclxuICAgICAgICAgICAgXCJObyB0aWVuZXMgdW4gcmVnaXN0cm8gZGUgbcOpZGljbyBhY3Rpdm8uIENvbnRhY3RhIGFsIGFkbWluaXN0cmFkb3IuXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA0LiBBY3R1YWxpemFyIMO6bHRpbWEgYWN0aXZpZGFkXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgVVBEQVRFIHNlc2lvbmVzX3VzdWFyaW9zIFNFVCB1bHRpbWFfYWN0aXZpZGFkID0gTk9XKCkgV0hFUkUgdG9rZW4gPSA/YCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgLy8gNS4gT2J0ZW5lciB0b2RvcyBsb3MgZGF0b3MgZW4gcGFyYWxlbG9cclxuICAgIGNvbnN0IFtcclxuICAgICAgZXN0YWRpc3RpY2FzLFxyXG4gICAgICBjaXRhc1Byb3hpbWFzLFxyXG4gICAgICBhbGVydGFzVXJnZW50ZXMsXHJcbiAgICAgIHBhY2llbnRlc1JlY2llbnRlcyxcclxuICAgICAgbWV0cmljYXNSZW5kaW1pZW50byxcclxuICAgICAgZXZlbnRvc0NhbGVuZGFyaW8sXHJcbiAgICAgIGFjdGl2aWRhZGVzUmVjaWVudGVzLFxyXG4gICAgXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgb2J0ZW5lckVzdGFkaXN0aWNhcyhtZWRpY28uaWRfbWVkaWNvKSxcclxuICAgICAgb2J0ZW5lckNpdGFzUHJveGltYXMobWVkaWNvLmlkX21lZGljbyksXHJcbiAgICAgIG9idGVuZXJBbGVydGFzVXJnZW50ZXMobWVkaWNvLmlkX21lZGljbyksXHJcbiAgICAgIG9idGVuZXJQYWNpZW50ZXNSZWNpZW50ZXMobWVkaWNvLmlkX21lZGljbyksXHJcbiAgICAgIG9idGVuZXJNZXRyaWNhc1JlbmRpbWllbnRvKG1lZGljby5pZF9tZWRpY28pLFxyXG4gICAgICBvYnRlbmVyRXZlbnRvc0NhbGVuZGFyaW8obWVkaWNvLmlkX21lZGljbyksXHJcbiAgICAgIG9idGVuZXJBY3RpdmlkYWRlc1JlY2llbnRlcyhtZWRpY28uaWRfbWVkaWNvKSxcclxuICAgIF0pO1xyXG5cclxuICAgIC8vIDYuIFJlc3B1ZXN0YSBleGl0b3NhXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lZGljbzoge1xyXG4gICAgICAgICAgaWRfbWVkaWNvOiBtZWRpY28uaWRfbWVkaWNvLFxyXG4gICAgICAgICAgbnVtZXJvX3JlZ2lzdHJvX21lZGljbzogbWVkaWNvLm51bWVyb19yZWdpc3Ryb19tZWRpY28sXHJcbiAgICAgICAgICB0aXR1bG9fcHJvZmVzaW9uYWw6IG1lZGljby50aXR1bG9fcHJvZmVzaW9uYWwsXHJcbiAgICAgICAgICBlc3BlY2lhbGlkYWRfcHJpbmNpcGFsOiBtZWRpY28uZXNwZWNpYWxpZGFkX3ByaW5jaXBhbCxcclxuICAgICAgICAgIGFub3NfZXhwZXJpZW5jaWE6IG1lZGljby5hbm9zX2V4cGVyaWVuY2lhLFxyXG4gICAgICAgICAgY2FsaWZpY2FjaW9uX3Byb21lZGlvOiBtZWRpY28uY2FsaWZpY2FjaW9uX3Byb21lZGlvLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXN0YWRpc3RpY2FzLFxyXG4gICAgICAgIGNpdGFzX3Byb3hpbWFzOiBjaXRhc1Byb3hpbWFzLFxyXG4gICAgICAgIGFsZXJ0YXNfdXJnZW50ZXM6IGFsZXJ0YXNVcmdlbnRlcyxcclxuICAgICAgICBwYWNpZW50ZXNfcmVjaWVudGVzOiBwYWNpZW50ZXNSZWNpZW50ZXMsXHJcbiAgICAgICAgbWV0cmljYXNfcmVuZGltaWVudG86IG1ldHJpY2FzUmVuZGltaWVudG8sXHJcbiAgICAgICAgZXZlbnRvc19jYWxlbmRhcmlvOiBldmVudG9zQ2FsZW5kYXJpbyxcclxuICAgICAgICBhY3RpdmlkYWRlc19yZWNpZW50ZXM6IGFjdGl2aWRhZGVzUmVjaWVudGVzLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBlbiBHRVQgL2FwaS9tZWRpY28vZGFzaGJvYXJkOlwiLCBlcnJvcik7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3JcIixcclxuICAgICAgICBkZXRhaWxzOlxyXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gTcOJVE9ET1MgTk8gUEVSTUlUSURPU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVCgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJNw6l0b2RvIG5vIHBlcm1pdGlkb1wiIH0sXHJcbiAgICB7IHN0YXR1czogNDA1IH1cclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKCkge1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk3DqXRvZG8gbm8gcGVybWl0aWRvXCIgfSxcclxuICAgIHsgc3RhdHVzOiA0MDUgfVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUoKSB7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTcOpdG9kbyBubyBwZXJtaXRpZG9cIiB9LFxyXG4gICAgeyBzdGF0dXM6IDQwNSB9XHJcbiAgKTtcclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwb29sIiwiU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUyIsImdldFNlc3Npb25Ub2tlbiIsInJlcXVlc3QiLCJjb29raWVIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0IiwiY29va2llcyIsInNwbGl0IiwibWFwIiwiYyIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVkdWNlIiwiYWNjIiwiayIsInJlc3QiLCJqb2luIiwibmFtZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImF1dGgiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8iLCJpZFVzdWFyaW8iLCJyb3dzIiwicXVlcnkiLCJsZW5ndGgiLCJlcnJvciIsImNvbnNvbGUiLCJvYnRlbmVyRXN0YWRpc3RpY2FzIiwiaWRNZWRpY28iLCJob3kiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbmljaW9NZXMiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiaW5pY2lvQW5vIiwiY2l0YXNIb3kiLCJjaXRhc1BlbmRpZW50ZXMiLCJjaXRhc0NvbXBsZXRhZGFzSG95IiwiY2l0YXNDYW5jZWxhZGFzSG95IiwicGFjaWVudGVzTnVldm9zTWVzIiwidG90YWxQYWNpZW50ZXMiLCJjb25zdWx0YXNNZXMiLCJjb25zdWx0YXNBbm8iLCJyZWNldGFzTWVzIiwib3JkZW5lc01lcyIsImludGVyY29uc3VsdGFzUGVuZGllbnRlcyIsIm1lbnNhamVzU2luTGVlciIsImNhbGlmaWNhY2lvbiIsImluZ3Jlc29zTWVzIiwidGVsZW1lZGljaW5hIiwiY2VydGlmaWNhZG9zTWVzIiwicHJvY2VkaW1pZW50b3NNZXMiLCJQcm9taXNlIiwiYWxsIiwiY2l0YXNfaG95IiwidG90YWwiLCJjaXRhc19wZW5kaWVudGVzIiwiY2l0YXNfY29tcGxldGFkYXNfaG95IiwiY2l0YXNfY2FuY2VsYWRhc19ob3kiLCJwYWNpZW50ZXNfbnVldm9zX21lcyIsInRvdGFsX3BhY2llbnRlcyIsImNvbnN1bHRhc19tZXMiLCJjb25zdWx0YXNfYW5vIiwicmVjZXRhc19lbWl0aWRhc19tZXMiLCJvcmRlbmVzX2V4YW1lbl9tZXMiLCJpbnRlcmNvbnN1bHRhc19wZW5kaWVudGVzIiwibWVuc2FqZXNfc2luX2xlZXIiLCJjYWxpZmljYWNpb25fcHJvbWVkaW8iLCJwYXJzZUZsb2F0IiwicHJvbWVkaW8iLCJ0b3RhbF9yZXNlbmFzIiwiaW5ncmVzb3NfbWVzIiwidGVsZW1lZGljaW5hX2FjdGl2YXMiLCJjZXJ0aWZpY2Fkb3NfZW1pdGlkb3MiLCJwcm9jZWRpbWllbnRvc19tZXMiLCJvYnRlbmVyQ2l0YXNQcm94aW1hcyIsInJvdyIsImlkX2NpdGEiLCJmZWNoYV9ob3JhIiwiZHVyYWNpb25fbWludXRvcyIsInRpcG9fY2l0YSIsIm1vZGFsaWRhZCIsImVzdGFkbyIsInBhY2llbnRlIiwiaWRfcGFjaWVudGUiLCJub21icmVfY29tcGxldG8iLCJlZGFkIiwiZm90b191cmwiLCJ0ZWxlZm9ubyIsImdydXBvX3Nhbmd1aW5lbyIsIm1vdGl2byIsIm5vdGFzIiwic2FsYSIsIm9idGVuZXJBbGVydGFzVXJnZW50ZXMiLCJhbGVydGFzIiwiaWRBbGVydGEiLCJzaWdub3NWaXRhbGVzQ3JpdGljb3MiLCJzaWdubyIsInByb2JsZW1hcyIsInByZXNpb25fc2lzdG9saWNhIiwicHVzaCIsInByZXNpb25fZGlhc3RvbGljYSIsImZyZWN1ZW5jaWFfY2FyZGlhY2EiLCJ0ZW1wZXJhdHVyYSIsInNhdHVyYWNpb25fb3hpZ2VubyIsImlkX2FsZXJ0YSIsInRpcG8iLCJ0aXR1bG8iLCJkZXNjcmlwY2lvbiIsImZlY2hhX2hvcmFfcmVnaXN0cm8iLCJsZWlkYSIsImFjY2lvbl9yZXF1ZXJpZGEiLCJ1cmxfYWNjaW9uIiwiZXhhbWVuZXNDcml0aWNvcyIsImV4YW1lbiIsInRpcG9fZXhhbWVuIiwiZmVjaGFfcmVzdWx0YWRvIiwiaWRfcmVzdWx0YWRvIiwiY2l0YXNTaW5Db25maXJtYXIiLCJjaXRhIiwiZmVjaGFfaG9yYV9pbmljaW8iLCJ0cmF0YW1pZW50b3NWZW5jaWRvcyIsInRyYXRhbWllbnRvIiwibnVtX21lZGljYW1lbnRvcyIsImZlY2hhX2Zpbl90cmF0YW1pZW50byIsImlkX3JlY2V0YSIsImludGVyY29uc3VsdGFzVXJnZW50ZXMiLCJpbnRlcmNvbnN1bHRhIiwiZXNwZWNpYWxpZGFkX3NvbGljaXRhZGEiLCJmZWNoYV9zb2xpY2l0dWQiLCJpZF9pbnRlcmNvbnN1bHRhIiwib3JkZW5UaXBvIiwiY3JpdGljYSIsImFsdGEiLCJtZWRpYSIsImJhamEiLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwib2J0ZW5lclBhY2llbnRlc1JlY2llbnRlcyIsImdlbmVybyIsInVsdGltYV9jb25zdWx0YSIsImRpYWdub3N0aWNvX3ByaW5jaXBhbCIsImVzdGFkb19zYWx1ZCIsInByb3hpbWFfY2l0YSIsImFsZXJnaWFzX2NyaXRpY2FzIiwiY29uZGljaW9uZXNfY3JvbmljYXMiLCJvYnRlbmVyTWV0cmljYXNSZW5kaW1pZW50byIsImluaWNpb01lc0FjdHVhbCIsImluaWNpb01lc0FudGVyaW9yIiwiZmluTWVzQW50ZXJpb3IiLCJjb25zdWx0YXNBY3R1YWwiLCJjb25zdWx0YXNBbnRlcmlvciIsInBhY2llbnRlc0FjdHVhbCIsInBhY2llbnRlc0FudGVyaW9yIiwiYXNpc3RlbmNpYUFjdHVhbCIsImFzaXN0ZW5jaWFBbnRlcmlvciIsImluZ3Jlc29zQWN0dWFsIiwiaW5ncmVzb3NBbnRlcmlvciIsImNhbGN1bGFyTWV0cmljYSIsImFjdHVhbCIsImFudGVyaW9yIiwidW5pZGFkIiwibm9tYnJlIiwiaWNvbm8iLCJjb2xvciIsImNhbWJpbyIsInRlbmRlbmNpYSIsInZhbG9yX2FjdHVhbCIsInZhbG9yX2FudGVyaW9yIiwicG9yY2VudGFqZV9jYW1iaW8iLCJNYXRoIiwiYWJzIiwicm91bmQiLCJ0YXNhQXNpc3RlbmNpYUFjdHVhbCIsImNvbXBsZXRhZGFzIiwidGFzYUFzaXN0ZW5jaWFBbnRlcmlvciIsIm9idGVuZXJFdmVudG9zQ2FsZW5kYXJpbyIsImlkIiwiZmVjaGFfaG9yYV9maW4iLCJ1YmljYWNpb24iLCJvYnRlbmVyQWN0aXZpZGFkZXNSZWNpZW50ZXMiLCJ1c3VhcmlvIiwiR0VUIiwic2Vzc2lvblRva2VuIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJzZXNpb25lcyIsImlkX3VzdWFyaW8iLCJtZWRpY28iLCJlc3RhZGlzdGljYXMiLCJjaXRhc1Byb3hpbWFzIiwiYWxlcnRhc1VyZ2VudGVzIiwicGFjaWVudGVzUmVjaWVudGVzIiwibWV0cmljYXNSZW5kaW1pZW50byIsImV2ZW50b3NDYWxlbmRhcmlvIiwiYWN0aXZpZGFkZXNSZWNpZW50ZXMiLCJpZF9tZWRpY28iLCJudW1lcm9fcmVnaXN0cm9fbWVkaWNvIiwidGl0dWxvX3Byb2Zlc2lvbmFsIiwiZXNwZWNpYWxpZGFkX3ByaW5jaXBhbCIsImFub3NfZXhwZXJpZW5jaWEiLCJjaXRhc19wcm94aW1hcyIsImFsZXJ0YXNfdXJnZW50ZXMiLCJwYWNpZW50ZXNfcmVjaWVudGVzIiwibWV0cmljYXNfcmVuZGltaWVudG8iLCJldmVudG9zX2NhbGVuZGFyaW8iLCJhY3RpdmlkYWRlc19yZWNpZW50ZXMiLCJ0aW1lc3RhbXAiLCJkZXRhaWxzIiwicHJvY2VzcyIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJQT1NUIiwiUFVUIiwiREVMRVRFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/medico/dashboard/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// 📦 Archivo: src/lib/db.ts\n// 🧠 Descripción: Configuración central de conexión a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// 🔗 Conexión al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// 🧩 Función genérica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"❌ Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// 👤 Obtener usuario por email o username (para login o validaciones)\n// ✅ Versión que PRIORIZA el rol MÉDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) médico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) técnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// 🔒 Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// 📊 Ejemplo de utilidad: obtener estadísticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// 🔌 NUEVO: obtener una conexión dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexión\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// 🔁 NUEVO (opcional): helper para ejecutar en transacción\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// 🔁 Exportar conexión global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fdashboard%2Froute&page=%2Fapi%2Fmedico%2Fdashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fdashboard%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();