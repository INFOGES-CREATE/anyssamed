/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/medico/pacientes/route";
exports.ids = ["app/api/medico/pacientes/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fpacientes%2Froute&page=%2Fapi%2Fmedico%2Fpacientes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fpacientes%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fpacientes%2Froute&page=%2Fapi%2Fmedico%2Fpacientes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fpacientes%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_pacientes_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/medico/pacientes/route.ts */ \"(rsc)/./src/app/api/medico/pacientes/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/medico/pacientes/route\",\n        pathname: \"/api/medico/pacientes\",\n        filename: \"route\",\n        bundlePath: \"app/api/medico/pacientes/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\medico\\\\pacientes\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_pacientes_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/medico/pacientes/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZWRpY28lMkZwYWNpZW50ZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1lZGljbyUyRnBhY2llbnRlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1lZGljbyUyRnBhY2llbnRlcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDc0M7QUFDbkg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz9hYzc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxccGFjaWVudGVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZWRpY28vcGFjaWVudGVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWVkaWNvL3BhY2llbnRlc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVkaWNvL3BhY2llbnRlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxccGFjaWVudGVzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21lZGljby9wYWNpZW50ZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fpacientes%2Froute&page=%2Fapi%2Fmedico%2Fpacientes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fpacientes%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/medico/pacientes/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/medico/pacientes/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n// app/api/medico/pacientes/route.ts\n\n\n// ========================================\n// HELPER PARA OBTENER EL TOKEN\n// ========================================\nconst SESSION_COOKIE_CANDIDATES = [\n    \"session\",\n    \"session_token\",\n    \"medisalud_session\",\n    \"auth_session\",\n    \"next-auth.session-token\",\n    \"__Secure-next-auth.session-token\"\n];\nfunction getSessionToken(request) {\n    const cookieHeader = request.headers.get(\"cookie\") || \"\";\n    if (cookieHeader) {\n        const cookies = cookieHeader.split(\";\").map((c)=>c.trim()).filter(Boolean).reduce((acc, c)=>{\n            const [k, ...rest] = c.split(\"=\");\n            acc[k] = rest.join(\"=\");\n            return acc;\n        }, {});\n        for (const name of SESSION_COOKIE_CANDIDATES){\n            if (cookies[name]) {\n                return decodeURIComponent(cookies[name]);\n            }\n        }\n    }\n    const auth = request.headers.get(\"authorization\");\n    if (auth?.startsWith(\"Bearer \")) {\n        return auth.slice(7);\n    }\n    return null;\n}\n// ========================================\n// FUNCIONES AUXILIARES\n// ========================================\n/**\r\n * Obtiene la información del médico autenticado\r\n */ async function obtenerMedicoAutenticado(idUsuario) {\n    try {\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        m.id_medico,\r\n        m.id_usuario,\r\n        m.id_centro_principal,\r\n        m.numero_registro_medico,\r\n        m.titulo_profesional,\r\n        m.especialidad_principal\r\n      FROM medicos m\r\n      WHERE m.id_usuario = ? AND m.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            idUsuario\n        ]);\n        if (rows.length === 0) {\n            return null;\n        }\n        return rows[0];\n    } catch (error) {\n        console.error(\"Error al obtener m\\xe9dico:\", error);\n        throw error;\n    }\n}\n/**\r\n * Construye las condiciones WHERE según los filtros\r\n */ function construirCondicionesFiltros(filtros, params) {\n    const condiciones = [];\n    // Búsqueda general\n    if (filtros.busqueda?.trim()) {\n        condiciones.push(`(\r\n      p.nombre LIKE ? OR \r\n      p.apellido_paterno LIKE ? OR \r\n      p.apellido_materno LIKE ? OR \r\n      p.rut LIKE ? OR \r\n      p.email LIKE ? OR \r\n      p.telefono LIKE ? OR \r\n      p.celular LIKE ?\r\n    )`);\n        const searchTerm = `%${filtros.busqueda.trim()}%`;\n        params.push(searchTerm, searchTerm, searchTerm, searchTerm, searchTerm, searchTerm, searchTerm);\n    }\n    // Filtro por estados\n    if (filtros.estados && filtros.estados.length > 0) {\n        const placeholders = filtros.estados.map(()=>\"?\").join(\",\");\n        condiciones.push(`p.estado IN (${placeholders})`);\n        params.push(...filtros.estados);\n    }\n    // Filtro por géneros\n    if (filtros.generos && filtros.generos.length > 0) {\n        const placeholders = filtros.generos.map(()=>\"?\").join(\",\");\n        condiciones.push(`p.genero IN (${placeholders})`);\n        params.push(...filtros.generos);\n    }\n    // Filtro por grupos sanguíneos\n    if (filtros.grupos_sanguineos && filtros.grupos_sanguineos.length > 0) {\n        const placeholders = filtros.grupos_sanguineos.map(()=>\"?\").join(\",\");\n        condiciones.push(`p.grupo_sanguineo IN (${placeholders})`);\n        params.push(...filtros.grupos_sanguineos);\n    }\n    // Rango de edad\n    if (filtros.edad_min !== undefined && filtros.edad_min !== null) {\n        condiciones.push(`TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) >= ?`);\n        params.push(filtros.edad_min);\n    }\n    if (filtros.edad_max !== undefined && filtros.edad_max !== null) {\n        condiciones.push(`TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) <= ?`);\n        params.push(filtros.edad_max);\n    }\n    // Filtro por alergias\n    if (filtros.con_alergias !== undefined && filtros.con_alergias !== null) {\n        if (filtros.con_alergias) {\n            condiciones.push(`EXISTS (\r\n        SELECT 1 FROM alergias_pacientes ap \r\n        WHERE ap.id_paciente = p.id_paciente \r\n        AND ap.estado = 'activa'\r\n      )`);\n        }\n    }\n    // Filtro por condiciones crónicas\n    if (filtros.con_cronicas !== undefined && filtros.con_cronicas !== null) {\n        if (filtros.con_cronicas) {\n            condiciones.push(`EXISTS (\r\n        SELECT 1 FROM condiciones_cronicas cc \r\n        WHERE cc.id_paciente = p.id_paciente \r\n        AND cc.estado IN ('activa', 'controlada', 'en_tratamiento')\r\n      )`);\n        }\n    }\n    // Filtro por clasificación de riesgo\n    if (filtros.clasificacion_riesgo && filtros.clasificacion_riesgo.length > 0) {\n        const placeholders = filtros.clasificacion_riesgo.map(()=>\"?\").join(\",\");\n        condiciones.push(`p.clasificacion_riesgo IN (${placeholders})`);\n        params.push(...filtros.clasificacion_riesgo);\n    }\n    // Filtro por VIP\n    if (filtros.es_vip !== undefined && filtros.es_vip !== null) {\n        condiciones.push(`p.es_vip = ?`);\n        params.push(filtros.es_vip ? 1 : 0);\n    }\n    // Filtro por ciudad\n    if (filtros.ciudad?.trim()) {\n        condiciones.push(`p.ciudad LIKE ?`);\n        params.push(`%${filtros.ciudad.trim()}%`);\n    }\n    // Rango de fecha de registro\n    if (filtros.fecha_registro_desde) {\n        condiciones.push(`DATE(p.fecha_registro) >= ?`);\n        params.push(filtros.fecha_registro_desde);\n    }\n    if (filtros.fecha_registro_hasta) {\n        condiciones.push(`DATE(p.fecha_registro) <= ?`);\n        params.push(filtros.fecha_registro_hasta);\n    }\n    return condiciones.length > 0 ? `AND ${condiciones.join(\" AND \")}` : \"\";\n}\n/**\r\n * Obtiene la lista de pacientes con filtros y paginación\r\n */ async function obtenerPacientes(idMedico, filtros, paginacion) {\n    try {\n        const params = [\n            idMedico\n        ];\n        const condicionesFiltros = construirCondicionesFiltros(filtros, params);\n        // Mapeo de campos de ordenamiento\n        const camposOrden = {\n            nombre: \"p.nombre, p.apellido_paterno, p.apellido_materno\",\n            fecha_registro: \"p.fecha_registro\",\n            ultima_consulta: \"ultima_consulta\",\n            edad: \"edad\",\n            estado: \"p.estado\"\n        };\n        const ordenSQL = `${camposOrden[paginacion.orden_campo] || camposOrden.nombre} ${paginacion.orden_direccion.toUpperCase()}`;\n        // Consulta principal\n        const queryPacientes = `\r\n      SELECT \r\n        p.id_paciente,\r\n        p.rut,\r\n        p.nombre,\r\n        p.apellido_paterno,\r\n        p.apellido_materno,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno, ' ', COALESCE(p.apellido_materno, '')) as nombre_completo,\r\n        p.fecha_nacimiento,\r\n        TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) as edad,\r\n        p.genero,\r\n        p.email,\r\n        p.telefono,\r\n        p.celular,\r\n        p.direccion,\r\n        p.ciudad,\r\n        p.region,\r\n        p.foto_url,\r\n        p.grupo_sanguineo,\r\n        p.estado,\r\n        p.es_vip,\r\n        p.fecha_registro,\r\n        p.clasificacion_riesgo,\r\n        p.peso_kg,\r\n        p.altura_cm,\r\n        p.imc,\r\n        \r\n        -- Última consulta\r\n        (\r\n          SELECT MAX(hc.fecha_atencion)\r\n          FROM historial_clinico hc\r\n          WHERE hc.id_paciente = p.id_paciente\r\n            AND hc.id_medico = ?\r\n            AND hc.estado_registro != 'anulado'\r\n        ) as ultima_consulta,\r\n        \r\n        -- Próxima cita\r\n        (\r\n          SELECT MIN(c.fecha_hora_inicio)\r\n          FROM citas c\r\n          WHERE c.id_paciente = p.id_paciente\r\n            AND c.id_medico = ?\r\n            AND c.fecha_hora_inicio > NOW()\r\n            AND c.estado NOT IN ('cancelada', 'no_asistio')\r\n        ) as proxima_cita,\r\n        \r\n        -- Total de consultas\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM historial_clinico hc\r\n          WHERE hc.id_paciente = p.id_paciente\r\n            AND hc.id_medico = ?\r\n            AND hc.estado_registro != 'anulado'\r\n        ) as total_consultas,\r\n        \r\n        -- Total de citas\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM citas c\r\n          WHERE c.id_paciente = p.id_paciente\r\n            AND c.id_medico = ?\r\n        ) as total_citas,\r\n        \r\n        -- Alergias críticas\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM alergias_pacientes ap\r\n          WHERE ap.id_paciente = p.id_paciente\r\n            AND ap.estado = 'activa'\r\n            AND ap.severidad IN ('severa', 'potencialmente_mortal')\r\n        ) as alergias_criticas,\r\n        \r\n        -- Condiciones crónicas\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM condiciones_cronicas cc\r\n          WHERE cc.id_paciente = p.id_paciente\r\n            AND cc.estado IN ('activa', 'controlada', 'en_tratamiento')\r\n        ) as condiciones_cronicas,\r\n        \r\n        -- Medicamentos activos\r\n        (\r\n          SELECT COUNT(DISTINCT rm.id_medicamento)\r\n          FROM receta_medicamentos rm\r\n          INNER JOIN recetas_medicas rec ON rm.id_receta = rec.id_receta\r\n          WHERE rec.id_paciente = p.id_paciente\r\n            AND rec.id_medico = ?\r\n            AND rec.estado = 'activa'\r\n            AND (rec.fecha_fin_tratamiento IS NULL OR rec.fecha_fin_tratamiento >= CURDATE())\r\n        ) as medicamentos_activos,\r\n        \r\n        -- Exámenes pendientes\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM ordenes_examenes oe\r\n          WHERE oe.id_paciente = p.id_paciente\r\n            AND oe.id_medico = ?\r\n            AND oe.estado IN ('pendiente', 'en_proceso')\r\n        ) as examenes_pendientes,\r\n        \r\n        -- Documentos pendientes\r\n        (\r\n          SELECT COUNT(*)\r\n          FROM documentos_adjuntos da\r\n          WHERE da.id_paciente = p.id_paciente\r\n            AND da.estado = 'activo'\r\n            AND da.es_publico = 0\r\n        ) as documentos_pendientes,\r\n        \r\n        -- Diagnóstico principal\r\n        (\r\n          SELECT d.diagnostico\r\n          FROM diagnosticos d\r\n          WHERE d.id_paciente = p.id_paciente\r\n            AND d.id_medico = ?\r\n            AND d.tipo = 'principal'\r\n            AND d.estado IN ('activo', 'cronico', 'en_tratamiento')\r\n          ORDER BY d.fecha_diagnostico DESC\r\n          LIMIT 1\r\n        ) as diagnostico_principal,\r\n        \r\n        -- Notas importantes\r\n        p.notas_administrativas as notas_importantes,\r\n        \r\n        -- Tags (si existen en JSON)\r\n        p.tags\r\n        \r\n      FROM pacientes p\r\n      INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n      WHERE pm.id_medico = ?\r\n        AND pm.activo = 1\r\n        ${condicionesFiltros}\r\n      ORDER BY ${ordenSQL}\r\n      LIMIT ? OFFSET ?\r\n    `;\n        // Contar total\n        const queryTotal = `\r\n      SELECT COUNT(*) as total\r\n      FROM pacientes p\r\n      INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n      WHERE pm.id_medico = ?\r\n        AND pm.activo = 1\r\n        ${condicionesFiltros}\r\n    `;\n        const offset = (paginacion.pagina - 1) * paginacion.items_por_pagina;\n        // Agregar parámetros adicionales para las subconsultas\n        const paramsConsulta = [\n            idMedico,\n            idMedico,\n            idMedico,\n            idMedico,\n            idMedico,\n            idMedico,\n            idMedico,\n            ...params,\n            paginacion.items_por_pagina,\n            offset\n        ];\n        const [pacientesRows, totalRows] = await Promise.all([\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(queryPacientes, paramsConsulta),\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(queryTotal, params)\n        ]);\n        const pacientes = pacientesRows[0].map((row)=>({\n                id_paciente: row.id_paciente,\n                rut: row.rut,\n                nombre: row.nombre,\n                apellido_paterno: row.apellido_paterno,\n                apellido_materno: row.apellido_materno,\n                nombre_completo: row.nombre_completo,\n                fecha_nacimiento: row.fecha_nacimiento,\n                edad: row.edad,\n                genero: row.genero,\n                email: row.email,\n                telefono: row.telefono,\n                celular: row.celular,\n                direccion: row.direccion,\n                ciudad: row.ciudad,\n                region: row.region,\n                foto_url: row.foto_url,\n                grupo_sanguineo: row.grupo_sanguineo || \"desconocido\",\n                estado: row.estado,\n                es_vip: Boolean(row.es_vip),\n                fecha_registro: row.fecha_registro,\n                ultima_consulta: row.ultima_consulta,\n                proxima_cita: row.proxima_cita,\n                total_consultas: row.total_consultas || 0,\n                total_citas: row.total_citas || 0,\n                alergias_criticas: row.alergias_criticas || 0,\n                condiciones_cronicas: row.condiciones_cronicas || 0,\n                medicamentos_activos: row.medicamentos_activos || 0,\n                examenes_pendientes: row.examenes_pendientes || 0,\n                documentos_pendientes: row.documentos_pendientes || 0,\n                clasificacion_riesgo: row.clasificacion_riesgo,\n                imc: row.imc,\n                peso_kg: row.peso_kg,\n                altura_cm: row.altura_cm,\n                diagnostico_principal: row.diagnostico_principal,\n                notas_importantes: row.notas_importantes,\n                tags: row.tags ? typeof row.tags === \"string\" ? JSON.parse(row.tags) : row.tags : []\n            }));\n        const total = totalRows[0][0]?.total || 0;\n        return {\n            pacientes,\n            total\n        };\n    } catch (error) {\n        console.error(\"Error al obtener pacientes:\", error);\n        throw error;\n    }\n}\n/**\r\n * Obtiene estadísticas generales de pacientes\r\n */ async function obtenerEstadisticas(idMedico) {\n    try {\n        const inicioMes = new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split(\"T\")[0];\n        const [totalPacientes, pacientesActivos, pacientesNuevosMes, pacientesVip, pacientesCriticos, promedioEdad, distribucionGenero, distribucionGrupoSanguineo, pacientesConAlergias, pacientesConCronicas, consultasMes, citasProgramadas] = await Promise.all([\n            // Total de pacientes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM pacientes_medico \r\n         WHERE id_medico = ? AND activo = 1`, [\n                idMedico\n            ]),\n            // Pacientes activos\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM pacientes p\r\n         INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1 AND p.estado = 'activo'`, [\n                idMedico\n            ]),\n            // Pacientes nuevos del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM pacientes_medico \r\n         WHERE id_medico = ? AND activo = 1 AND fecha_asignacion >= ?`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Pacientes VIP\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM pacientes p\r\n         INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1 AND p.es_vip = 1`, [\n                idMedico\n            ]),\n            // Pacientes críticos\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM pacientes p\r\n         INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1 AND p.clasificacion_riesgo = 'critico'`, [\n                idMedico\n            ]),\n            // Promedio de edad\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT AVG(TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE())) as promedio\r\n         FROM pacientes p\r\n         INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1`, [\n                idMedico\n            ]),\n            // Distribución por género\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT \r\n           p.genero,\r\n           COUNT(*) as cantidad\r\n         FROM pacientes p\r\n         INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1\r\n         GROUP BY p.genero`, [\n                idMedico\n            ]),\n            // Distribución por grupo sanguíneo\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT \r\n           p.grupo_sanguineo,\r\n           COUNT(*) as cantidad\r\n         FROM pacientes p\r\n         INNER JOIN pacientes_medico pm ON p.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1\r\n         GROUP BY p.grupo_sanguineo`, [\n                idMedico\n            ]),\n            // Pacientes con alergias\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(DISTINCT ap.id_paciente) as total\r\n         FROM alergias_pacientes ap\r\n         INNER JOIN pacientes_medico pm ON ap.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1 AND ap.estado = 'activa'`, [\n                idMedico\n            ]),\n            // Pacientes con condiciones crónicas\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(DISTINCT cc.id_paciente) as total\r\n         FROM condiciones_cronicas cc\r\n         INNER JOIN pacientes_medico pm ON cc.id_paciente = pm.id_paciente\r\n         WHERE pm.id_medico = ? AND pm.activo = 1 \r\n         AND cc.estado IN ('activa', 'controlada', 'en_tratamiento')`, [\n                idMedico\n            ]),\n            // Consultas del mes\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM historial_clinico \r\n         WHERE id_medico = ? AND fecha_atencion >= ? AND estado_registro != 'anulado'`, [\n                idMedico,\n                inicioMes\n            ]),\n            // Citas programadas\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT COUNT(*) as total FROM citas \r\n         WHERE id_medico = ? AND estado IN ('programada', 'confirmada') \r\n         AND fecha_hora_inicio > NOW()`, [\n                idMedico\n            ])\n        ]);\n        // Procesar distribución de género\n        const distGenero = {\n            masculino: 0,\n            femenino: 0,\n            otro: 0\n        };\n        distribucionGenero[0].forEach((row)=>{\n            if (row.genero === \"masculino\") distGenero.masculino = row.cantidad;\n            else if (row.genero === \"femenino\") distGenero.femenino = row.cantidad;\n            else distGenero.otro += row.cantidad;\n        });\n        // Procesar distribución de grupo sanguíneo\n        const distGrupoSanguineo = {};\n        distribucionGrupoSanguineo[0].forEach((row)=>{\n            distGrupoSanguineo[row.grupo_sanguineo || \"desconocido\"] = row.cantidad;\n        });\n        return {\n            total_pacientes: totalPacientes[0][0]?.total || 0,\n            pacientes_activos: pacientesActivos[0][0]?.total || 0,\n            pacientes_nuevos_mes: pacientesNuevosMes[0][0]?.total || 0,\n            pacientes_vip: pacientesVip[0][0]?.total || 0,\n            pacientes_criticos: pacientesCriticos[0][0]?.total || 0,\n            promedio_edad: Math.round(promedioEdad[0][0]?.promedio || 0),\n            distribucion_genero: distGenero,\n            distribucion_grupo_sanguineo: distGrupoSanguineo,\n            pacientes_con_alergias: pacientesConAlergias[0][0]?.total || 0,\n            pacientes_con_cronicas: pacientesConCronicas[0][0]?.total || 0,\n            consultas_mes: consultasMes[0][0]?.total || 0,\n            citas_programadas: citasProgramadas[0][0]?.total || 0\n        };\n    } catch (error) {\n        console.error(\"Error al obtener estad\\xedsticas:\", error);\n        throw error;\n    }\n}\n// ========================================\n// HANDLER GET\n// ========================================\nasync function GET(request) {\n    try {\n        // 1. Obtener token\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        // 2. Verificar sesión\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario, u.nombre, u.apellido_paterno\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        // 3. Verificar que sea médico\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo. Contacta al administrador.\"\n            }, {\n                status: 403\n            });\n        }\n        // 4. Obtener parámetros de URL\n        const { searchParams } = new URL(request.url);\n        const filtros = {\n            busqueda: searchParams.get(\"busqueda\") || undefined,\n            estados: searchParams.get(\"estados\")?.split(\",\").filter(Boolean),\n            generos: searchParams.get(\"generos\")?.split(\",\").filter(Boolean),\n            grupos_sanguineos: searchParams.get(\"grupos_sanguineos\")?.split(\",\").filter(Boolean),\n            edad_min: searchParams.get(\"edad_min\") ? parseInt(searchParams.get(\"edad_min\")) : undefined,\n            edad_max: searchParams.get(\"edad_max\") ? parseInt(searchParams.get(\"edad_max\")) : undefined,\n            con_alergias: searchParams.get(\"con_alergias\") ? searchParams.get(\"con_alergias\") === \"true\" : undefined,\n            con_cronicas: searchParams.get(\"con_cronicas\") ? searchParams.get(\"con_cronicas\") === \"true\" : undefined,\n            clasificacion_riesgo: searchParams.get(\"clasificacion_riesgo\")?.split(\",\").filter(Boolean),\n            es_vip: searchParams.get(\"es_vip\") ? searchParams.get(\"es_vip\") === \"true\" : undefined,\n            ciudad: searchParams.get(\"ciudad\") || undefined,\n            fecha_registro_desde: searchParams.get(\"fecha_registro_desde\") || undefined,\n            fecha_registro_hasta: searchParams.get(\"fecha_registro_hasta\") || undefined,\n            ultima_consulta_desde: searchParams.get(\"ultima_consulta_desde\") || undefined,\n            ultima_consulta_hasta: searchParams.get(\"ultima_consulta_hasta\") || undefined\n        };\n        const paginacion = {\n            pagina: parseInt(searchParams.get(\"pagina\") || \"1\"),\n            items_por_pagina: parseInt(searchParams.get(\"items_por_pagina\") || \"20\"),\n            orden_campo: searchParams.get(\"orden_campo\") || \"nombre\",\n            orden_direccion: searchParams.get(\"orden_direccion\") || \"asc\"\n        };\n        // 5. Actualizar última actividad\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE sesiones_usuarios SET ultima_actividad = NOW() WHERE token = ?`, [\n            sessionToken\n        ]);\n        // 6. Obtener datos\n        const [resultadoPacientes, estadisticas] = await Promise.all([\n            obtenerPacientes(medico.id_medico, filtros, paginacion),\n            obtenerEstadisticas(medico.id_medico)\n        ]);\n        // 7. Respuesta exitosa\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            pacientes: resultadoPacientes.pacientes,\n            total: resultadoPacientes.total,\n            pagina_actual: paginacion.pagina,\n            items_por_pagina: paginacion.items_por_pagina,\n            total_paginas: Math.ceil(resultadoPacientes.total / paginacion.items_por_pagina),\n            estadisticas,\n            filtros_aplicados: filtros,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en GET /api/medico/pacientes:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// MÉTODOS NO PERMITIDOS\n// ========================================\nasync function POST() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: false,\n        error: \"M\\xe9todo no permitido\"\n    }, {\n        status: 405\n    });\n}\nasync function PUT() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: false,\n        error: \"M\\xe9todo no permitido\"\n    }, {\n        status: 405\n    });\n}\nasync function DELETE() {\n    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n        success: false,\n        error: \"M\\xe9todo no permitido\"\n    }, {\n        status: 405\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZWRpY28vcGFjaWVudGVzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLG9DQUFvQztBQUNvQjtBQUM1QjtBQW1HNUIsMkNBQTJDO0FBQzNDLCtCQUErQjtBQUMvQiwyQ0FBMkM7QUFFM0MsTUFBTUUsNEJBQTRCO0lBQ2hDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNEO0FBRUQsU0FBU0MsZ0JBQWdCQyxPQUFvQjtJQUMzQyxNQUFNQyxlQUFlRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxhQUFhO0lBRXRELElBQUlGLGNBQWM7UUFDaEIsTUFBTUcsVUFBVUgsYUFDYkksS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ2pCQyxNQUFNLENBQUNDLFNBQ1BDLE1BQU0sQ0FBQyxDQUFDQyxLQUFLTDtZQUNaLE1BQU0sQ0FBQ00sR0FBRyxHQUFHQyxLQUFLLEdBQUdQLEVBQUVGLEtBQUssQ0FBQztZQUM3Qk8sR0FBRyxDQUFDQyxFQUFFLEdBQUdDLEtBQUtDLElBQUksQ0FBQztZQUNuQixPQUFPSDtRQUNULEdBQUcsQ0FBQztRQUVOLEtBQUssTUFBTUksUUFBUWxCLDBCQUEyQjtZQUM1QyxJQUFJTSxPQUFPLENBQUNZLEtBQUssRUFBRTtnQkFDakIsT0FBT0MsbUJBQW1CYixPQUFPLENBQUNZLEtBQUs7WUFDekM7UUFDRjtJQUNGO0lBRUEsTUFBTUUsT0FBT2xCLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ2pDLElBQUllLE1BQU1DLFdBQVcsWUFBWTtRQUMvQixPQUFPRCxLQUFLRSxLQUFLLENBQUM7SUFDcEI7SUFFQSxPQUFPO0FBQ1Q7QUFFQSwyQ0FBMkM7QUFDM0MsdUJBQXVCO0FBQ3ZCLDJDQUEyQztBQUUzQzs7Q0FFQyxHQUNELGVBQWVDLHlCQUNiQyxTQUFpQjtJQUVqQixJQUFJO1FBQ0YsTUFBTSxDQUFDQyxLQUFLLEdBQUcsTUFBTTFC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TzNILE9BQU87SUFBc0IsR0FDL0M7UUFBRTRILFFBQVE7SUFBSTtBQUVsQjtBQUVPLGVBQWVzQjtJQUNwQixPQUFPaEwsa0ZBQVlBLENBQUN3SixJQUFJLENBQ3RCO1FBQUVDLFNBQVM7UUFBTzNILE9BQU87SUFBc0IsR0FDL0M7UUFBRTRILFFBQVE7SUFBSTtBQUVsQjtBQUVPLGVBQWV1QjtJQUNwQixPQUFPakwsa0ZBQVlBLENBQUN3SixJQUFJLENBQ3RCO1FBQUVDLFNBQVM7UUFBTzNILE9BQU87SUFBc0IsR0FDL0M7UUFBRTRILFFBQVE7SUFBSTtBQUVsQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvYXBwL2FwaS9tZWRpY28vcGFjaWVudGVzL3JvdXRlLnRzP2Y5MDgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9tZWRpY28vcGFjaWVudGVzL3JvdXRlLnRzXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHBvb2wgZnJvbSBcIkAvbGliL2RiXCI7XHJcbmltcG9ydCB7IFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TIERFIERBVE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmludGVyZmFjZSBNZWRpY29EYXRhIHtcclxuICBpZF9tZWRpY286IG51bWJlcjtcclxuICBpZF91c3VhcmlvOiBudW1iZXI7XHJcbiAgaWRfY2VudHJvX3ByaW5jaXBhbDogbnVtYmVyO1xyXG4gIG51bWVyb19yZWdpc3Ryb19tZWRpY286IHN0cmluZztcclxuICB0aXR1bG9fcHJvZmVzaW9uYWw6IHN0cmluZztcclxuICBlc3BlY2lhbGlkYWRfcHJpbmNpcGFsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQYWNpZW50ZSB7XHJcbiAgaWRfcGFjaWVudGU6IG51bWJlcjtcclxuICBydXQ6IHN0cmluZztcclxuICBub21icmU6IHN0cmluZztcclxuICBhcGVsbGlkb19wYXRlcm5vOiBzdHJpbmc7XHJcbiAgYXBlbGxpZG9fbWF0ZXJubzogc3RyaW5nIHwgbnVsbDtcclxuICBub21icmVfY29tcGxldG86IHN0cmluZztcclxuICBmZWNoYV9uYWNpbWllbnRvOiBzdHJpbmc7XHJcbiAgZWRhZDogbnVtYmVyO1xyXG4gIGdlbmVybzogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmcgfCBudWxsO1xyXG4gIHRlbGVmb25vOiBzdHJpbmcgfCBudWxsO1xyXG4gIGNlbHVsYXI6IHN0cmluZyB8IG51bGw7XHJcbiAgZGlyZWNjaW9uOiBzdHJpbmcgfCBudWxsO1xyXG4gIGNpdWRhZDogc3RyaW5nIHwgbnVsbDtcclxuICByZWdpb246IHN0cmluZyB8IG51bGw7XHJcbiAgZm90b191cmw6IHN0cmluZyB8IG51bGw7XHJcbiAgZ3J1cG9fc2FuZ3VpbmVvOiBzdHJpbmc7XHJcbiAgZXN0YWRvOiBcImFjdGl2b1wiIHwgXCJpbmFjdGl2b1wiIHwgXCJibG9xdWVhZG9cIiB8IFwiZmFsbGVjaWRvXCI7XHJcbiAgZXNfdmlwOiBib29sZWFuO1xyXG4gIGZlY2hhX3JlZ2lzdHJvOiBzdHJpbmc7XHJcbiAgdWx0aW1hX2NvbnN1bHRhOiBzdHJpbmcgfCBudWxsO1xyXG4gIHByb3hpbWFfY2l0YTogc3RyaW5nIHwgbnVsbDtcclxuICB0b3RhbF9jb25zdWx0YXM6IG51bWJlcjtcclxuICB0b3RhbF9jaXRhczogbnVtYmVyO1xyXG4gIGFsZXJnaWFzX2NyaXRpY2FzOiBudW1iZXI7XHJcbiAgY29uZGljaW9uZXNfY3JvbmljYXM6IG51bWJlcjtcclxuICBtZWRpY2FtZW50b3NfYWN0aXZvczogbnVtYmVyO1xyXG4gIGV4YW1lbmVzX3BlbmRpZW50ZXM6IG51bWJlcjtcclxuICBkb2N1bWVudG9zX3BlbmRpZW50ZXM6IG51bWJlcjtcclxuICBjbGFzaWZpY2FjaW9uX3JpZXNnbzogXCJiYWpvXCIgfCBcIm1lZGlvXCIgfCBcImFsdG9cIiB8IFwiY3JpdGljb1wiIHwgbnVsbDtcclxuICBpbWM6IG51bWJlciB8IG51bGw7XHJcbiAgcGVzb19rZzogbnVtYmVyIHwgbnVsbDtcclxuICBhbHR1cmFfY206IG51bWJlciB8IG51bGw7XHJcbiAgZGlhZ25vc3RpY29fcHJpbmNpcGFsOiBzdHJpbmcgfCBudWxsO1xyXG4gIG5vdGFzX2ltcG9ydGFudGVzOiBzdHJpbmcgfCBudWxsO1xyXG4gIHRhZ3M6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRXN0YWRpc3RpY2FzUGFjaWVudGVzIHtcclxuICB0b3RhbF9wYWNpZW50ZXM6IG51bWJlcjtcclxuICBwYWNpZW50ZXNfYWN0aXZvczogbnVtYmVyO1xyXG4gIHBhY2llbnRlc19udWV2b3NfbWVzOiBudW1iZXI7XHJcbiAgcGFjaWVudGVzX3ZpcDogbnVtYmVyO1xyXG4gIHBhY2llbnRlc19jcml0aWNvczogbnVtYmVyO1xyXG4gIHByb21lZGlvX2VkYWQ6IG51bWJlcjtcclxuICBkaXN0cmlidWNpb25fZ2VuZXJvOiB7XHJcbiAgICBtYXNjdWxpbm86IG51bWJlcjtcclxuICAgIGZlbWVuaW5vOiBudW1iZXI7XHJcbiAgICBvdHJvOiBudW1iZXI7XHJcbiAgfTtcclxuICBkaXN0cmlidWNpb25fZ3J1cG9fc2FuZ3VpbmVvOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xyXG4gIHBhY2llbnRlc19jb25fYWxlcmdpYXM6IG51bWJlcjtcclxuICBwYWNpZW50ZXNfY29uX2Nyb25pY2FzOiBudW1iZXI7XHJcbiAgY29uc3VsdGFzX21lczogbnVtYmVyO1xyXG4gIGNpdGFzX3Byb2dyYW1hZGFzOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBGaWx0cm9zUGFjaWVudGVzIHtcclxuICBidXNxdWVkYT86IHN0cmluZztcclxuICBlc3RhZG9zPzogc3RyaW5nW107XHJcbiAgZ2VuZXJvcz86IHN0cmluZ1tdO1xyXG4gIGdydXBvc19zYW5ndWluZW9zPzogc3RyaW5nW107XHJcbiAgZWRhZF9taW4/OiBudW1iZXI7XHJcbiAgZWRhZF9tYXg/OiBudW1iZXI7XHJcbiAgY29uX2FsZXJnaWFzPzogYm9vbGVhbjtcclxuICBjb25fY3JvbmljYXM/OiBib29sZWFuO1xyXG4gIGNsYXNpZmljYWNpb25fcmllc2dvPzogc3RyaW5nW107XHJcbiAgZXNfdmlwPzogYm9vbGVhbjtcclxuICBjaXVkYWQ/OiBzdHJpbmc7XHJcbiAgZmVjaGFfcmVnaXN0cm9fZGVzZGU/OiBzdHJpbmc7XHJcbiAgZmVjaGFfcmVnaXN0cm9faGFzdGE/OiBzdHJpbmc7XHJcbiAgdWx0aW1hX2NvbnN1bHRhX2Rlc2RlPzogc3RyaW5nO1xyXG4gIHVsdGltYV9jb25zdWx0YV9oYXN0YT86IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFBhZ2luYWNpb25QYXJhbXMge1xyXG4gIHBhZ2luYTogbnVtYmVyO1xyXG4gIGl0ZW1zX3Bvcl9wYWdpbmE6IG51bWJlcjtcclxuICBvcmRlbl9jYW1wbzogXCJub21icmVcIiB8IFwiZmVjaGFfcmVnaXN0cm9cIiB8IFwidWx0aW1hX2NvbnN1bHRhXCIgfCBcImVkYWRcIiB8IFwiZXN0YWRvXCI7XHJcbiAgb3JkZW5fZGlyZWNjaW9uOiBcImFzY1wiIHwgXCJkZXNjXCI7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSEVMUEVSIFBBUkEgT0JURU5FUiBFTCBUT0tFTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTID0gW1xyXG4gIFwic2Vzc2lvblwiLFxyXG4gIFwic2Vzc2lvbl90b2tlblwiLFxyXG4gIFwibWVkaXNhbHVkX3Nlc3Npb25cIixcclxuICBcImF1dGhfc2Vzc2lvblwiLFxyXG4gIFwibmV4dC1hdXRoLnNlc3Npb24tdG9rZW5cIixcclxuICBcIl9fU2VjdXJlLW5leHQtYXV0aC5zZXNzaW9uLXRva2VuXCIsXHJcbl07XHJcblxyXG5mdW5jdGlvbiBnZXRTZXNzaW9uVG9rZW4ocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCBjb29raWVIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiY29va2llXCIpIHx8IFwiXCI7XHJcblxyXG4gIGlmIChjb29raWVIZWFkZXIpIHtcclxuICAgIGNvbnN0IGNvb2tpZXMgPSBjb29raWVIZWFkZXJcclxuICAgICAgLnNwbGl0KFwiO1wiKVxyXG4gICAgICAubWFwKChjKSA9PiBjLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAucmVkdWNlKChhY2MsIGMpID0+IHtcclxuICAgICAgICBjb25zdCBbaywgLi4ucmVzdF0gPSBjLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBhY2Nba10gPSByZXN0LmpvaW4oXCI9XCIpO1xyXG4gICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pO1xyXG5cclxuICAgIGZvciAoY29uc3QgbmFtZSBvZiBTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTKSB7XHJcbiAgICAgIGlmIChjb29raWVzW25hbWVdKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjb29raWVzW25hbWVdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgYXV0aCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpO1xyXG4gIGlmIChhdXRoPy5zdGFydHNXaXRoKFwiQmVhcmVyIFwiKSkge1xyXG4gICAgcmV0dXJuIGF1dGguc2xpY2UoNyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBGVU5DSU9ORVMgQVVYSUxJQVJFU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogT2J0aWVuZSBsYSBpbmZvcm1hY2nDs24gZGVsIG3DqWRpY28gYXV0ZW50aWNhZG9cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyhcclxuICBpZFVzdWFyaW86IG51bWJlclxyXG4pOiBQcm9taXNlPE1lZGljb0RhdGEgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgbS5pZF9tZWRpY28sXHJcbiAgICAgICAgbS5pZF91c3VhcmlvLFxyXG4gICAgICAgIG0uaWRfY2VudHJvX3ByaW5jaXBhbCxcclxuICAgICAgICBtLm51bWVyb19yZWdpc3Ryb19tZWRpY28sXHJcbiAgICAgICAgbS50aXR1bG9fcHJvZmVzaW9uYWwsXHJcbiAgICAgICAgbS5lc3BlY2lhbGlkYWRfcHJpbmNpcGFsXHJcbiAgICAgIEZST00gbWVkaWNvcyBtXHJcbiAgICAgIFdIRVJFIG0uaWRfdXN1YXJpbyA9ID8gQU5EIG0uZXN0YWRvID0gJ2FjdGl2bydcclxuICAgICAgTElNSVQgMVxyXG4gICAgICBgLFxyXG4gICAgICBbaWRVc3VhcmlvXVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJvd3NbMF0gYXMgTWVkaWNvRGF0YTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgbcOpZGljbzpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29uc3RydXllIGxhcyBjb25kaWNpb25lcyBXSEVSRSBzZWfDum4gbG9zIGZpbHRyb3NcclxuICovXHJcbmZ1bmN0aW9uIGNvbnN0cnVpckNvbmRpY2lvbmVzRmlsdHJvcyhcclxuICBmaWx0cm9zOiBGaWx0cm9zUGFjaWVudGVzLFxyXG4gIHBhcmFtczogYW55W11cclxuKTogc3RyaW5nIHtcclxuICBjb25zdCBjb25kaWNpb25lczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgLy8gQsO6c3F1ZWRhIGdlbmVyYWxcclxuICBpZiAoZmlsdHJvcy5idXNxdWVkYT8udHJpbSgpKSB7XHJcbiAgICBjb25kaWNpb25lcy5wdXNoKGAoXHJcbiAgICAgIHAubm9tYnJlIExJS0UgPyBPUiBcclxuICAgICAgcC5hcGVsbGlkb19wYXRlcm5vIExJS0UgPyBPUiBcclxuICAgICAgcC5hcGVsbGlkb19tYXRlcm5vIExJS0UgPyBPUiBcclxuICAgICAgcC5ydXQgTElLRSA/IE9SIFxyXG4gICAgICBwLmVtYWlsIExJS0UgPyBPUiBcclxuICAgICAgcC50ZWxlZm9ubyBMSUtFID8gT1IgXHJcbiAgICAgIHAuY2VsdWxhciBMSUtFID9cclxuICAgIClgKTtcclxuICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBgJSR7ZmlsdHJvcy5idXNxdWVkYS50cmltKCl9JWA7XHJcbiAgICBwYXJhbXMucHVzaChzZWFyY2hUZXJtLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtLCBzZWFyY2hUZXJtKTtcclxuICB9XHJcblxyXG4gIC8vIEZpbHRybyBwb3IgZXN0YWRvc1xyXG4gIGlmIChmaWx0cm9zLmVzdGFkb3MgJiYgZmlsdHJvcy5lc3RhZG9zLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IGZpbHRyb3MuZXN0YWRvcy5tYXAoKCkgPT4gXCI/XCIpLmpvaW4oXCIsXCIpO1xyXG4gICAgY29uZGljaW9uZXMucHVzaChgcC5lc3RhZG8gSU4gKCR7cGxhY2Vob2xkZXJzfSlgKTtcclxuICAgIHBhcmFtcy5wdXNoKC4uLmZpbHRyb3MuZXN0YWRvcyk7XHJcbiAgfVxyXG5cclxuICAvLyBGaWx0cm8gcG9yIGfDqW5lcm9zXHJcbiAgaWYgKGZpbHRyb3MuZ2VuZXJvcyAmJiBmaWx0cm9zLmdlbmVyb3MubGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3QgcGxhY2Vob2xkZXJzID0gZmlsdHJvcy5nZW5lcm9zLm1hcCgoKSA9PiBcIj9cIikuam9pbihcIixcIik7XHJcbiAgICBjb25kaWNpb25lcy5wdXNoKGBwLmdlbmVybyBJTiAoJHtwbGFjZWhvbGRlcnN9KWApO1xyXG4gICAgcGFyYW1zLnB1c2goLi4uZmlsdHJvcy5nZW5lcm9zKTtcclxuICB9XHJcblxyXG4gIC8vIEZpbHRybyBwb3IgZ3J1cG9zIHNhbmd1w61uZW9zXHJcbiAgaWYgKGZpbHRyb3MuZ3J1cG9zX3Nhbmd1aW5lb3MgJiYgZmlsdHJvcy5ncnVwb3Nfc2FuZ3VpbmVvcy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSBmaWx0cm9zLmdydXBvc19zYW5ndWluZW9zLm1hcCgoKSA9PiBcIj9cIikuam9pbihcIixcIik7XHJcbiAgICBjb25kaWNpb25lcy5wdXNoKGBwLmdydXBvX3Nhbmd1aW5lbyBJTiAoJHtwbGFjZWhvbGRlcnN9KWApO1xyXG4gICAgcGFyYW1zLnB1c2goLi4uZmlsdHJvcy5ncnVwb3Nfc2FuZ3VpbmVvcyk7XHJcbiAgfVxyXG5cclxuICAvLyBSYW5nbyBkZSBlZGFkXHJcbiAgaWYgKGZpbHRyb3MuZWRhZF9taW4gIT09IHVuZGVmaW5lZCAmJiBmaWx0cm9zLmVkYWRfbWluICE9PSBudWxsKSB7XHJcbiAgICBjb25kaWNpb25lcy5wdXNoKGBUSU1FU1RBTVBESUZGKFlFQVIsIHAuZmVjaGFfbmFjaW1pZW50bywgQ1VSREFURSgpKSA+PSA/YCk7XHJcbiAgICBwYXJhbXMucHVzaChmaWx0cm9zLmVkYWRfbWluKTtcclxuICB9XHJcblxyXG4gIGlmIChmaWx0cm9zLmVkYWRfbWF4ICE9PSB1bmRlZmluZWQgJiYgZmlsdHJvcy5lZGFkX21heCAhPT0gbnVsbCkge1xyXG4gICAgY29uZGljaW9uZXMucHVzaChgVElNRVNUQU1QRElGRihZRUFSLCBwLmZlY2hhX25hY2ltaWVudG8sIENVUkRBVEUoKSkgPD0gP2ApO1xyXG4gICAgcGFyYW1zLnB1c2goZmlsdHJvcy5lZGFkX21heCk7XHJcbiAgfVxyXG5cclxuICAvLyBGaWx0cm8gcG9yIGFsZXJnaWFzXHJcbiAgaWYgKGZpbHRyb3MuY29uX2FsZXJnaWFzICE9PSB1bmRlZmluZWQgJiYgZmlsdHJvcy5jb25fYWxlcmdpYXMgIT09IG51bGwpIHtcclxuICAgIGlmIChmaWx0cm9zLmNvbl9hbGVyZ2lhcykge1xyXG4gICAgICBjb25kaWNpb25lcy5wdXNoKGBFWElTVFMgKFxyXG4gICAgICAgIFNFTEVDVCAxIEZST00gYWxlcmdpYXNfcGFjaWVudGVzIGFwIFxyXG4gICAgICAgIFdIRVJFIGFwLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZSBcclxuICAgICAgICBBTkQgYXAuZXN0YWRvID0gJ2FjdGl2YSdcclxuICAgICAgKWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmlsdHJvIHBvciBjb25kaWNpb25lcyBjcsOzbmljYXNcclxuICBpZiAoZmlsdHJvcy5jb25fY3JvbmljYXMgIT09IHVuZGVmaW5lZCAmJiBmaWx0cm9zLmNvbl9jcm9uaWNhcyAhPT0gbnVsbCkge1xyXG4gICAgaWYgKGZpbHRyb3MuY29uX2Nyb25pY2FzKSB7XHJcbiAgICAgIGNvbmRpY2lvbmVzLnB1c2goYEVYSVNUUyAoXHJcbiAgICAgICAgU0VMRUNUIDEgRlJPTSBjb25kaWNpb25lc19jcm9uaWNhcyBjYyBcclxuICAgICAgICBXSEVSRSBjYy5pZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGUgXHJcbiAgICAgICAgQU5EIGNjLmVzdGFkbyBJTiAoJ2FjdGl2YScsICdjb250cm9sYWRhJywgJ2VuX3RyYXRhbWllbnRvJylcclxuICAgICAgKWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmlsdHJvIHBvciBjbGFzaWZpY2FjacOzbiBkZSByaWVzZ29cclxuICBpZiAoZmlsdHJvcy5jbGFzaWZpY2FjaW9uX3JpZXNnbyAmJiBmaWx0cm9zLmNsYXNpZmljYWNpb25fcmllc2dvLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IGZpbHRyb3MuY2xhc2lmaWNhY2lvbl9yaWVzZ28ubWFwKCgpID0+IFwiP1wiKS5qb2luKFwiLFwiKTtcclxuICAgIGNvbmRpY2lvbmVzLnB1c2goYHAuY2xhc2lmaWNhY2lvbl9yaWVzZ28gSU4gKCR7cGxhY2Vob2xkZXJzfSlgKTtcclxuICAgIHBhcmFtcy5wdXNoKC4uLmZpbHRyb3MuY2xhc2lmaWNhY2lvbl9yaWVzZ28pO1xyXG4gIH1cclxuXHJcbiAgLy8gRmlsdHJvIHBvciBWSVBcclxuICBpZiAoZmlsdHJvcy5lc192aXAgIT09IHVuZGVmaW5lZCAmJiBmaWx0cm9zLmVzX3ZpcCAhPT0gbnVsbCkge1xyXG4gICAgY29uZGljaW9uZXMucHVzaChgcC5lc192aXAgPSA/YCk7XHJcbiAgICBwYXJhbXMucHVzaChmaWx0cm9zLmVzX3ZpcCA/IDEgOiAwKTtcclxuICB9XHJcblxyXG4gIC8vIEZpbHRybyBwb3IgY2l1ZGFkXHJcbiAgaWYgKGZpbHRyb3MuY2l1ZGFkPy50cmltKCkpIHtcclxuICAgIGNvbmRpY2lvbmVzLnB1c2goYHAuY2l1ZGFkIExJS0UgP2ApO1xyXG4gICAgcGFyYW1zLnB1c2goYCUke2ZpbHRyb3MuY2l1ZGFkLnRyaW0oKX0lYCk7XHJcbiAgfVxyXG5cclxuICAvLyBSYW5nbyBkZSBmZWNoYSBkZSByZWdpc3Ryb1xyXG4gIGlmIChmaWx0cm9zLmZlY2hhX3JlZ2lzdHJvX2Rlc2RlKSB7XHJcbiAgICBjb25kaWNpb25lcy5wdXNoKGBEQVRFKHAuZmVjaGFfcmVnaXN0cm8pID49ID9gKTtcclxuICAgIHBhcmFtcy5wdXNoKGZpbHRyb3MuZmVjaGFfcmVnaXN0cm9fZGVzZGUpO1xyXG4gIH1cclxuXHJcbiAgaWYgKGZpbHRyb3MuZmVjaGFfcmVnaXN0cm9faGFzdGEpIHtcclxuICAgIGNvbmRpY2lvbmVzLnB1c2goYERBVEUocC5mZWNoYV9yZWdpc3RybykgPD0gP2ApO1xyXG4gICAgcGFyYW1zLnB1c2goZmlsdHJvcy5mZWNoYV9yZWdpc3Ryb19oYXN0YSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY29uZGljaW9uZXMubGVuZ3RoID4gMCA/IGBBTkQgJHtjb25kaWNpb25lcy5qb2luKFwiIEFORCBcIil9YCA6IFwiXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPYnRpZW5lIGxhIGxpc3RhIGRlIHBhY2llbnRlcyBjb24gZmlsdHJvcyB5IHBhZ2luYWNpw7NuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBvYnRlbmVyUGFjaWVudGVzKFxyXG4gIGlkTWVkaWNvOiBudW1iZXIsXHJcbiAgZmlsdHJvczogRmlsdHJvc1BhY2llbnRlcyxcclxuICBwYWdpbmFjaW9uOiBQYWdpbmFjaW9uUGFyYW1zXHJcbik6IFByb21pc2U8eyBwYWNpZW50ZXM6IFBhY2llbnRlW107IHRvdGFsOiBudW1iZXIgfT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueVtdID0gW2lkTWVkaWNvXTtcclxuICAgIGNvbnN0IGNvbmRpY2lvbmVzRmlsdHJvcyA9IGNvbnN0cnVpckNvbmRpY2lvbmVzRmlsdHJvcyhmaWx0cm9zLCBwYXJhbXMpO1xyXG5cclxuICAgIC8vIE1hcGVvIGRlIGNhbXBvcyBkZSBvcmRlbmFtaWVudG9cclxuICAgIGNvbnN0IGNhbXBvc09yZGVuOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xyXG4gICAgICBub21icmU6IFwicC5ub21icmUsIHAuYXBlbGxpZG9fcGF0ZXJubywgcC5hcGVsbGlkb19tYXRlcm5vXCIsXHJcbiAgICAgIGZlY2hhX3JlZ2lzdHJvOiBcInAuZmVjaGFfcmVnaXN0cm9cIixcclxuICAgICAgdWx0aW1hX2NvbnN1bHRhOiBcInVsdGltYV9jb25zdWx0YVwiLFxyXG4gICAgICBlZGFkOiBcImVkYWRcIixcclxuICAgICAgZXN0YWRvOiBcInAuZXN0YWRvXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IG9yZGVuU1FMID0gYCR7Y2FtcG9zT3JkZW5bcGFnaW5hY2lvbi5vcmRlbl9jYW1wb10gfHwgY2FtcG9zT3JkZW4ubm9tYnJlfSAke3BhZ2luYWNpb24ub3JkZW5fZGlyZWNjaW9uLnRvVXBwZXJDYXNlKCl9YDtcclxuXHJcbiAgICAvLyBDb25zdWx0YSBwcmluY2lwYWxcclxuICAgIGNvbnN0IHF1ZXJ5UGFjaWVudGVzID0gYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgcC5pZF9wYWNpZW50ZSxcclxuICAgICAgICBwLnJ1dCxcclxuICAgICAgICBwLm5vbWJyZSxcclxuICAgICAgICBwLmFwZWxsaWRvX3BhdGVybm8sXHJcbiAgICAgICAgcC5hcGVsbGlkb19tYXRlcm5vLFxyXG4gICAgICAgIENPTkNBVChwLm5vbWJyZSwgJyAnLCBwLmFwZWxsaWRvX3BhdGVybm8sICcgJywgQ09BTEVTQ0UocC5hcGVsbGlkb19tYXRlcm5vLCAnJykpIGFzIG5vbWJyZV9jb21wbGV0byxcclxuICAgICAgICBwLmZlY2hhX25hY2ltaWVudG8sXHJcbiAgICAgICAgVElNRVNUQU1QRElGRihZRUFSLCBwLmZlY2hhX25hY2ltaWVudG8sIENVUkRBVEUoKSkgYXMgZWRhZCxcclxuICAgICAgICBwLmdlbmVybyxcclxuICAgICAgICBwLmVtYWlsLFxyXG4gICAgICAgIHAudGVsZWZvbm8sXHJcbiAgICAgICAgcC5jZWx1bGFyLFxyXG4gICAgICAgIHAuZGlyZWNjaW9uLFxyXG4gICAgICAgIHAuY2l1ZGFkLFxyXG4gICAgICAgIHAucmVnaW9uLFxyXG4gICAgICAgIHAuZm90b191cmwsXHJcbiAgICAgICAgcC5ncnVwb19zYW5ndWluZW8sXHJcbiAgICAgICAgcC5lc3RhZG8sXHJcbiAgICAgICAgcC5lc192aXAsXHJcbiAgICAgICAgcC5mZWNoYV9yZWdpc3RybyxcclxuICAgICAgICBwLmNsYXNpZmljYWNpb25fcmllc2dvLFxyXG4gICAgICAgIHAucGVzb19rZyxcclxuICAgICAgICBwLmFsdHVyYV9jbSxcclxuICAgICAgICBwLmltYyxcclxuICAgICAgICBcclxuICAgICAgICAtLSDDmmx0aW1hIGNvbnN1bHRhXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgU0VMRUNUIE1BWChoYy5mZWNoYV9hdGVuY2lvbilcclxuICAgICAgICAgIEZST00gaGlzdG9yaWFsX2NsaW5pY28gaGNcclxuICAgICAgICAgIFdIRVJFIGhjLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICAgICAgICBBTkQgaGMuaWRfbWVkaWNvID0gP1xyXG4gICAgICAgICAgICBBTkQgaGMuZXN0YWRvX3JlZ2lzdHJvICE9ICdhbnVsYWRvJ1xyXG4gICAgICAgICkgYXMgdWx0aW1hX2NvbnN1bHRhLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC0tIFByw7N4aW1hIGNpdGFcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgTUlOKGMuZmVjaGFfaG9yYV9pbmljaW8pXHJcbiAgICAgICAgICBGUk9NIGNpdGFzIGNcclxuICAgICAgICAgIFdIRVJFIGMuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCBjLmlkX21lZGljbyA9ID9cclxuICAgICAgICAgICAgQU5EIGMuZmVjaGFfaG9yYV9pbmljaW8gPiBOT1coKVxyXG4gICAgICAgICAgICBBTkQgYy5lc3RhZG8gTk9UIElOICgnY2FuY2VsYWRhJywgJ25vX2FzaXN0aW8nKVxyXG4gICAgICAgICkgYXMgcHJveGltYV9jaXRhLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC0tIFRvdGFsIGRlIGNvbnN1bHRhc1xyXG4gICAgICAgIChcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKVxyXG4gICAgICAgICAgRlJPTSBoaXN0b3JpYWxfY2xpbmljbyBoY1xyXG4gICAgICAgICAgV0hFUkUgaGMuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCBoYy5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgICAgIEFORCBoYy5lc3RhZG9fcmVnaXN0cm8gIT0gJ2FudWxhZG8nXHJcbiAgICAgICAgKSBhcyB0b3RhbF9jb25zdWx0YXMsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLS0gVG90YWwgZGUgY2l0YXNcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgQ09VTlQoKilcclxuICAgICAgICAgIEZST00gY2l0YXMgY1xyXG4gICAgICAgICAgV0hFUkUgYy5pZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGVcclxuICAgICAgICAgICAgQU5EIGMuaWRfbWVkaWNvID0gP1xyXG4gICAgICAgICkgYXMgdG90YWxfY2l0YXMsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLS0gQWxlcmdpYXMgY3LDrXRpY2FzXHJcbiAgICAgICAgKFxyXG4gICAgICAgICAgU0VMRUNUIENPVU5UKCopXHJcbiAgICAgICAgICBGUk9NIGFsZXJnaWFzX3BhY2llbnRlcyBhcFxyXG4gICAgICAgICAgV0hFUkUgYXAuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCBhcC5lc3RhZG8gPSAnYWN0aXZhJ1xyXG4gICAgICAgICAgICBBTkQgYXAuc2V2ZXJpZGFkIElOICgnc2V2ZXJhJywgJ3BvdGVuY2lhbG1lbnRlX21vcnRhbCcpXHJcbiAgICAgICAgKSBhcyBhbGVyZ2lhc19jcml0aWNhcyxcclxuICAgICAgICBcclxuICAgICAgICAtLSBDb25kaWNpb25lcyBjcsOzbmljYXNcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgQ09VTlQoKilcclxuICAgICAgICAgIEZST00gY29uZGljaW9uZXNfY3JvbmljYXMgY2NcclxuICAgICAgICAgIFdIRVJFIGNjLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICAgICAgICBBTkQgY2MuZXN0YWRvIElOICgnYWN0aXZhJywgJ2NvbnRyb2xhZGEnLCAnZW5fdHJhdGFtaWVudG8nKVxyXG4gICAgICAgICkgYXMgY29uZGljaW9uZXNfY3JvbmljYXMsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLS0gTWVkaWNhbWVudG9zIGFjdGl2b3NcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgQ09VTlQoRElTVElOQ1Qgcm0uaWRfbWVkaWNhbWVudG8pXHJcbiAgICAgICAgICBGUk9NIHJlY2V0YV9tZWRpY2FtZW50b3Mgcm1cclxuICAgICAgICAgIElOTkVSIEpPSU4gcmVjZXRhc19tZWRpY2FzIHJlYyBPTiBybS5pZF9yZWNldGEgPSByZWMuaWRfcmVjZXRhXHJcbiAgICAgICAgICBXSEVSRSByZWMuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCByZWMuaWRfbWVkaWNvID0gP1xyXG4gICAgICAgICAgICBBTkQgcmVjLmVzdGFkbyA9ICdhY3RpdmEnXHJcbiAgICAgICAgICAgIEFORCAocmVjLmZlY2hhX2Zpbl90cmF0YW1pZW50byBJUyBOVUxMIE9SIHJlYy5mZWNoYV9maW5fdHJhdGFtaWVudG8gPj0gQ1VSREFURSgpKVxyXG4gICAgICAgICkgYXMgbWVkaWNhbWVudG9zX2FjdGl2b3MsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLS0gRXjDoW1lbmVzIHBlbmRpZW50ZXNcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgQ09VTlQoKilcclxuICAgICAgICAgIEZST00gb3JkZW5lc19leGFtZW5lcyBvZVxyXG4gICAgICAgICAgV0hFUkUgb2UuaWRfcGFjaWVudGUgPSBwLmlkX3BhY2llbnRlXHJcbiAgICAgICAgICAgIEFORCBvZS5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgICAgIEFORCBvZS5lc3RhZG8gSU4gKCdwZW5kaWVudGUnLCAnZW5fcHJvY2VzbycpXHJcbiAgICAgICAgKSBhcyBleGFtZW5lc19wZW5kaWVudGVzLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC0tIERvY3VtZW50b3MgcGVuZGllbnRlc1xyXG4gICAgICAgIChcclxuICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKVxyXG4gICAgICAgICAgRlJPTSBkb2N1bWVudG9zX2FkanVudG9zIGRhXHJcbiAgICAgICAgICBXSEVSRSBkYS5pZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGVcclxuICAgICAgICAgICAgQU5EIGRhLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgICAgICAgIEFORCBkYS5lc19wdWJsaWNvID0gMFxyXG4gICAgICAgICkgYXMgZG9jdW1lbnRvc19wZW5kaWVudGVzLFxyXG4gICAgICAgIFxyXG4gICAgICAgIC0tIERpYWduw7NzdGljbyBwcmluY2lwYWxcclxuICAgICAgICAoXHJcbiAgICAgICAgICBTRUxFQ1QgZC5kaWFnbm9zdGljb1xyXG4gICAgICAgICAgRlJPTSBkaWFnbm9zdGljb3MgZFxyXG4gICAgICAgICAgV0hFUkUgZC5pZF9wYWNpZW50ZSA9IHAuaWRfcGFjaWVudGVcclxuICAgICAgICAgICAgQU5EIGQuaWRfbWVkaWNvID0gP1xyXG4gICAgICAgICAgICBBTkQgZC50aXBvID0gJ3ByaW5jaXBhbCdcclxuICAgICAgICAgICAgQU5EIGQuZXN0YWRvIElOICgnYWN0aXZvJywgJ2Nyb25pY28nLCAnZW5fdHJhdGFtaWVudG8nKVxyXG4gICAgICAgICAgT1JERVIgQlkgZC5mZWNoYV9kaWFnbm9zdGljbyBERVNDXHJcbiAgICAgICAgICBMSU1JVCAxXHJcbiAgICAgICAgKSBhcyBkaWFnbm9zdGljb19wcmluY2lwYWwsXHJcbiAgICAgICAgXHJcbiAgICAgICAgLS0gTm90YXMgaW1wb3J0YW50ZXNcclxuICAgICAgICBwLm5vdGFzX2FkbWluaXN0cmF0aXZhcyBhcyBub3Rhc19pbXBvcnRhbnRlcyxcclxuICAgICAgICBcclxuICAgICAgICAtLSBUYWdzIChzaSBleGlzdGVuIGVuIEpTT04pXHJcbiAgICAgICAgcC50YWdzXHJcbiAgICAgICAgXHJcbiAgICAgIEZST00gcGFjaWVudGVzIHBcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIHAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgQU5EIHBtLmFjdGl2byA9IDFcclxuICAgICAgICAke2NvbmRpY2lvbmVzRmlsdHJvc31cclxuICAgICAgT1JERVIgQlkgJHtvcmRlblNRTH1cclxuICAgICAgTElNSVQgPyBPRkZTRVQgP1xyXG4gICAgYDtcclxuXHJcbiAgICAvLyBDb250YXIgdG90YWxcclxuICAgIGNvbnN0IHF1ZXJ5VG90YWwgPSBgXHJcbiAgICAgIFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbFxyXG4gICAgICBGUk9NIHBhY2llbnRlcyBwXHJcbiAgICAgIElOTkVSIEpPSU4gcGFjaWVudGVzX21lZGljbyBwbSBPTiBwLmlkX3BhY2llbnRlID0gcG0uaWRfcGFjaWVudGVcclxuICAgICAgV0hFUkUgcG0uaWRfbWVkaWNvID0gP1xyXG4gICAgICAgIEFORCBwbS5hY3Rpdm8gPSAxXHJcbiAgICAgICAgJHtjb25kaWNpb25lc0ZpbHRyb3N9XHJcbiAgICBgO1xyXG5cclxuICAgIGNvbnN0IG9mZnNldCA9IChwYWdpbmFjaW9uLnBhZ2luYSAtIDEpICogcGFnaW5hY2lvbi5pdGVtc19wb3JfcGFnaW5hO1xyXG5cclxuICAgIC8vIEFncmVnYXIgcGFyw6FtZXRyb3MgYWRpY2lvbmFsZXMgcGFyYSBsYXMgc3ViY29uc3VsdGFzXHJcbiAgICBjb25zdCBwYXJhbXNDb25zdWx0YSA9IFtcclxuICAgICAgaWRNZWRpY28sIC8vIHBhcmEgdWx0aW1hX2NvbnN1bHRhXHJcbiAgICAgIGlkTWVkaWNvLCAvLyBwYXJhIHByb3hpbWFfY2l0YVxyXG4gICAgICBpZE1lZGljbywgLy8gcGFyYSB0b3RhbF9jb25zdWx0YXNcclxuICAgICAgaWRNZWRpY28sIC8vIHBhcmEgdG90YWxfY2l0YXNcclxuICAgICAgaWRNZWRpY28sIC8vIHBhcmEgbWVkaWNhbWVudG9zX2FjdGl2b3NcclxuICAgICAgaWRNZWRpY28sIC8vIHBhcmEgZXhhbWVuZXNfcGVuZGllbnRlc1xyXG4gICAgICBpZE1lZGljbywgLy8gcGFyYSBkaWFnbm9zdGljb19wcmluY2lwYWxcclxuICAgICAgLi4ucGFyYW1zLCAvLyBmaWx0cm9zXHJcbiAgICAgIHBhZ2luYWNpb24uaXRlbXNfcG9yX3BhZ2luYSxcclxuICAgICAgb2Zmc2V0LFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCBbcGFjaWVudGVzUm93cywgdG90YWxSb3dzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KHF1ZXJ5UGFjaWVudGVzLCBwYXJhbXNDb25zdWx0YSksXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihxdWVyeVRvdGFsLCBwYXJhbXMpLFxyXG4gICAgXSk7XHJcblxyXG4gICAgY29uc3QgcGFjaWVudGVzID0gcGFjaWVudGVzUm93c1swXS5tYXAoKHJvdykgPT4gKHtcclxuICAgICAgaWRfcGFjaWVudGU6IHJvdy5pZF9wYWNpZW50ZSxcclxuICAgICAgcnV0OiByb3cucnV0LFxyXG4gICAgICBub21icmU6IHJvdy5ub21icmUsXHJcbiAgICAgIGFwZWxsaWRvX3BhdGVybm86IHJvdy5hcGVsbGlkb19wYXRlcm5vLFxyXG4gICAgICBhcGVsbGlkb19tYXRlcm5vOiByb3cuYXBlbGxpZG9fbWF0ZXJubyxcclxuICAgICAgbm9tYnJlX2NvbXBsZXRvOiByb3cubm9tYnJlX2NvbXBsZXRvLFxyXG4gICAgICBmZWNoYV9uYWNpbWllbnRvOiByb3cuZmVjaGFfbmFjaW1pZW50byxcclxuICAgICAgZWRhZDogcm93LmVkYWQsXHJcbiAgICAgIGdlbmVybzogcm93LmdlbmVybyxcclxuICAgICAgZW1haWw6IHJvdy5lbWFpbCxcclxuICAgICAgdGVsZWZvbm86IHJvdy50ZWxlZm9ubyxcclxuICAgICAgY2VsdWxhcjogcm93LmNlbHVsYXIsXHJcbiAgICAgIGRpcmVjY2lvbjogcm93LmRpcmVjY2lvbixcclxuICAgICAgY2l1ZGFkOiByb3cuY2l1ZGFkLFxyXG4gICAgICByZWdpb246IHJvdy5yZWdpb24sXHJcbiAgICAgIGZvdG9fdXJsOiByb3cuZm90b191cmwsXHJcbiAgICAgIGdydXBvX3Nhbmd1aW5lbzogcm93LmdydXBvX3Nhbmd1aW5lbyB8fCBcImRlc2Nvbm9jaWRvXCIsXHJcbiAgICAgIGVzdGFkbzogcm93LmVzdGFkbyxcclxuICAgICAgZXNfdmlwOiBCb29sZWFuKHJvdy5lc192aXApLFxyXG4gICAgICBmZWNoYV9yZWdpc3Rybzogcm93LmZlY2hhX3JlZ2lzdHJvLFxyXG4gICAgICB1bHRpbWFfY29uc3VsdGE6IHJvdy51bHRpbWFfY29uc3VsdGEsXHJcbiAgICAgIHByb3hpbWFfY2l0YTogcm93LnByb3hpbWFfY2l0YSxcclxuICAgICAgdG90YWxfY29uc3VsdGFzOiByb3cudG90YWxfY29uc3VsdGFzIHx8IDAsXHJcbiAgICAgIHRvdGFsX2NpdGFzOiByb3cudG90YWxfY2l0YXMgfHwgMCxcclxuICAgICAgYWxlcmdpYXNfY3JpdGljYXM6IHJvdy5hbGVyZ2lhc19jcml0aWNhcyB8fCAwLFxyXG4gICAgICBjb25kaWNpb25lc19jcm9uaWNhczogcm93LmNvbmRpY2lvbmVzX2Nyb25pY2FzIHx8IDAsXHJcbiAgICAgIG1lZGljYW1lbnRvc19hY3Rpdm9zOiByb3cubWVkaWNhbWVudG9zX2FjdGl2b3MgfHwgMCxcclxuICAgICAgZXhhbWVuZXNfcGVuZGllbnRlczogcm93LmV4YW1lbmVzX3BlbmRpZW50ZXMgfHwgMCxcclxuICAgICAgZG9jdW1lbnRvc19wZW5kaWVudGVzOiByb3cuZG9jdW1lbnRvc19wZW5kaWVudGVzIHx8IDAsXHJcbiAgICAgIGNsYXNpZmljYWNpb25fcmllc2dvOiByb3cuY2xhc2lmaWNhY2lvbl9yaWVzZ28sXHJcbiAgICAgIGltYzogcm93LmltYyxcclxuICAgICAgcGVzb19rZzogcm93LnBlc29fa2csXHJcbiAgICAgIGFsdHVyYV9jbTogcm93LmFsdHVyYV9jbSxcclxuICAgICAgZGlhZ25vc3RpY29fcHJpbmNpcGFsOiByb3cuZGlhZ25vc3RpY29fcHJpbmNpcGFsLFxyXG4gICAgICBub3Rhc19pbXBvcnRhbnRlczogcm93Lm5vdGFzX2ltcG9ydGFudGVzLFxyXG4gICAgICB0YWdzOiByb3cudGFncyA/ICh0eXBlb2Ygcm93LnRhZ3MgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShyb3cudGFncykgOiByb3cudGFncykgOiBbXSxcclxuICAgIH0pKTtcclxuXHJcbiAgICBjb25zdCB0b3RhbCA9IHRvdGFsUm93c1swXVswXT8udG90YWwgfHwgMDtcclxuXHJcbiAgICByZXR1cm4geyBwYWNpZW50ZXMsIHRvdGFsIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIHBhY2llbnRlczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogT2J0aWVuZSBlc3RhZMOtc3RpY2FzIGdlbmVyYWxlcyBkZSBwYWNpZW50ZXNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJFc3RhZGlzdGljYXMoXHJcbiAgaWRNZWRpY286IG51bWJlclxyXG4pOiBQcm9taXNlPEVzdGFkaXN0aWNhc1BhY2llbnRlcz4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBpbmljaW9NZXMgPSBuZXcgRGF0ZShcclxuICAgICAgbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLFxyXG4gICAgICBuZXcgRGF0ZSgpLmdldE1vbnRoKCksXHJcbiAgICAgIDFcclxuICAgIClcclxuICAgICAgLnRvSVNPU3RyaW5nKClcclxuICAgICAgLnNwbGl0KFwiVFwiKVswXTtcclxuXHJcbiAgICBjb25zdCBbXHJcbiAgICAgIHRvdGFsUGFjaWVudGVzLFxyXG4gICAgICBwYWNpZW50ZXNBY3Rpdm9zLFxyXG4gICAgICBwYWNpZW50ZXNOdWV2b3NNZXMsXHJcbiAgICAgIHBhY2llbnRlc1ZpcCxcclxuICAgICAgcGFjaWVudGVzQ3JpdGljb3MsXHJcbiAgICAgIHByb21lZGlvRWRhZCxcclxuICAgICAgZGlzdHJpYnVjaW9uR2VuZXJvLFxyXG4gICAgICBkaXN0cmlidWNpb25HcnVwb1Nhbmd1aW5lbyxcclxuICAgICAgcGFjaWVudGVzQ29uQWxlcmdpYXMsXHJcbiAgICAgIHBhY2llbnRlc0NvbkNyb25pY2FzLFxyXG4gICAgICBjb25zdWx0YXNNZXMsXHJcbiAgICAgIGNpdGFzUHJvZ3JhbWFkYXMsXHJcbiAgICBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAvLyBUb3RhbCBkZSBwYWNpZW50ZXNcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBwYWNpZW50ZXNfbWVkaWNvIFxyXG4gICAgICAgICBXSEVSRSBpZF9tZWRpY28gPSA/IEFORCBhY3Rpdm8gPSAxYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBQYWNpZW50ZXMgYWN0aXZvc1xyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIHBhY2llbnRlcyBwXHJcbiAgICAgICAgIElOTkVSIEpPSU4gcGFjaWVudGVzX21lZGljbyBwbSBPTiBwLmlkX3BhY2llbnRlID0gcG0uaWRfcGFjaWVudGVcclxuICAgICAgICAgV0hFUkUgcG0uaWRfbWVkaWNvID0gPyBBTkQgcG0uYWN0aXZvID0gMSBBTkQgcC5lc3RhZG8gPSAnYWN0aXZvJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gUGFjaWVudGVzIG51ZXZvcyBkZWwgbWVzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gcGFjaWVudGVzX21lZGljbyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgYWN0aXZvID0gMSBBTkQgZmVjaGFfYXNpZ25hY2lvbiA+PSA/YCxcclxuICAgICAgICBbaWRNZWRpY28sIGluaWNpb01lc11cclxuICAgICAgKSxcclxuXHJcbiAgICAgIC8vIFBhY2llbnRlcyBWSVBcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBwYWNpZW50ZXMgcFxyXG4gICAgICAgICBJTk5FUiBKT0lOIHBhY2llbnRlc19tZWRpY28gcG0gT04gcC5pZF9wYWNpZW50ZSA9IHBtLmlkX3BhY2llbnRlXHJcbiAgICAgICAgIFdIRVJFIHBtLmlkX21lZGljbyA9ID8gQU5EIHBtLmFjdGl2byA9IDEgQU5EIHAuZXNfdmlwID0gMWAsXHJcbiAgICAgICAgW2lkTWVkaWNvXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gUGFjaWVudGVzIGNyw610aWNvc1xyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBDT1VOVCgqKSBhcyB0b3RhbCBGUk9NIHBhY2llbnRlcyBwXHJcbiAgICAgICAgIElOTkVSIEpPSU4gcGFjaWVudGVzX21lZGljbyBwbSBPTiBwLmlkX3BhY2llbnRlID0gcG0uaWRfcGFjaWVudGVcclxuICAgICAgICAgV0hFUkUgcG0uaWRfbWVkaWNvID0gPyBBTkQgcG0uYWN0aXZvID0gMSBBTkQgcC5jbGFzaWZpY2FjaW9uX3JpZXNnbyA9ICdjcml0aWNvJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gUHJvbWVkaW8gZGUgZWRhZFxyXG4gICAgICBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgICAgYFNFTEVDVCBBVkcoVElNRVNUQU1QRElGRihZRUFSLCBwLmZlY2hhX25hY2ltaWVudG8sIENVUkRBVEUoKSkpIGFzIHByb21lZGlvXHJcbiAgICAgICAgIEZST00gcGFjaWVudGVzIHBcclxuICAgICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIHAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/IEFORCBwbS5hY3Rpdm8gPSAxYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBEaXN0cmlidWNpw7NuIHBvciBnw6luZXJvXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIFxyXG4gICAgICAgICAgIHAuZ2VuZXJvLFxyXG4gICAgICAgICAgIENPVU5UKCopIGFzIGNhbnRpZGFkXHJcbiAgICAgICAgIEZST00gcGFjaWVudGVzIHBcclxuICAgICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIHAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/IEFORCBwbS5hY3Rpdm8gPSAxXHJcbiAgICAgICAgIEdST1VQIEJZIHAuZ2VuZXJvYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBEaXN0cmlidWNpw7NuIHBvciBncnVwbyBzYW5ndcOtbmVvXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIFxyXG4gICAgICAgICAgIHAuZ3J1cG9fc2FuZ3VpbmVvLFxyXG4gICAgICAgICAgIENPVU5UKCopIGFzIGNhbnRpZGFkXHJcbiAgICAgICAgIEZST00gcGFjaWVudGVzIHBcclxuICAgICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIHAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/IEFORCBwbS5hY3Rpdm8gPSAxXHJcbiAgICAgICAgIEdST1VQIEJZIHAuZ3J1cG9fc2FuZ3VpbmVvYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcblxyXG4gICAgICAvLyBQYWNpZW50ZXMgY29uIGFsZXJnaWFzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKERJU1RJTkNUIGFwLmlkX3BhY2llbnRlKSBhcyB0b3RhbFxyXG4gICAgICAgICBGUk9NIGFsZXJnaWFzX3BhY2llbnRlcyBhcFxyXG4gICAgICAgICBJTk5FUiBKT0lOIHBhY2llbnRlc19tZWRpY28gcG0gT04gYXAuaWRfcGFjaWVudGUgPSBwbS5pZF9wYWNpZW50ZVxyXG4gICAgICAgICBXSEVSRSBwbS5pZF9tZWRpY28gPSA/IEFORCBwbS5hY3Rpdm8gPSAxIEFORCBhcC5lc3RhZG8gPSAnYWN0aXZhJ2AsXHJcbiAgICAgICAgW2lkTWVkaWNvXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gUGFjaWVudGVzIGNvbiBjb25kaWNpb25lcyBjcsOzbmljYXNcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoRElTVElOQ1QgY2MuaWRfcGFjaWVudGUpIGFzIHRvdGFsXHJcbiAgICAgICAgIEZST00gY29uZGljaW9uZXNfY3JvbmljYXMgY2NcclxuICAgICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXNfbWVkaWNvIHBtIE9OIGNjLmlkX3BhY2llbnRlID0gcG0uaWRfcGFjaWVudGVcclxuICAgICAgICAgV0hFUkUgcG0uaWRfbWVkaWNvID0gPyBBTkQgcG0uYWN0aXZvID0gMSBcclxuICAgICAgICAgQU5EIGNjLmVzdGFkbyBJTiAoJ2FjdGl2YScsICdjb250cm9sYWRhJywgJ2VuX3RyYXRhbWllbnRvJylgLFxyXG4gICAgICAgIFtpZE1lZGljb11cclxuICAgICAgKSxcclxuXHJcbiAgICAgIC8vIENvbnN1bHRhcyBkZWwgbWVzXHJcbiAgICAgIHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gaGlzdG9yaWFsX2NsaW5pY28gXHJcbiAgICAgICAgIFdIRVJFIGlkX21lZGljbyA9ID8gQU5EIGZlY2hhX2F0ZW5jaW9uID49ID8gQU5EIGVzdGFkb19yZWdpc3RybyAhPSAnYW51bGFkbydgLFxyXG4gICAgICAgIFtpZE1lZGljbywgaW5pY2lvTWVzXVxyXG4gICAgICApLFxyXG5cclxuICAgICAgLy8gQ2l0YXMgcHJvZ3JhbWFkYXNcclxuICAgICAgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBjaXRhcyBcclxuICAgICAgICAgV0hFUkUgaWRfbWVkaWNvID0gPyBBTkQgZXN0YWRvIElOICgncHJvZ3JhbWFkYScsICdjb25maXJtYWRhJykgXHJcbiAgICAgICAgIEFORCBmZWNoYV9ob3JhX2luaWNpbyA+IE5PVygpYCxcclxuICAgICAgICBbaWRNZWRpY29dXHJcbiAgICAgICksXHJcbiAgICBdKTtcclxuXHJcbiAgICAvLyBQcm9jZXNhciBkaXN0cmlidWNpw7NuIGRlIGfDqW5lcm9cclxuICAgIGNvbnN0IGRpc3RHZW5lcm8gPSB7XHJcbiAgICAgIG1hc2N1bGlubzogMCxcclxuICAgICAgZmVtZW5pbm86IDAsXHJcbiAgICAgIG90cm86IDAsXHJcbiAgICB9O1xyXG5cclxuICAgIGRpc3RyaWJ1Y2lvbkdlbmVyb1swXS5mb3JFYWNoKChyb3c6IGFueSkgPT4ge1xyXG4gICAgICBpZiAocm93LmdlbmVybyA9PT0gXCJtYXNjdWxpbm9cIikgZGlzdEdlbmVyby5tYXNjdWxpbm8gPSByb3cuY2FudGlkYWQ7XHJcbiAgICAgIGVsc2UgaWYgKHJvdy5nZW5lcm8gPT09IFwiZmVtZW5pbm9cIikgZGlzdEdlbmVyby5mZW1lbmlubyA9IHJvdy5jYW50aWRhZDtcclxuICAgICAgZWxzZSBkaXN0R2VuZXJvLm90cm8gKz0gcm93LmNhbnRpZGFkO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUHJvY2VzYXIgZGlzdHJpYnVjacOzbiBkZSBncnVwbyBzYW5ndcOtbmVvXHJcbiAgICBjb25zdCBkaXN0R3J1cG9TYW5ndWluZW86IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcclxuICAgIGRpc3RyaWJ1Y2lvbkdydXBvU2FuZ3VpbmVvWzBdLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICAgIGRpc3RHcnVwb1Nhbmd1aW5lb1tyb3cuZ3J1cG9fc2FuZ3VpbmVvIHx8IFwiZGVzY29ub2NpZG9cIl0gPSByb3cuY2FudGlkYWQ7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3RhbF9wYWNpZW50ZXM6IHRvdGFsUGFjaWVudGVzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBwYWNpZW50ZXNfYWN0aXZvczogcGFjaWVudGVzQWN0aXZvc1swXVswXT8udG90YWwgfHwgMCxcclxuICAgICAgcGFjaWVudGVzX251ZXZvc19tZXM6IHBhY2llbnRlc051ZXZvc01lc1swXVswXT8udG90YWwgfHwgMCxcclxuICAgICAgcGFjaWVudGVzX3ZpcDogcGFjaWVudGVzVmlwWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBwYWNpZW50ZXNfY3JpdGljb3M6IHBhY2llbnRlc0NyaXRpY29zWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBwcm9tZWRpb19lZGFkOiBNYXRoLnJvdW5kKHByb21lZGlvRWRhZFswXVswXT8ucHJvbWVkaW8gfHwgMCksXHJcbiAgICAgIGRpc3RyaWJ1Y2lvbl9nZW5lcm86IGRpc3RHZW5lcm8sXHJcbiAgICAgIGRpc3RyaWJ1Y2lvbl9ncnVwb19zYW5ndWluZW86IGRpc3RHcnVwb1Nhbmd1aW5lbyxcclxuICAgICAgcGFjaWVudGVzX2Nvbl9hbGVyZ2lhczogcGFjaWVudGVzQ29uQWxlcmdpYXNbMF1bMF0/LnRvdGFsIHx8IDAsXHJcbiAgICAgIHBhY2llbnRlc19jb25fY3JvbmljYXM6IHBhY2llbnRlc0NvbkNyb25pY2FzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgICBjb25zdWx0YXNfbWVzOiBjb25zdWx0YXNNZXNbMF1bMF0/LnRvdGFsIHx8IDAsXHJcbiAgICAgIGNpdGFzX3Byb2dyYW1hZGFzOiBjaXRhc1Byb2dyYW1hZGFzWzBdWzBdPy50b3RhbCB8fCAwLFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgZXN0YWTDrXN0aWNhczpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhBTkRMRVIgR0VUXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gMS4gT2J0ZW5lciB0b2tlblxyXG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3QpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiBcIk5vIGhheSBzZXNpw7NuIGFjdGl2YVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMi4gVmVyaWZpY2FyIHNlc2nDs25cclxuICAgIGNvbnN0IFtzZXNpb25lc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHN1LmlkX3VzdWFyaW8sIHUubm9tYnJlLCB1LmFwZWxsaWRvX3BhdGVybm9cclxuICAgICAgRlJPTSBzZXNpb25lc191c3VhcmlvcyBzdVxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gc3UuaWRfdXN1YXJpbyA9IHUuaWRfdXN1YXJpb1xyXG4gICAgICBXSEVSRSBzdS50b2tlbiA9ID9cclxuICAgICAgICBBTkQgc3UuYWN0aXZhID0gMVxyXG4gICAgICAgIEFORCBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKClcclxuICAgICAgICBBTkQgdS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzZXNpb25lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6IFwiU2VzacOzbiBpbnbDoWxpZGEgbyBleHBpcmFkYVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRVc3VhcmlvID0gc2VzaW9uZXNbMF0uaWRfdXN1YXJpbztcclxuXHJcbiAgICAvLyAzLiBWZXJpZmljYXIgcXVlIHNlYSBtw6lkaWNvXHJcbiAgICBjb25zdCBtZWRpY28gPSBhd2FpdCBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oaWRVc3VhcmlvKTtcclxuXHJcbiAgICBpZiAoIW1lZGljbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjpcclxuICAgICAgICAgICAgXCJObyB0aWVuZXMgdW4gcmVnaXN0cm8gZGUgbcOpZGljbyBhY3Rpdm8uIENvbnRhY3RhIGFsIGFkbWluaXN0cmFkb3IuXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA0LiBPYnRlbmVyIHBhcsOhbWV0cm9zIGRlIFVSTFxyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG5cclxuICAgIGNvbnN0IGZpbHRyb3M6IEZpbHRyb3NQYWNpZW50ZXMgPSB7XHJcbiAgICAgIGJ1c3F1ZWRhOiBzZWFyY2hQYXJhbXMuZ2V0KFwiYnVzcXVlZGFcIikgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBlc3RhZG9zOiBzZWFyY2hQYXJhbXMuZ2V0KFwiZXN0YWRvc1wiKT8uc3BsaXQoXCIsXCIpLmZpbHRlcihCb29sZWFuKSxcclxuICAgICAgZ2VuZXJvczogc2VhcmNoUGFyYW1zLmdldChcImdlbmVyb3NcIik/LnNwbGl0KFwiLFwiKS5maWx0ZXIoQm9vbGVhbiksXHJcbiAgICAgIGdydXBvc19zYW5ndWluZW9zOiBzZWFyY2hQYXJhbXNcclxuICAgICAgICAuZ2V0KFwiZ3J1cG9zX3Nhbmd1aW5lb3NcIilcclxuICAgICAgICA/LnNwbGl0KFwiLFwiKVxyXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbiksXHJcbiAgICAgIGVkYWRfbWluOiBzZWFyY2hQYXJhbXMuZ2V0KFwiZWRhZF9taW5cIilcclxuICAgICAgICA/IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoXCJlZGFkX21pblwiKSEpXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIGVkYWRfbWF4OiBzZWFyY2hQYXJhbXMuZ2V0KFwiZWRhZF9tYXhcIilcclxuICAgICAgICA/IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoXCJlZGFkX21heFwiKSEpXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIGNvbl9hbGVyZ2lhczogc2VhcmNoUGFyYW1zLmdldChcImNvbl9hbGVyZ2lhc1wiKVxyXG4gICAgICAgID8gc2VhcmNoUGFyYW1zLmdldChcImNvbl9hbGVyZ2lhc1wiKSA9PT0gXCJ0cnVlXCJcclxuICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICAgY29uX2Nyb25pY2FzOiBzZWFyY2hQYXJhbXMuZ2V0KFwiY29uX2Nyb25pY2FzXCIpXHJcbiAgICAgICAgPyBzZWFyY2hQYXJhbXMuZ2V0KFwiY29uX2Nyb25pY2FzXCIpID09PSBcInRydWVcIlxyXG4gICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgICBjbGFzaWZpY2FjaW9uX3JpZXNnbzogc2VhcmNoUGFyYW1zXHJcbiAgICAgICAgLmdldChcImNsYXNpZmljYWNpb25fcmllc2dvXCIpXHJcbiAgICAgICAgPy5zcGxpdChcIixcIilcclxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pLFxyXG4gICAgICBlc192aXA6IHNlYXJjaFBhcmFtcy5nZXQoXCJlc192aXBcIilcclxuICAgICAgICA/IHNlYXJjaFBhcmFtcy5nZXQoXCJlc192aXBcIikgPT09IFwidHJ1ZVwiXHJcbiAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAgIGNpdWRhZDogc2VhcmNoUGFyYW1zLmdldChcImNpdWRhZFwiKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIGZlY2hhX3JlZ2lzdHJvX2Rlc2RlOiBzZWFyY2hQYXJhbXMuZ2V0KFwiZmVjaGFfcmVnaXN0cm9fZGVzZGVcIikgfHwgdW5kZWZpbmVkLFxyXG4gICAgICBmZWNoYV9yZWdpc3Ryb19oYXN0YTogc2VhcmNoUGFyYW1zLmdldChcImZlY2hhX3JlZ2lzdHJvX2hhc3RhXCIpIHx8IHVuZGVmaW5lZCxcclxuICAgICAgdWx0aW1hX2NvbnN1bHRhX2Rlc2RlOiBzZWFyY2hQYXJhbXMuZ2V0KFwidWx0aW1hX2NvbnN1bHRhX2Rlc2RlXCIpIHx8IHVuZGVmaW5lZCxcclxuICAgICAgdWx0aW1hX2NvbnN1bHRhX2hhc3RhOiBzZWFyY2hQYXJhbXMuZ2V0KFwidWx0aW1hX2NvbnN1bHRhX2hhc3RhXCIpIHx8IHVuZGVmaW5lZCxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcGFnaW5hY2lvbjogUGFnaW5hY2lvblBhcmFtcyA9IHtcclxuICAgICAgcGFnaW5hOiBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KFwicGFnaW5hXCIpIHx8IFwiMVwiKSxcclxuICAgICAgaXRlbXNfcG9yX3BhZ2luYTogcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldChcIml0ZW1zX3Bvcl9wYWdpbmFcIikgfHwgXCIyMFwiKSxcclxuICAgICAgb3JkZW5fY2FtcG86IChzZWFyY2hQYXJhbXMuZ2V0KFwib3JkZW5fY2FtcG9cIikgfHwgXCJub21icmVcIikgYXMgYW55LFxyXG4gICAgICBvcmRlbl9kaXJlY2Npb246IChzZWFyY2hQYXJhbXMuZ2V0KFwib3JkZW5fZGlyZWNjaW9uXCIpIHx8IFwiYXNjXCIpIGFzIGFueSxcclxuICAgIH07XHJcblxyXG4gICAgLy8gNS4gQWN0dWFsaXphciDDumx0aW1hIGFjdGl2aWRhZFxyXG4gICAgYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFVQREFURSBzZXNpb25lc191c3VhcmlvcyBTRVQgdWx0aW1hX2FjdGl2aWRhZCA9IE5PVygpIFdIRVJFIHRva2VuID0gP2AsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIC8vIDYuIE9idGVuZXIgZGF0b3NcclxuICAgIGNvbnN0IFtyZXN1bHRhZG9QYWNpZW50ZXMsIGVzdGFkaXN0aWNhc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIG9idGVuZXJQYWNpZW50ZXMobWVkaWNvLmlkX21lZGljbywgZmlsdHJvcywgcGFnaW5hY2lvbiksXHJcbiAgICAgIG9idGVuZXJFc3RhZGlzdGljYXMobWVkaWNvLmlkX21lZGljbyksXHJcbiAgICBdKTtcclxuXHJcbiAgICAvLyA3LiBSZXNwdWVzdGEgZXhpdG9zYVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBwYWNpZW50ZXM6IHJlc3VsdGFkb1BhY2llbnRlcy5wYWNpZW50ZXMsXHJcbiAgICAgICAgdG90YWw6IHJlc3VsdGFkb1BhY2llbnRlcy50b3RhbCxcclxuICAgICAgICBwYWdpbmFfYWN0dWFsOiBwYWdpbmFjaW9uLnBhZ2luYSxcclxuICAgICAgICBpdGVtc19wb3JfcGFnaW5hOiBwYWdpbmFjaW9uLml0ZW1zX3Bvcl9wYWdpbmEsXHJcbiAgICAgICAgdG90YWxfcGFnaW5hczogTWF0aC5jZWlsKFxyXG4gICAgICAgICAgcmVzdWx0YWRvUGFjaWVudGVzLnRvdGFsIC8gcGFnaW5hY2lvbi5pdGVtc19wb3JfcGFnaW5hXHJcbiAgICAgICAgKSxcclxuICAgICAgICBlc3RhZGlzdGljYXMsXHJcbiAgICAgICAgZmlsdHJvc19hcGxpY2Fkb3M6IGZpbHRyb3MsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIEdFVCAvYXBpL21lZGljby9wYWNpZW50ZXM6XCIsIGVycm9yKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxyXG4gICAgICAgIGRldGFpbHM6XHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBNw4lUT0RPUyBOTyBQRVJNSVRJRE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKCkge1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk3DqXRvZG8gbm8gcGVybWl0aWRvXCIgfSxcclxuICAgIHsgc3RhdHVzOiA0MDUgfVxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQoKSB7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTcOpdG9kbyBubyBwZXJtaXRpZG9cIiB9LFxyXG4gICAgeyBzdGF0dXM6IDQwNSB9XHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURSgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJNw6l0b2RvIG5vIHBlcm1pdGlkb1wiIH0sXHJcbiAgICB7IHN0YXR1czogNDA1IH1cclxuICApO1xyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBvb2wiLCJTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTIiwiZ2V0U2Vzc2lvblRva2VuIiwicmVxdWVzdCIsImNvb2tpZUhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJjb29raWVzIiwic3BsaXQiLCJtYXAiLCJjIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJyZWR1Y2UiLCJhY2MiLCJrIiwicmVzdCIsImpvaW4iLCJuYW1lIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXV0aCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsIm9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyIsImlkVXN1YXJpbyIsInJvd3MiLCJxdWVyeSIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsImNvbnN0cnVpckNvbmRpY2lvbmVzRmlsdHJvcyIsImZpbHRyb3MiLCJwYXJhbXMiLCJjb25kaWNpb25lcyIsImJ1c3F1ZWRhIiwicHVzaCIsInNlYXJjaFRlcm0iLCJlc3RhZG9zIiwicGxhY2Vob2xkZXJzIiwiZ2VuZXJvcyIsImdydXBvc19zYW5ndWluZW9zIiwiZWRhZF9taW4iLCJ1bmRlZmluZWQiLCJlZGFkX21heCIsImNvbl9hbGVyZ2lhcyIsImNvbl9jcm9uaWNhcyIsImNsYXNpZmljYWNpb25fcmllc2dvIiwiZXNfdmlwIiwiY2l1ZGFkIiwiZmVjaGFfcmVnaXN0cm9fZGVzZGUiLCJmZWNoYV9yZWdpc3Ryb19oYXN0YSIsIm9idGVuZXJQYWNpZW50ZXMiLCJpZE1lZGljbyIsInBhZ2luYWNpb24iLCJjb25kaWNpb25lc0ZpbHRyb3MiLCJjYW1wb3NPcmRlbiIsIm5vbWJyZSIsImZlY2hhX3JlZ2lzdHJvIiwidWx0aW1hX2NvbnN1bHRhIiwiZWRhZCIsImVzdGFkbyIsIm9yZGVuU1FMIiwib3JkZW5fY2FtcG8iLCJvcmRlbl9kaXJlY2Npb24iLCJ0b1VwcGVyQ2FzZSIsInF1ZXJ5UGFjaWVudGVzIiwicXVlcnlUb3RhbCIsIm9mZnNldCIsInBhZ2luYSIsIml0ZW1zX3Bvcl9wYWdpbmEiLCJwYXJhbXNDb25zdWx0YSIsInBhY2llbnRlc1Jvd3MiLCJ0b3RhbFJvd3MiLCJQcm9taXNlIiwiYWxsIiwicGFjaWVudGVzIiwicm93IiwiaWRfcGFjaWVudGUiLCJydXQiLCJhcGVsbGlkb19wYXRlcm5vIiwiYXBlbGxpZG9fbWF0ZXJubyIsIm5vbWJyZV9jb21wbGV0byIsImZlY2hhX25hY2ltaWVudG8iLCJnZW5lcm8iLCJlbWFpbCIsInRlbGVmb25vIiwiY2VsdWxhciIsImRpcmVjY2lvbiIsInJlZ2lvbiIsImZvdG9fdXJsIiwiZ3J1cG9fc2FuZ3VpbmVvIiwicHJveGltYV9jaXRhIiwidG90YWxfY29uc3VsdGFzIiwidG90YWxfY2l0YXMiLCJhbGVyZ2lhc19jcml0aWNhcyIsImNvbmRpY2lvbmVzX2Nyb25pY2FzIiwibWVkaWNhbWVudG9zX2FjdGl2b3MiLCJleGFtZW5lc19wZW5kaWVudGVzIiwiZG9jdW1lbnRvc19wZW5kaWVudGVzIiwiaW1jIiwicGVzb19rZyIsImFsdHVyYV9jbSIsImRpYWdub3N0aWNvX3ByaW5jaXBhbCIsIm5vdGFzX2ltcG9ydGFudGVzIiwidGFncyIsIkpTT04iLCJwYXJzZSIsInRvdGFsIiwib2J0ZW5lckVzdGFkaXN0aWNhcyIsImluaWNpb01lcyIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwidG9JU09TdHJpbmciLCJ0b3RhbFBhY2llbnRlcyIsInBhY2llbnRlc0FjdGl2b3MiLCJwYWNpZW50ZXNOdWV2b3NNZXMiLCJwYWNpZW50ZXNWaXAiLCJwYWNpZW50ZXNDcml0aWNvcyIsInByb21lZGlvRWRhZCIsImRpc3RyaWJ1Y2lvbkdlbmVybyIsImRpc3RyaWJ1Y2lvbkdydXBvU2FuZ3VpbmVvIiwicGFjaWVudGVzQ29uQWxlcmdpYXMiLCJwYWNpZW50ZXNDb25Dcm9uaWNhcyIsImNvbnN1bHRhc01lcyIsImNpdGFzUHJvZ3JhbWFkYXMiLCJkaXN0R2VuZXJvIiwibWFzY3VsaW5vIiwiZmVtZW5pbm8iLCJvdHJvIiwiZm9yRWFjaCIsImNhbnRpZGFkIiwiZGlzdEdydXBvU2FuZ3VpbmVvIiwidG90YWxfcGFjaWVudGVzIiwicGFjaWVudGVzX2FjdGl2b3MiLCJwYWNpZW50ZXNfbnVldm9zX21lcyIsInBhY2llbnRlc192aXAiLCJwYWNpZW50ZXNfY3JpdGljb3MiLCJwcm9tZWRpb19lZGFkIiwiTWF0aCIsInJvdW5kIiwicHJvbWVkaW8iLCJkaXN0cmlidWNpb25fZ2VuZXJvIiwiZGlzdHJpYnVjaW9uX2dydXBvX3Nhbmd1aW5lbyIsInBhY2llbnRlc19jb25fYWxlcmdpYXMiLCJwYWNpZW50ZXNfY29uX2Nyb25pY2FzIiwiY29uc3VsdGFzX21lcyIsImNpdGFzX3Byb2dyYW1hZGFzIiwiR0VUIiwic2Vzc2lvblRva2VuIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJzZXNpb25lcyIsImlkX3VzdWFyaW8iLCJtZWRpY28iLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJwYXJzZUludCIsInVsdGltYV9jb25zdWx0YV9kZXNkZSIsInVsdGltYV9jb25zdWx0YV9oYXN0YSIsInJlc3VsdGFkb1BhY2llbnRlcyIsImVzdGFkaXN0aWNhcyIsImlkX21lZGljbyIsInBhZ2luYV9hY3R1YWwiLCJ0b3RhbF9wYWdpbmFzIiwiY2VpbCIsImZpbHRyb3NfYXBsaWNhZG9zIiwidGltZXN0YW1wIiwiZGV0YWlscyIsInByb2Nlc3MiLCJtZXNzYWdlIiwiUE9TVCIsIlBVVCIsIkRFTEVURSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/medico/pacientes/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// 📦 Archivo: src/lib/db.ts\n// 🧠 Descripción: Configuración central de conexión a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// 🔗 Conexión al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// 🧩 Función genérica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"❌ Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// 👤 Obtener usuario por email o username (para login o validaciones)\n// ✅ Versión que PRIORIZA el rol MÉDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) médico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) técnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// 🔒 Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// 📊 Ejemplo de utilidad: obtener estadísticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// 🔌 NUEVO: obtener una conexión dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexión\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// 🔁 NUEVO (opcional): helper para ejecutar en transacción\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// 🔁 Exportar conexión global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fpacientes%2Froute&page=%2Fapi%2Fmedico%2Fpacientes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fpacientes%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();