/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/medico/perfil/route";
exports.ids = ["app/api/medico/perfil/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fperfil%2Froute&page=%2Fapi%2Fmedico%2Fperfil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fperfil%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fperfil%2Froute&page=%2Fapi%2Fmedico%2Fperfil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fperfil%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_perfil_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/medico/perfil/route.ts */ \"(rsc)/./src/app/api/medico/perfil/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/medico/perfil/route\",\n        pathname: \"/api/medico/perfil\",\n        filename: \"route\",\n        bundlePath: \"app/api/medico/perfil/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\medico\\\\perfil\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_perfil_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/medico/perfil/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZWRpY28lMkZwZXJmaWwlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1lZGljbyUyRnBlcmZpbCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1lZGljbyUyRnBlcmZpbCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUM7QUFDaEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz9iY2EzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxccGVyZmlsXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tZWRpY28vcGVyZmlsL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWVkaWNvL3BlcmZpbFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVkaWNvL3BlcmZpbC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxccGVyZmlsXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL21lZGljby9wZXJmaWwvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fperfil%2Froute&page=%2Fapi%2Fmedico%2Fperfil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fperfil%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/medico/perfil/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/medico/perfil/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n// app/api/usuario/perfil/route.ts\n\n\n\n\n// si estás en app router con node:\nconst dynamic = \"force-dynamic\";\n// ========================================\n// COOKIES QUE VAMOS A PROBAR\n// (igual que en /api/medico/agenda)\n// ========================================\nconst SESSION_COOKIE_CANDIDATES = [\n    \"session\",\n    \"session_token\",\n    \"medisalud_session\",\n    \"auth_session\",\n    \"next-auth.session-token\",\n    \"__Secure-next-auth.session-token\"\n];\n// ========================================\n// HELPERS\n// ========================================\nfunction getSessionToken(request) {\n    const cookieHeader = request.headers.get(\"cookie\") || \"\";\n    if (cookieHeader) {\n        const cookies = cookieHeader.split(\";\").map((c)=>c.trim()).filter(Boolean).reduce((acc, c)=>{\n            const [k, ...rest] = c.split(\"=\");\n            acc[k] = rest.join(\"=\");\n            return acc;\n        }, {});\n        for (const name of SESSION_COOKIE_CANDIDATES){\n            if (cookies[name]) {\n                return decodeURIComponent(cookies[name]);\n            }\n        }\n    }\n    const auth = request.headers.get(\"authorization\");\n    if (auth?.startsWith(\"Bearer \")) {\n        return auth.slice(7);\n    }\n    return null;\n}\n/**\r\n * Devuelve el perfil completo del usuario autenticado,\r\n * incluyendo rol y (si existe) el médico.\r\n */ async function cargarPerfilUsuario(idUsuario) {\n    // 1. Datos base de usuario + rol principal (el de mayor jerarquía)\n    const [usuarios] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n    SELECT \r\n      u.id_usuario,\r\n      u.username,\r\n      u.email,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.apellido_materno,\r\n      u.foto_perfil_url,\r\n      u.telefono,\r\n      u.celular,\r\n      u.direccion,\r\n      u.ciudad,\r\n      u.region,\r\n      DATE_FORMAT(u.fecha_nacimiento, '%Y-%m-%d') AS fecha_nacimiento,\r\n      u.genero,\r\n      r.id_rol,\r\n      r.nombre AS rol_nombre,\r\n      r.nivel_jerarquia\r\n    FROM usuarios u\r\n    LEFT JOIN usuarios_roles ur \r\n      ON ur.id_usuario = u.id_usuario AND ur.activo = 1\r\n    LEFT JOIN roles r \r\n      ON r.id_rol = ur.id_rol\r\n    WHERE u.id_usuario = ?\r\n    ORDER BY r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n    `, [\n        idUsuario\n    ]);\n    if (usuarios.length === 0) {\n        return null;\n    }\n    const u = usuarios[0];\n    // 2. Ver si el usuario es médico\n    const [medicos] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n    SELECT \r\n      m.id_medico,\r\n      m.id_usuario,\r\n      m.numero_registro_medico,\r\n      m.titulo_profesional,\r\n      m.universidad,\r\n      m.ano_graduacion,\r\n      m.anos_experiencia,\r\n      m.biografia,\r\n      m.id_centro_principal,\r\n      m.calificacion_promedio,\r\n      m.numero_opiniones,\r\n      m.acepta_nuevos_pacientes,\r\n      m.atiende_particular,\r\n      m.atiende_fonasa,\r\n      m.atiende_isapre,\r\n      m.consulta_presencial,\r\n      m.consulta_telemedicina,\r\n      m.duracion_consulta_min,\r\n      m.firma_digital,\r\n      m.firma_digital_url,\r\n      m.estado,\r\n      cm.nombre AS centro_nombre,\r\n      cm.logo_url AS centro_logo_url,\r\n      cm.ciudad AS centro_ciudad,\r\n      cm.region AS centro_region,\r\n      cm.direccion AS centro_direccion,\r\n      cm.telefono_principal AS centro_telefono_principal,\r\n      cm.email_contacto AS centro_email_contacto,\r\n      cm.sitio_web AS centro_sitio_web\r\n      -- no tienes columna plan en centros_medicos, devolvemos 'basico'\r\n    FROM medicos m\r\n    LEFT JOIN centros_medicos cm ON cm.id_centro = m.id_centro_principal\r\n    WHERE m.id_usuario = ? AND m.estado IN ('activo','suspendido')\r\n    LIMIT 1\r\n    `, [\n        idUsuario\n    ]);\n    let medicoData = undefined;\n    if (medicos.length > 0) {\n        const m = medicos[0];\n        // 2b. Especialidades del médico\n        const [especialidades] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        me.id_especialidad,\r\n        e.nombre,\r\n        me.es_principal,\r\n        me.anos_experiencia,\r\n        me.certificado_url,\r\n        DATE_FORMAT(me.fecha_certificacion, '%Y-%m-%d') AS fecha_certificacion,\r\n        me.institucion_certificadora\r\n      FROM medicos_especialidades me\r\n      INNER JOIN especialidades e ON e.id_especialidad = me.id_especialidad\r\n      WHERE me.id_medico = ?\r\n      ORDER BY me.es_principal DESC, e.nombre ASC\r\n      `, [\n            m.id_medico\n        ]);\n        medicoData = {\n            id_medico: m.id_medico,\n            numero_registro_medico: m.numero_registro_medico,\n            titulo_profesional: m.titulo_profesional,\n            universidad: m.universidad,\n            ano_graduacion: Number(m.ano_graduacion),\n            anos_experiencia: Number(m.anos_experiencia),\n            biografia: m.biografia,\n            especialidades: especialidades.map((esp)=>({\n                    id_especialidad: esp.id_especialidad,\n                    nombre: esp.nombre,\n                    es_principal: esp.es_principal === 1,\n                    anos_experiencia: esp.anos_experiencia !== null ? Number(esp.anos_experiencia) : null,\n                    certificado_url: esp.certificado_url,\n                    fecha_certificacion: esp.fecha_certificacion,\n                    institucion_certificadora: esp.institucion_certificadora\n                })),\n            id_centro_principal: m.id_centro_principal,\n            centro_principal: {\n                id_centro: m.id_centro_principal,\n                nombre: m.centro_nombre,\n                plan: \"basico\",\n                logo_url: m.centro_logo_url,\n                ciudad: m.centro_ciudad,\n                region: m.centro_region,\n                direccion: m.centro_direccion,\n                telefono_principal: m.centro_telefono_principal,\n                email_contacto: m.centro_email_contacto,\n                sitio_web: m.centro_sitio_web\n            },\n            calificacion_promedio: Number(m.calificacion_promedio || 0),\n            numero_opiniones: Number(m.numero_opiniones || 0),\n            acepta_nuevos_pacientes: m.acepta_nuevos_pacientes === 1,\n            atiende_particular: m.atiende_particular === 1,\n            atiende_fonasa: m.atiende_fonasa === 1,\n            atiende_isapre: m.atiende_isapre === 1,\n            consulta_presencial: m.consulta_presencial === 1,\n            consulta_telemedicina: m.consulta_telemedicina === 1,\n            duracion_consulta_min: Number(m.duracion_consulta_min || 30),\n            firma_digital: m.firma_digital === 1,\n            firma_digital_url: m.firma_digital_url,\n            estado: m.estado\n        };\n    }\n    const perfil = {\n        id_usuario: u.id_usuario,\n        username: u.username,\n        email: u.email,\n        nombre: u.nombre,\n        apellido_paterno: u.apellido_paterno,\n        apellido_materno: u.apellido_materno,\n        foto_perfil_url: u.foto_perfil_url,\n        telefono: u.telefono,\n        celular: u.celular,\n        direccion: u.direccion,\n        ciudad: u.ciudad,\n        region: u.region,\n        fecha_nacimiento: u.fecha_nacimiento,\n        genero: u.genero,\n        rol: {\n            id_rol: u.id_rol || 0,\n            nombre: u.rol_nombre || \"sin_rol\",\n            nivel_jerarquia: u.nivel_jerarquia || 0\n        },\n        ...medicoData ? {\n            medico: medicoData\n        } : {}\n    };\n    return perfil;\n}\n/**\r\n * Guarda una imagen base64 en /public/uploads/perfiles y devuelve la URL\r\n */ async function guardarImagenBase64(base64, idUsuario) {\n    // limpia el header data:image/png;base64,...\n    const matches = base64.match(/^data:(image\\/\\w+);base64,(.+)$/);\n    const mime = matches ? matches[1] : \"image/png\";\n    const data = matches ? matches[2] : base64;\n    const buffer = Buffer.from(data, \"base64\");\n    const ext = mime.split(\"/\")[1] || \"png\";\n    const uploadDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", \"uploads\", \"perfiles\");\n    await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().mkdir(uploadDir, {\n        recursive: true\n    });\n    const filename = `perfil-${idUsuario}-${Date.now()}.${ext}`;\n    const filepath = path__WEBPACK_IMPORTED_MODULE_3___default().join(uploadDir, filename);\n    await fs_promises__WEBPACK_IMPORTED_MODULE_2___default().writeFile(filepath, buffer);\n    // la URL pública\n    return `/uploads/perfiles/${filename}`;\n}\n// ========================================\n// GET - obtener el perfil del usuario logueado\n// ========================================\nasync function GET(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        // validar sesión\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON u.id_usuario = su.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND (su.fecha_expiracion IS NULL OR su.fecha_expiracion > NOW())\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        // actualizar última actividad\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE sesiones_usuarios SET ultima_actividad = NOW() WHERE token = ?`, [\n            sessionToken\n        ]);\n        const perfil = await cargarPerfilUsuario(idUsuario);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            perfil,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en GET /api/usuario/perfil:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// POST - guardar foto de perfil\n// espera { foto_base64: string } o { foto_perfil_url: string }\n// ========================================\nasync function POST(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON u.id_usuario = su.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND (su.fecha_expiracion IS NULL OR su.fecha_expiracion > NOW())\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const body = await request.json();\n        let nuevaUrl = null;\n        if (body.foto_base64) {\n            nuevaUrl = await guardarImagenBase64(body.foto_base64, idUsuario);\n        } else if (body.foto_perfil_url) {\n            // si desde el front ya subiste la imagen a otro lado y solo mandas la URL\n            nuevaUrl = body.foto_perfil_url;\n        } else {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No se envi\\xf3 foto_base64 ni foto_perfil_url\"\n            }, {\n                status: 400\n            });\n        }\n        // actualizar en DB\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE usuarios SET foto_perfil_url = ?, fecha_modificacion = NOW() WHERE id_usuario = ?`, [\n            nuevaUrl,\n            idUsuario\n        ]);\n        // devolver perfil actualizado\n        const perfil = await cargarPerfilUsuario(idUsuario);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Foto de perfil actualizada\",\n            foto_perfil_url: nuevaUrl,\n            perfil\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en POST /api/usuario/perfil:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// PUT - actualizar datos básicos del perfil\n// (nombre, apellidos, teléfonos, dirección, etc.)\n// ========================================\nasync function PUT(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON u.id_usuario = su.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND (su.fecha_expiracion IS NULL OR su.fecha_expiracion > NOW())\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const body = await request.json();\n        const campos = [];\n        const params = [];\n        const updatableFields = [\n            \"nombre\",\n            \"apellido_paterno\",\n            \"apellido_materno\",\n            \"telefono\",\n            \"celular\",\n            \"direccion\",\n            \"ciudad\",\n            \"region\",\n            \"genero\",\n            \"fecha_nacimiento\"\n        ];\n        for (const f of updatableFields){\n            if (body[f] !== undefined) {\n                campos.push(`${f} = ?`);\n                params.push(body[f]);\n            }\n        }\n        if (campos.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay campos para actualizar\"\n            }, {\n                status: 400\n            });\n        }\n        params.push(idUsuario);\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE usuarios SET ${campos.join(\", \")}, fecha_modificacion = NOW() WHERE id_usuario = ?`, params);\n        const perfil = await cargarPerfilUsuario(idUsuario);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Perfil actualizado\",\n            perfil\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en PUT /api/usuario/perfil:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZWRpY28vcGVyZmlsL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxrQ0FBa0M7QUFDc0I7QUFDNUI7QUFFQztBQUNMO0FBRXhCLG1DQUFtQztBQUM1QixNQUFNSSxVQUFVLGdCQUFnQjtBQXNFdkMsMkNBQTJDO0FBQzNDLDZCQUE2QjtBQUM3QixvQ0FBb0M7QUFDcEMsMkNBQTJDO0FBQzNDLE1BQU1DLDRCQUE0QjtJQUNoQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELDJDQUEyQztBQUMzQyxVQUFVO0FBQ1YsMkNBQTJDO0FBQzNDLFNBQVNDLGdCQUFnQkMsT0FBb0I7SUFDM0MsTUFBTUMsZUFBZUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYTtJQUV0RCxJQUFJRixjQUFjO1FBQ2hCLE1BQU1HLFVBQVVILGFBQ2JJLEtBQUssQ0FBQyxLQUNOQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsSUFBSSxJQUNqQkMsTUFBTSxDQUFDQyxTQUNQQyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0w7WUFDWixNQUFNLENBQUNNLEdBQUcsR0FBR0MsS0FBSyxHQUFHUCxFQUFFRixLQUFLLENBQUM7WUFDN0JPLEdBQUcsQ0FBQ0MsRUFBRSxHQUFHQyxLQUFLQyxJQUFJLENBQUM7WUFDbkIsT0FBT0g7UUFDVCxHQUFHLENBQUM7UUFFTixLQUFLLE1BQU1JLFFBQVFsQiwwQkFBMkI7WUFDNUMsSUFBSU0sT0FBTyxDQUFDWSxLQUFLLEVBQUU7Z0JBQ2pCLE9BQU9DLG1CQUFtQmIsT0FBTyxDQUFDWSxLQUFLO1lBQ3pDO1FBQ0Y7SUFDRjtJQUVBLE1BQU1FLE9BQU9sQixRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNqQyxJQUFJZSxNQUFNQyxXQUFXLFlBQVk7UUFDL0IsT0FBT0QsS0FBS0UsS0FBSyxDQUFDO0lBQ3BCO0lBRUEsT0FBTztBQUNUO0FBRUE7OztDQUdDLEdBQ0QsZUFB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SUFFbEIsRUFBRSxPQUFPRCxPQUFZO1FBQ25CSyxRQUFRTCxLQUFLLENBQUMsdUNBQXVDQTtRQUNyRCxPQUFPN0gsa0ZBQVlBLENBQUMySCxJQUFJLENBQ3RCO1lBQ0VDLFNBQVM7WUFDVEMsT0FBTztZQUNQTSxTQUFTbkIsS0FBc0MsR0FBR2EsTUFBTU8sT0FBTyxHQUFHaEcsQ0FBU0E7UUFDN0UsR0FDQTtZQUFFMEYsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLy4vc3JjL2FwcC9hcGkvbWVkaWNvL3BlcmZpbC9yb3V0ZS50cz84Y2M2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9hcGkvdXN1YXJpby9wZXJmaWwvcm91dGUudHNcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xyXG5pbXBvcnQgcG9vbCBmcm9tIFwiQC9saWIvZGJcIjtcclxuaW1wb3J0IHsgUm93RGF0YVBhY2tldCB9IGZyb20gXCJteXNxbDJcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xyXG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xyXG5cclxuLy8gc2kgZXN0w6FzIGVuIGFwcCByb3V0ZXIgY29uIG5vZGU6XHJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFRJUE9TXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuaW50ZXJmYWNlIFVzdWFyaW9TZXNpb24ge1xyXG4gIGlkX3VzdWFyaW86IG51bWJlcjtcclxuICB1c2VybmFtZTogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgbm9tYnJlOiBzdHJpbmc7XHJcbiAgYXBlbGxpZG9fcGF0ZXJubzogc3RyaW5nO1xyXG4gIGFwZWxsaWRvX21hdGVybm86IHN0cmluZyB8IG51bGw7XHJcbiAgZm90b19wZXJmaWxfdXJsOiBzdHJpbmcgfCBudWxsO1xyXG4gIHRlbGVmb25vOiBzdHJpbmcgfCBudWxsO1xyXG4gIGNlbHVsYXI6IHN0cmluZyB8IG51bGw7XHJcbiAgZGlyZWNjaW9uOiBzdHJpbmcgfCBudWxsO1xyXG4gIGNpdWRhZDogc3RyaW5nIHwgbnVsbDtcclxuICByZWdpb246IHN0cmluZyB8IG51bGw7XHJcbiAgZmVjaGFfbmFjaW1pZW50bzogc3RyaW5nIHwgbnVsbDtcclxuICBnZW5lcm86IHN0cmluZyB8IG51bGw7XHJcbiAgcm9sOiB7XHJcbiAgICBpZF9yb2w6IG51bWJlcjtcclxuICAgIG5vbWJyZTogc3RyaW5nO1xyXG4gICAgbml2ZWxfamVyYXJxdWlhOiBudW1iZXI7XHJcbiAgfTtcclxuICBtZWRpY28/OiB7XHJcbiAgICBpZF9tZWRpY286IG51bWJlcjtcclxuICAgIG51bWVyb19yZWdpc3Ryb19tZWRpY286IHN0cmluZztcclxuICAgIHRpdHVsb19wcm9mZXNpb25hbDogc3RyaW5nO1xyXG4gICAgdW5pdmVyc2lkYWQ6IHN0cmluZztcclxuICAgIGFub19ncmFkdWFjaW9uOiBudW1iZXI7XHJcbiAgICBhbm9zX2V4cGVyaWVuY2lhOiBudW1iZXI7XHJcbiAgICBiaW9ncmFmaWE6IHN0cmluZyB8IG51bGw7XHJcbiAgICBlc3BlY2lhbGlkYWRlczogQXJyYXk8e1xyXG4gICAgICBpZF9lc3BlY2lhbGlkYWQ6IG51bWJlcjtcclxuICAgICAgbm9tYnJlOiBzdHJpbmc7XHJcbiAgICAgIGVzX3ByaW5jaXBhbDogYm9vbGVhbjtcclxuICAgICAgYW5vc19leHBlcmllbmNpYTogbnVtYmVyIHwgbnVsbDtcclxuICAgICAgY2VydGlmaWNhZG9fdXJsOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgICBmZWNoYV9jZXJ0aWZpY2FjaW9uOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgICBpbnN0aXR1Y2lvbl9jZXJ0aWZpY2Fkb3JhOiBzdHJpbmcgfCBudWxsO1xyXG4gICAgfT47XHJcbiAgICBpZF9jZW50cm9fcHJpbmNpcGFsOiBudW1iZXI7XHJcbiAgICBjZW50cm9fcHJpbmNpcGFsOiB7XHJcbiAgICAgIGlkX2NlbnRybzogbnVtYmVyO1xyXG4gICAgICBub21icmU6IHN0cmluZztcclxuICAgICAgcGxhbjogXCJiYXNpY29cIiB8IFwicHJvZmVzaW9uYWxcIiB8IFwiZW50ZXJwcmlzZVwiO1xyXG4gICAgICBsb2dvX3VybDogc3RyaW5nIHwgbnVsbDtcclxuICAgICAgY2l1ZGFkOiBzdHJpbmc7XHJcbiAgICAgIHJlZ2lvbjogc3RyaW5nO1xyXG4gICAgICBkaXJlY2Npb246IHN0cmluZztcclxuICAgICAgdGVsZWZvbm9fcHJpbmNpcGFsOiBzdHJpbmc7XHJcbiAgICAgIGVtYWlsX2NvbnRhY3RvOiBzdHJpbmc7XHJcbiAgICAgIHNpdGlvX3dlYjogc3RyaW5nIHwgbnVsbDtcclxuICAgIH07XHJcbiAgICBjYWxpZmljYWNpb25fcHJvbWVkaW86IG51bWJlcjtcclxuICAgIG51bWVyb19vcGluaW9uZXM6IG51bWJlcjtcclxuICAgIGFjZXB0YV9udWV2b3NfcGFjaWVudGVzOiBib29sZWFuO1xyXG4gICAgYXRpZW5kZV9wYXJ0aWN1bGFyOiBib29sZWFuO1xyXG4gICAgYXRpZW5kZV9mb25hc2E6IGJvb2xlYW47XHJcbiAgICBhdGllbmRlX2lzYXByZTogYm9vbGVhbjtcclxuICAgIGNvbnN1bHRhX3ByZXNlbmNpYWw6IGJvb2xlYW47XHJcbiAgICBjb25zdWx0YV90ZWxlbWVkaWNpbmE6IGJvb2xlYW47XHJcbiAgICBkdXJhY2lvbl9jb25zdWx0YV9taW46IG51bWJlcjtcclxuICAgIGZpcm1hX2RpZ2l0YWw6IGJvb2xlYW47XHJcbiAgICBmaXJtYV9kaWdpdGFsX3VybDogc3RyaW5nIHwgbnVsbDtcclxuICAgIGVzdGFkbzogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ09PS0lFUyBRVUUgVkFNT1MgQSBQUk9CQVJcclxuLy8gKGlndWFsIHF1ZSBlbiAvYXBpL21lZGljby9hZ2VuZGEpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUyA9IFtcclxuICBcInNlc3Npb25cIixcclxuICBcInNlc3Npb25fdG9rZW5cIixcclxuICBcIm1lZGlzYWx1ZF9zZXNzaW9uXCIsXHJcbiAgXCJhdXRoX3Nlc3Npb25cIixcclxuICBcIm5leHQtYXV0aC5zZXNzaW9uLXRva2VuXCIsXHJcbiAgXCJfX1NlY3VyZS1uZXh0LWF1dGguc2Vzc2lvbi10b2tlblwiLFxyXG5dO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBIRUxQRVJTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZnVuY3Rpb24gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgY29uc3QgY29va2llSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImNvb2tpZVwiKSB8fCBcIlwiO1xyXG5cclxuICBpZiAoY29va2llSGVhZGVyKSB7XHJcbiAgICBjb25zdCBjb29raWVzID0gY29va2llSGVhZGVyXHJcbiAgICAgIC5zcGxpdChcIjtcIilcclxuICAgICAgLm1hcCgoYykgPT4gYy50cmltKCkpXHJcbiAgICAgIC5maWx0ZXIoQm9vbGVhbilcclxuICAgICAgLnJlZHVjZSgoYWNjLCBjKSA9PiB7XHJcbiAgICAgICAgY29uc3QgW2ssIC4uLnJlc3RdID0gYy5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgYWNjW2tdID0gcmVzdC5qb2luKFwiPVwiKTtcclxuICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG5hbWUgb2YgU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUykge1xyXG4gICAgICBpZiAoY29va2llc1tuYW1lXSkge1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY29va2llc1tuYW1lXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IGF1dGggPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiYXV0aG9yaXphdGlvblwiKTtcclxuICBpZiAoYXV0aD8uc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcclxuICAgIHJldHVybiBhdXRoLnNsaWNlKDcpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXZ1ZWx2ZSBlbCBwZXJmaWwgY29tcGxldG8gZGVsIHVzdWFyaW8gYXV0ZW50aWNhZG8sXHJcbiAqIGluY2x1eWVuZG8gcm9sIHkgKHNpIGV4aXN0ZSkgZWwgbcOpZGljby5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNhcmdhclBlcmZpbFVzdWFyaW8oXHJcbiAgaWRVc3VhcmlvOiBudW1iZXJcclxuKTogUHJvbWlzZTxVc3VhcmlvU2VzaW9uIHwgbnVsbD4ge1xyXG4gIC8vIDEuIERhdG9zIGJhc2UgZGUgdXN1YXJpbyArIHJvbCBwcmluY2lwYWwgKGVsIGRlIG1heW9yIGplcmFycXXDrWEpXHJcbiAgY29uc3QgW3VzdWFyaW9zXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgIFNFTEVDVCBcclxuICAgICAgdS5pZF91c3VhcmlvLFxyXG4gICAgICB1LnVzZXJuYW1lLFxyXG4gICAgICB1LmVtYWlsLFxyXG4gICAgICB1Lm5vbWJyZSxcclxuICAgICAgdS5hcGVsbGlkb19wYXRlcm5vLFxyXG4gICAgICB1LmFwZWxsaWRvX21hdGVybm8sXHJcbiAgICAgIHUuZm90b19wZXJmaWxfdXJsLFxyXG4gICAgICB1LnRlbGVmb25vLFxyXG4gICAgICB1LmNlbHVsYXIsXHJcbiAgICAgIHUuZGlyZWNjaW9uLFxyXG4gICAgICB1LmNpdWRhZCxcclxuICAgICAgdS5yZWdpb24sXHJcbiAgICAgIERBVEVfRk9STUFUKHUuZmVjaGFfbmFjaW1pZW50bywgJyVZLSVtLSVkJykgQVMgZmVjaGFfbmFjaW1pZW50byxcclxuICAgICAgdS5nZW5lcm8sXHJcbiAgICAgIHIuaWRfcm9sLFxyXG4gICAgICByLm5vbWJyZSBBUyByb2xfbm9tYnJlLFxyXG4gICAgICByLm5pdmVsX2plcmFycXVpYVxyXG4gICAgRlJPTSB1c3VhcmlvcyB1XHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHVyLmlkX3VzdWFyaW8gPSB1LmlkX3VzdWFyaW8gQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIExFRlQgSk9JTiByb2xlcyByIFxyXG4gICAgICBPTiByLmlkX3JvbCA9IHVyLmlkX3JvbFxyXG4gICAgV0hFUkUgdS5pZF91c3VhcmlvID0gP1xyXG4gICAgT1JERVIgQlkgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gICAgYCxcclxuICAgIFtpZFVzdWFyaW9dXHJcbiAgKTtcclxuXHJcbiAgaWYgKHVzdWFyaW9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBjb25zdCB1ID0gdXN1YXJpb3NbMF07XHJcblxyXG4gIC8vIDIuIFZlciBzaSBlbCB1c3VhcmlvIGVzIG3DqWRpY29cclxuICBjb25zdCBbbWVkaWNvc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIG0uaWRfbWVkaWNvLFxyXG4gICAgICBtLmlkX3VzdWFyaW8sXHJcbiAgICAgIG0ubnVtZXJvX3JlZ2lzdHJvX21lZGljbyxcclxuICAgICAgbS50aXR1bG9fcHJvZmVzaW9uYWwsXHJcbiAgICAgIG0udW5pdmVyc2lkYWQsXHJcbiAgICAgIG0uYW5vX2dyYWR1YWNpb24sXHJcbiAgICAgIG0uYW5vc19leHBlcmllbmNpYSxcclxuICAgICAgbS5iaW9ncmFmaWEsXHJcbiAgICAgIG0uaWRfY2VudHJvX3ByaW5jaXBhbCxcclxuICAgICAgbS5jYWxpZmljYWNpb25fcHJvbWVkaW8sXHJcbiAgICAgIG0ubnVtZXJvX29waW5pb25lcyxcclxuICAgICAgbS5hY2VwdGFfbnVldm9zX3BhY2llbnRlcyxcclxuICAgICAgbS5hdGllbmRlX3BhcnRpY3VsYXIsXHJcbiAgICAgIG0uYXRpZW5kZV9mb25hc2EsXHJcbiAgICAgIG0uYXRpZW5kZV9pc2FwcmUsXHJcbiAgICAgIG0uY29uc3VsdGFfcHJlc2VuY2lhbCxcclxuICAgICAgbS5jb25zdWx0YV90ZWxlbWVkaWNpbmEsXHJcbiAgICAgIG0uZHVyYWNpb25fY29uc3VsdGFfbWluLFxyXG4gICAgICBtLmZpcm1hX2RpZ2l0YWwsXHJcbiAgICAgIG0uZmlybWFfZGlnaXRhbF91cmwsXHJcbiAgICAgIG0uZXN0YWRvLFxyXG4gICAgICBjbS5ub21icmUgQVMgY2VudHJvX25vbWJyZSxcclxuICAgICAgY20ubG9nb191cmwgQVMgY2VudHJvX2xvZ29fdXJsLFxyXG4gICAgICBjbS5jaXVkYWQgQVMgY2VudHJvX2NpdWRhZCxcclxuICAgICAgY20ucmVnaW9uIEFTIGNlbnRyb19yZWdpb24sXHJcbiAgICAgIGNtLmRpcmVjY2lvbiBBUyBjZW50cm9fZGlyZWNjaW9uLFxyXG4gICAgICBjbS50ZWxlZm9ub19wcmluY2lwYWwgQVMgY2VudHJvX3RlbGVmb25vX3ByaW5jaXBhbCxcclxuICAgICAgY20uZW1haWxfY29udGFjdG8gQVMgY2VudHJvX2VtYWlsX2NvbnRhY3RvLFxyXG4gICAgICBjbS5zaXRpb193ZWIgQVMgY2VudHJvX3NpdGlvX3dlYlxyXG4gICAgICAtLSBubyB0aWVuZXMgY29sdW1uYSBwbGFuIGVuIGNlbnRyb3NfbWVkaWNvcywgZGV2b2x2ZW1vcyAnYmFzaWNvJ1xyXG4gICAgRlJPTSBtZWRpY29zIG1cclxuICAgIExFRlQgSk9JTiBjZW50cm9zX21lZGljb3MgY20gT04gY20uaWRfY2VudHJvID0gbS5pZF9jZW50cm9fcHJpbmNpcGFsXHJcbiAgICBXSEVSRSBtLmlkX3VzdWFyaW8gPSA/IEFORCBtLmVzdGFkbyBJTiAoJ2FjdGl2bycsJ3N1c3BlbmRpZG8nKVxyXG4gICAgTElNSVQgMVxyXG4gICAgYCxcclxuICAgIFtpZFVzdWFyaW9dXHJcbiAgKTtcclxuXHJcbiAgbGV0IG1lZGljb0RhdGE6IFVzdWFyaW9TZXNpb25bXCJtZWRpY29cIl0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGlmIChtZWRpY29zLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IG0gPSBtZWRpY29zWzBdO1xyXG5cclxuICAgIC8vIDJiLiBFc3BlY2lhbGlkYWRlcyBkZWwgbcOpZGljb1xyXG4gICAgY29uc3QgW2VzcGVjaWFsaWRhZGVzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgbWUuaWRfZXNwZWNpYWxpZGFkLFxyXG4gICAgICAgIGUubm9tYnJlLFxyXG4gICAgICAgIG1lLmVzX3ByaW5jaXBhbCxcclxuICAgICAgICBtZS5hbm9zX2V4cGVyaWVuY2lhLFxyXG4gICAgICAgIG1lLmNlcnRpZmljYWRvX3VybCxcclxuICAgICAgICBEQVRFX0ZPUk1BVChtZS5mZWNoYV9jZXJ0aWZpY2FjaW9uLCAnJVktJW0tJWQnKSBBUyBmZWNoYV9jZXJ0aWZpY2FjaW9uLFxyXG4gICAgICAgIG1lLmluc3RpdHVjaW9uX2NlcnRpZmljYWRvcmFcclxuICAgICAgRlJPTSBtZWRpY29zX2VzcGVjaWFsaWRhZGVzIG1lXHJcbiAgICAgIElOTkVSIEpPSU4gZXNwZWNpYWxpZGFkZXMgZSBPTiBlLmlkX2VzcGVjaWFsaWRhZCA9IG1lLmlkX2VzcGVjaWFsaWRhZFxyXG4gICAgICBXSEVSRSBtZS5pZF9tZWRpY28gPSA/XHJcbiAgICAgIE9SREVSIEJZIG1lLmVzX3ByaW5jaXBhbCBERVNDLCBlLm5vbWJyZSBBU0NcclxuICAgICAgYCxcclxuICAgICAgW20uaWRfbWVkaWNvXVxyXG4gICAgKTtcclxuXHJcbiAgICBtZWRpY29EYXRhID0ge1xyXG4gICAgICBpZF9tZWRpY286IG0uaWRfbWVkaWNvLFxyXG4gICAgICBudW1lcm9fcmVnaXN0cm9fbWVkaWNvOiBtLm51bWVyb19yZWdpc3Ryb19tZWRpY28sXHJcbiAgICAgIHRpdHVsb19wcm9mZXNpb25hbDogbS50aXR1bG9fcHJvZmVzaW9uYWwsXHJcbiAgICAgIHVuaXZlcnNpZGFkOiBtLnVuaXZlcnNpZGFkLFxyXG4gICAgICBhbm9fZ3JhZHVhY2lvbjogTnVtYmVyKG0uYW5vX2dyYWR1YWNpb24pLFxyXG4gICAgICBhbm9zX2V4cGVyaWVuY2lhOiBOdW1iZXIobS5hbm9zX2V4cGVyaWVuY2lhKSxcclxuICAgICAgYmlvZ3JhZmlhOiBtLmJpb2dyYWZpYSxcclxuICAgICAgZXNwZWNpYWxpZGFkZXM6IGVzcGVjaWFsaWRhZGVzLm1hcCgoZXNwKSA9PiAoe1xyXG4gICAgICAgIGlkX2VzcGVjaWFsaWRhZDogZXNwLmlkX2VzcGVjaWFsaWRhZCxcclxuICAgICAgICBub21icmU6IGVzcC5ub21icmUsXHJcbiAgICAgICAgZXNfcHJpbmNpcGFsOiBlc3AuZXNfcHJpbmNpcGFsID09PSAxLFxyXG4gICAgICAgIGFub3NfZXhwZXJpZW5jaWE6XHJcbiAgICAgICAgICBlc3AuYW5vc19leHBlcmllbmNpYSAhPT0gbnVsbCA/IE51bWJlcihlc3AuYW5vc19leHBlcmllbmNpYSkgOiBudWxsLFxyXG4gICAgICAgIGNlcnRpZmljYWRvX3VybDogZXNwLmNlcnRpZmljYWRvX3VybCxcclxuICAgICAgICBmZWNoYV9jZXJ0aWZpY2FjaW9uOiBlc3AuZmVjaGFfY2VydGlmaWNhY2lvbixcclxuICAgICAgICBpbnN0aXR1Y2lvbl9jZXJ0aWZpY2Fkb3JhOiBlc3AuaW5zdGl0dWNpb25fY2VydGlmaWNhZG9yYSxcclxuICAgICAgfSkpLFxyXG4gICAgICBpZF9jZW50cm9fcHJpbmNpcGFsOiBtLmlkX2NlbnRyb19wcmluY2lwYWwsXHJcbiAgICAgIGNlbnRyb19wcmluY2lwYWw6IHtcclxuICAgICAgICBpZF9jZW50cm86IG0uaWRfY2VudHJvX3ByaW5jaXBhbCxcclxuICAgICAgICBub21icmU6IG0uY2VudHJvX25vbWJyZSxcclxuICAgICAgICBwbGFuOiBcImJhc2ljb1wiLCAvLyBubyBleGlzdGUgZW4gbGEgdGFibGEsIGRldm9sdmVtb3MgYWxnbyB2w6FsaWRvXHJcbiAgICAgICAgbG9nb191cmw6IG0uY2VudHJvX2xvZ29fdXJsLFxyXG4gICAgICAgIGNpdWRhZDogbS5jZW50cm9fY2l1ZGFkLFxyXG4gICAgICAgIHJlZ2lvbjogbS5jZW50cm9fcmVnaW9uLFxyXG4gICAgICAgIGRpcmVjY2lvbjogbS5jZW50cm9fZGlyZWNjaW9uLFxyXG4gICAgICAgIHRlbGVmb25vX3ByaW5jaXBhbDogbS5jZW50cm9fdGVsZWZvbm9fcHJpbmNpcGFsLFxyXG4gICAgICAgIGVtYWlsX2NvbnRhY3RvOiBtLmNlbnRyb19lbWFpbF9jb250YWN0byxcclxuICAgICAgICBzaXRpb193ZWI6IG0uY2VudHJvX3NpdGlvX3dlYixcclxuICAgICAgfSxcclxuICAgICAgY2FsaWZpY2FjaW9uX3Byb21lZGlvOiBOdW1iZXIobS5jYWxpZmljYWNpb25fcHJvbWVkaW8gfHwgMCksXHJcbiAgICAgIG51bWVyb19vcGluaW9uZXM6IE51bWJlcihtLm51bWVyb19vcGluaW9uZXMgfHwgMCksXHJcbiAgICAgIGFjZXB0YV9udWV2b3NfcGFjaWVudGVzOiBtLmFjZXB0YV9udWV2b3NfcGFjaWVudGVzID09PSAxLFxyXG4gICAgICBhdGllbmRlX3BhcnRpY3VsYXI6IG0uYXRpZW5kZV9wYXJ0aWN1bGFyID09PSAxLFxyXG4gICAgICBhdGllbmRlX2ZvbmFzYTogbS5hdGllbmRlX2ZvbmFzYSA9PT0gMSxcclxuICAgICAgYXRpZW5kZV9pc2FwcmU6IG0uYXRpZW5kZV9pc2FwcmUgPT09IDEsXHJcbiAgICAgIGNvbnN1bHRhX3ByZXNlbmNpYWw6IG0uY29uc3VsdGFfcHJlc2VuY2lhbCA9PT0gMSxcclxuICAgICAgY29uc3VsdGFfdGVsZW1lZGljaW5hOiBtLmNvbnN1bHRhX3RlbGVtZWRpY2luYSA9PT0gMSxcclxuICAgICAgZHVyYWNpb25fY29uc3VsdGFfbWluOiBOdW1iZXIobS5kdXJhY2lvbl9jb25zdWx0YV9taW4gfHwgMzApLFxyXG4gICAgICBmaXJtYV9kaWdpdGFsOiBtLmZpcm1hX2RpZ2l0YWwgPT09IDEsXHJcbiAgICAgIGZpcm1hX2RpZ2l0YWxfdXJsOiBtLmZpcm1hX2RpZ2l0YWxfdXJsLFxyXG4gICAgICBlc3RhZG86IG0uZXN0YWRvLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHBlcmZpbDogVXN1YXJpb1Nlc2lvbiA9IHtcclxuICAgIGlkX3VzdWFyaW86IHUuaWRfdXN1YXJpbyxcclxuICAgIHVzZXJuYW1lOiB1LnVzZXJuYW1lLFxyXG4gICAgZW1haWw6IHUuZW1haWwsXHJcbiAgICBub21icmU6IHUubm9tYnJlLFxyXG4gICAgYXBlbGxpZG9fcGF0ZXJubzogdS5hcGVsbGlkb19wYXRlcm5vLFxyXG4gICAgYXBlbGxpZG9fbWF0ZXJubzogdS5hcGVsbGlkb19tYXRlcm5vLFxyXG4gICAgZm90b19wZXJmaWxfdXJsOiB1LmZvdG9fcGVyZmlsX3VybCxcclxuICAgIHRlbGVmb25vOiB1LnRlbGVmb25vLFxyXG4gICAgY2VsdWxhcjogdS5jZWx1bGFyLFxyXG4gICAgZGlyZWNjaW9uOiB1LmRpcmVjY2lvbixcclxuICAgIGNpdWRhZDogdS5jaXVkYWQsXHJcbiAgICByZWdpb246IHUucmVnaW9uLFxyXG4gICAgZmVjaGFfbmFjaW1pZW50bzogdS5mZWNoYV9uYWNpbWllbnRvLFxyXG4gICAgZ2VuZXJvOiB1LmdlbmVybyxcclxuICAgIHJvbDoge1xyXG4gICAgICBpZF9yb2w6IHUuaWRfcm9sIHx8IDAsXHJcbiAgICAgIG5vbWJyZTogdS5yb2xfbm9tYnJlIHx8IFwic2luX3JvbFwiLFxyXG4gICAgICBuaXZlbF9qZXJhcnF1aWE6IHUubml2ZWxfamVyYXJxdWlhIHx8IDAsXHJcbiAgICB9LFxyXG4gICAgLi4uKG1lZGljb0RhdGEgPyB7IG1lZGljbzogbWVkaWNvRGF0YSB9IDoge30pLFxyXG4gIH07XHJcblxyXG4gIHJldHVybiBwZXJmaWw7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHdWFyZGEgdW5hIGltYWdlbiBiYXNlNjQgZW4gL3B1YmxpYy91cGxvYWRzL3BlcmZpbGVzIHkgZGV2dWVsdmUgbGEgVVJMXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBndWFyZGFySW1hZ2VuQmFzZTY0KFxyXG4gIGJhc2U2NDogc3RyaW5nLFxyXG4gIGlkVXN1YXJpbzogbnVtYmVyXHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgLy8gbGltcGlhIGVsIGhlYWRlciBkYXRhOmltYWdlL3BuZztiYXNlNjQsLi4uXHJcbiAgY29uc3QgbWF0Y2hlcyA9IGJhc2U2NC5tYXRjaCgvXmRhdGE6KGltYWdlXFwvXFx3Kyk7YmFzZTY0LCguKykkLyk7XHJcbiAgY29uc3QgbWltZSA9IG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogXCJpbWFnZS9wbmdcIjtcclxuICBjb25zdCBkYXRhID0gbWF0Y2hlcyA/IG1hdGNoZXNbMl0gOiBiYXNlNjQ7XHJcblxyXG4gIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGRhdGEsIFwiYmFzZTY0XCIpO1xyXG5cclxuICBjb25zdCBleHQgPSBtaW1lLnNwbGl0KFwiL1wiKVsxXSB8fCBcInBuZ1wiO1xyXG5cclxuICBjb25zdCB1cGxvYWREaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJwdWJsaWNcIiwgXCJ1cGxvYWRzXCIsIFwicGVyZmlsZXNcIik7XHJcbiAgYXdhaXQgZnMubWtkaXIodXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuXHJcbiAgY29uc3QgZmlsZW5hbWUgPSBgcGVyZmlsLSR7aWRVc3VhcmlvfS0ke0RhdGUubm93KCl9LiR7ZXh0fWA7XHJcbiAgY29uc3QgZmlsZXBhdGggPSBwYXRoLmpvaW4odXBsb2FkRGlyLCBmaWxlbmFtZSk7XHJcblxyXG4gIGF3YWl0IGZzLndyaXRlRmlsZShmaWxlcGF0aCwgYnVmZmVyKTtcclxuXHJcbiAgLy8gbGEgVVJMIHDDumJsaWNhXHJcbiAgcmV0dXJuIGAvdXBsb2Fkcy9wZXJmaWxlcy8ke2ZpbGVuYW1lfWA7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gR0VUIC0gb2J0ZW5lciBlbCBwZXJmaWwgZGVsIHVzdWFyaW8gbG9ndWVhZG9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IGdldFNlc3Npb25Ub2tlbihyZXF1ZXN0KTtcclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgc2VzacOzbiBhY3RpdmFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHZhbGlkYXIgc2VzacOzblxyXG4gICAgY29uc3QgW3Nlc2lvbmVzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1Qgc3UuaWRfdXN1YXJpb1xyXG4gICAgICBGUk9NIHNlc2lvbmVzX3VzdWFyaW9zIHN1XHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdSBPTiB1LmlkX3VzdWFyaW8gPSBzdS5pZF91c3VhcmlvXHJcbiAgICAgIFdIRVJFIHN1LnRva2VuID0gP1xyXG4gICAgICAgIEFORCBzdS5hY3RpdmEgPSAxXHJcbiAgICAgICAgQU5EIChzdS5mZWNoYV9leHBpcmFjaW9uIElTIE5VTEwgT1Igc3UuZmVjaGFfZXhwaXJhY2lvbiA+IE5PVygpKVxyXG4gICAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgIExJTUlUIDFcclxuICAgICAgYCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgaWYgKHNlc2lvbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiU2VzacOzbiBpbnbDoWxpZGEgbyBleHBpcmFkYVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRVc3VhcmlvID0gc2VzaW9uZXNbMF0uaWRfdXN1YXJpbztcclxuXHJcbiAgICAvLyBhY3R1YWxpemFyIMO6bHRpbWEgYWN0aXZpZGFkXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgVVBEQVRFIHNlc2lvbmVzX3VzdWFyaW9zIFNFVCB1bHRpbWFfYWN0aXZpZGFkID0gTk9XKCkgV0hFUkUgdG9rZW4gPSA/YCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcGVyZmlsID0gYXdhaXQgY2FyZ2FyUGVyZmlsVXN1YXJpbyhpZFVzdWFyaW8pO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgcGVyZmlsLFxyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogMjAwIH1cclxuICAgICk7XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBFcnJvciBlbiBHRVQgL2FwaS91c3VhcmlvL3BlcmZpbDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3JcIixcclxuICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQT1NUIC0gZ3VhcmRhciBmb3RvIGRlIHBlcmZpbFxyXG4vLyBlc3BlcmEgeyBmb3RvX2Jhc2U2NDogc3RyaW5nIH0gbyB7IGZvdG9fcGVyZmlsX3VybDogc3RyaW5nIH1cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBnZXRTZXNzaW9uVG9rZW4ocmVxdWVzdCk7XHJcbiAgICBpZiAoIXNlc3Npb25Ub2tlbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gaGF5IHNlc2nDs24gYWN0aXZhXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbc2VzaW9uZXNdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVCBzdS5pZF91c3VhcmlvXHJcbiAgICAgIEZST00gc2VzaW9uZXNfdXN1YXJpb3Mgc3VcclxuICAgICAgSU5ORVIgSk9JTiB1c3VhcmlvcyB1IE9OIHUuaWRfdXN1YXJpbyA9IHN1LmlkX3VzdWFyaW9cclxuICAgICAgV0hFUkUgc3UudG9rZW4gPSA/XHJcbiAgICAgICAgQU5EIHN1LmFjdGl2YSA9IDFcclxuICAgICAgICBBTkQgKHN1LmZlY2hhX2V4cGlyYWNpb24gSVMgTlVMTCBPUiBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKCkpXHJcbiAgICAgICAgQU5EIHUuZXN0YWRvID0gJ2FjdGl2bydcclxuICAgICAgTElNSVQgMVxyXG4gICAgICBgLFxyXG4gICAgICBbc2Vzc2lvblRva2VuXVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoc2VzaW9uZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJTZXNpw7NuIGludsOhbGlkYSBvIGV4cGlyYWRhXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpZFVzdWFyaW8gPSBzZXNpb25lc1swXS5pZF91c3VhcmlvO1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG5cclxuICAgIGxldCBudWV2YVVybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgaWYgKGJvZHkuZm90b19iYXNlNjQpIHtcclxuICAgICAgbnVldmFVcmwgPSBhd2FpdCBndWFyZGFySW1hZ2VuQmFzZTY0KGJvZHkuZm90b19iYXNlNjQsIGlkVXN1YXJpbyk7XHJcbiAgICB9IGVsc2UgaWYgKGJvZHkuZm90b19wZXJmaWxfdXJsKSB7XHJcbiAgICAgIC8vIHNpIGRlc2RlIGVsIGZyb250IHlhIHN1YmlzdGUgbGEgaW1hZ2VuIGEgb3RybyBsYWRvIHkgc29sbyBtYW5kYXMgbGEgVVJMXHJcbiAgICAgIG51ZXZhVXJsID0gYm9keS5mb3RvX3BlcmZpbF91cmw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gc2UgZW52acOzIGZvdG9fYmFzZTY0IG5pIGZvdG9fcGVyZmlsX3VybFwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYWN0dWFsaXphciBlbiBEQlxyXG4gICAgYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFVQREFURSB1c3VhcmlvcyBTRVQgZm90b19wZXJmaWxfdXJsID0gPywgZmVjaGFfbW9kaWZpY2FjaW9uID0gTk9XKCkgV0hFUkUgaWRfdXN1YXJpbyA9ID9gLFxyXG4gICAgICBbbnVldmFVcmwsIGlkVXN1YXJpb11cclxuICAgICk7XHJcblxyXG4gICAgLy8gZGV2b2x2ZXIgcGVyZmlsIGFjdHVhbGl6YWRvXHJcbiAgICBjb25zdCBwZXJmaWwgPSBhd2FpdCBjYXJnYXJQZXJmaWxVc3VhcmlvKGlkVXN1YXJpbyk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiBcIkZvdG8gZGUgcGVyZmlsIGFjdHVhbGl6YWRhXCIsXHJcbiAgICAgICAgZm90b19wZXJmaWxfdXJsOiBudWV2YVVybCxcclxuICAgICAgICBwZXJmaWwsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIFBPU1QgL2FwaS91c3VhcmlvL3BlcmZpbDpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3JcIixcclxuICAgICAgICBkZXRhaWxzOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQVVQgLSBhY3R1YWxpemFyIGRhdG9zIGLDoXNpY29zIGRlbCBwZXJmaWxcclxuLy8gKG5vbWJyZSwgYXBlbGxpZG9zLCB0ZWzDqWZvbm9zLCBkaXJlY2Npw7NuLCBldGMuKVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3QpO1xyXG4gICAgaWYgKCFzZXNzaW9uVG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGhheSBzZXNpw7NuIGFjdGl2YVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgW3Nlc2lvbmVzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1Qgc3UuaWRfdXN1YXJpb1xyXG4gICAgICBGUk9NIHNlc2lvbmVzX3VzdWFyaW9zIHN1XHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdSBPTiB1LmlkX3VzdWFyaW8gPSBzdS5pZF91c3VhcmlvXHJcbiAgICAgIFdIRVJFIHN1LnRva2VuID0gP1xyXG4gICAgICAgIEFORCBzdS5hY3RpdmEgPSAxXHJcbiAgICAgICAgQU5EIChzdS5mZWNoYV9leHBpcmFjaW9uIElTIE5VTEwgT1Igc3UuZmVjaGFfZXhwaXJhY2lvbiA+IE5PVygpKVxyXG4gICAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgIExJTUlUIDFcclxuICAgICAgYCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgaWYgKHNlc2lvbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiU2VzacOzbiBpbnbDoWxpZGEgbyBleHBpcmFkYVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRVc3VhcmlvID0gc2VzaW9uZXNbMF0uaWRfdXN1YXJpbztcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuXHJcbiAgICBjb25zdCBjYW1wb3M6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueVtdID0gW107XHJcblxyXG4gICAgY29uc3QgdXBkYXRhYmxlRmllbGRzID0gW1xyXG4gICAgICBcIm5vbWJyZVwiLFxyXG4gICAgICBcImFwZWxsaWRvX3BhdGVybm9cIixcclxuICAgICAgXCJhcGVsbGlkb19tYXRlcm5vXCIsXHJcbiAgICAgIFwidGVsZWZvbm9cIixcclxuICAgICAgXCJjZWx1bGFyXCIsXHJcbiAgICAgIFwiZGlyZWNjaW9uXCIsXHJcbiAgICAgIFwiY2l1ZGFkXCIsXHJcbiAgICAgIFwicmVnaW9uXCIsXHJcbiAgICAgIFwiZ2VuZXJvXCIsXHJcbiAgICAgIFwiZmVjaGFfbmFjaW1pZW50b1wiLFxyXG4gICAgXSBhcyBjb25zdDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGYgb2YgdXBkYXRhYmxlRmllbGRzKSB7XHJcbiAgICAgIGlmIChib2R5W2ZdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBjYW1wb3MucHVzaChgJHtmfSA9ID9gKTtcclxuICAgICAgICBwYXJhbXMucHVzaChib2R5W2ZdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjYW1wb3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgY2FtcG9zIHBhcmEgYWN0dWFsaXphclwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFyYW1zLnB1c2goaWRVc3VhcmlvKTtcclxuXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgVVBEQVRFIHVzdWFyaW9zIFNFVCAke2NhbXBvcy5qb2luKFwiLCBcIil9LCBmZWNoYV9tb2RpZmljYWNpb24gPSBOT1coKSBXSEVSRSBpZF91c3VhcmlvID0gP2AsXHJcbiAgICAgIHBhcmFtc1xyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBwZXJmaWwgPSBhd2FpdCBjYXJnYXJQZXJmaWxVc3VhcmlvKGlkVXN1YXJpbyk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiBcIlBlcmZpbCBhY3R1YWxpemFkb1wiLFxyXG4gICAgICAgIHBlcmZpbCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gUFVUIC9hcGkvdXN1YXJpby9wZXJmaWw6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBcIkVycm9yIGludGVybm8gZGVsIHNlcnZpZG9yXCIsXHJcbiAgICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBvb2wiLCJmcyIsInBhdGgiLCJkeW5hbWljIiwiU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUyIsImdldFNlc3Npb25Ub2tlbiIsInJlcXVlc3QiLCJjb29raWVIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0IiwiY29va2llcyIsInNwbGl0IiwibWFwIiwiYyIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVkdWNlIiwiYWNjIiwiayIsInJlc3QiLCJqb2luIiwibmFtZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImF1dGgiLCJzdGFydHNXaXRoIiwic2xpY2UiLCJjYXJnYXJQZXJmaWxVc3VhcmlvIiwiaWRVc3VhcmlvIiwidXN1YXJpb3MiLCJxdWVyeSIsImxlbmd0aCIsInUiLCJtZWRpY29zIiwibWVkaWNvRGF0YSIsInVuZGVmaW5lZCIsIm0iLCJlc3BlY2lhbGlkYWRlcyIsImlkX21lZGljbyIsIm51bWVyb19yZWdpc3Ryb19tZWRpY28iLCJ0aXR1bG9fcHJvZmVzaW9uYWwiLCJ1bml2ZXJzaWRhZCIsImFub19ncmFkdWFjaW9uIiwiTnVtYmVyIiwiYW5vc19leHBlcmllbmNpYSIsImJpb2dyYWZpYSIsImVzcCIsImlkX2VzcGVjaWFsaWRhZCIsIm5vbWJyZSIsImVzX3ByaW5jaXBhbCIsImNlcnRpZmljYWRvX3VybCIsImZlY2hhX2NlcnRpZmljYWNpb24iLCJpbnN0aXR1Y2lvbl9jZXJ0aWZpY2Fkb3JhIiwiaWRfY2VudHJvX3ByaW5jaXBhbCIsImNlbnRyb19wcmluY2lwYWwiLCJpZF9jZW50cm8iLCJjZW50cm9fbm9tYnJlIiwicGxhbiIsImxvZ29fdXJsIiwiY2VudHJvX2xvZ29fdXJsIiwiY2l1ZGFkIiwiY2VudHJvX2NpdWRhZCIsInJlZ2lvbiIsImNlbnRyb19yZWdpb24iLCJkaXJlY2Npb24iLCJjZW50cm9fZGlyZWNjaW9uIiwidGVsZWZvbm9fcHJpbmNpcGFsIiwiY2VudHJvX3RlbGVmb25vX3ByaW5jaXBhbCIsImVtYWlsX2NvbnRhY3RvIiwiY2VudHJvX2VtYWlsX2NvbnRhY3RvIiwic2l0aW9fd2ViIiwiY2VudHJvX3NpdGlvX3dlYiIsImNhbGlmaWNhY2lvbl9wcm9tZWRpbyIsIm51bWVyb19vcGluaW9uZXMiLCJhY2VwdGFfbnVldm9zX3BhY2llbnRlcyIsImF0aWVuZGVfcGFydGljdWxhciIsImF0aWVuZGVfZm9uYXNhIiwiYXRpZW5kZV9pc2FwcmUiLCJjb25zdWx0YV9wcmVzZW5jaWFsIiwiY29uc3VsdGFfdGVsZW1lZGljaW5hIiwiZHVyYWNpb25fY29uc3VsdGFfbWluIiwiZmlybWFfZGlnaXRhbCIsImZpcm1hX2RpZ2l0YWxfdXJsIiwiZXN0YWRvIiwicGVyZmlsIiwiaWRfdXN1YXJpbyIsInVzZXJuYW1lIiwiZW1haWwiLCJhcGVsbGlkb19wYXRlcm5vIiwiYXBlbGxpZG9fbWF0ZXJubyIsImZvdG9fcGVyZmlsX3VybCIsInRlbGVmb25vIiwiY2VsdWxhciIsImZlY2hhX25hY2ltaWVudG8iLCJnZW5lcm8iLCJyb2wiLCJpZF9yb2wiLCJyb2xfbm9tYnJlIiwibml2ZWxfamVyYXJxdWlhIiwibWVkaWNvIiwiZ3VhcmRhckltYWdlbkJhc2U2NCIsImJhc2U2NCIsIm1hdGNoZXMiLCJtYXRjaCIsIm1pbWUiLCJkYXRhIiwiYnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImV4dCIsInVwbG9hZERpciIsInByb2Nlc3MiLCJjd2QiLCJta2RpciIsInJlY3Vyc2l2ZSIsImZpbGVuYW1lIiwiRGF0ZSIsIm5vdyIsImZpbGVwYXRoIiwid3JpdGVGaWxlIiwiR0VUIiwic2Vzc2lvblRva2VuIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInNlc2lvbmVzIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJjb25zb2xlIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJQT1NUIiwiYm9keSIsIm51ZXZhVXJsIiwiZm90b19iYXNlNjQiLCJQVVQiLCJjYW1wb3MiLCJwYXJhbXMiLCJ1cGRhdGFibGVGaWVsZHMiLCJmIiwicHVzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/medico/perfil/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// 📦 Archivo: src/lib/db.ts\n// 🧠 Descripción: Configuración central de conexión a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// 🔗 Conexión al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// 🧩 Función genérica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"❌ Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// 👤 Obtener usuario por email o username (para login o validaciones)\n// ✅ Versión que PRIORIZA el rol MÉDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) médico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) técnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// 🔒 Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// 📊 Ejemplo de utilidad: obtener estadísticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// 🔌 NUEVO: obtener una conexión dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexión\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// 🔁 NUEVO (opcional): helper para ejecutar en transacción\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// 🔁 Exportar conexión global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Fperfil%2Froute&page=%2Fapi%2Fmedico%2Fperfil%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Fperfil%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();