/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/medico/recetas/route";
exports.ids = ["app/api/medico/recetas/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Frecetas%2Froute&page=%2Fapi%2Fmedico%2Frecetas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Frecetas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Frecetas%2Froute&page=%2Fapi%2Fmedico%2Frecetas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Frecetas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_recetas_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/medico/recetas/route.ts */ \"(rsc)/./src/app/api/medico/recetas/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/medico/recetas/route\",\n        pathname: \"/api/medico/recetas\",\n        filename: \"route\",\n        bundlePath: \"app/api/medico/recetas/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\medico\\\\recetas\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_medico_recetas_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/medico/recetas/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZtZWRpY28lMkZyZWNldGFzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZtZWRpY28lMkZyZWNldGFzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbWVkaWNvJTJGcmVjZXRhcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDb0M7QUFDakg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz80NTY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxtZWRpY29cXFxccmVjZXRhc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbWVkaWNvL3JlY2V0YXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9tZWRpY28vcmVjZXRhc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvbWVkaWNvL3JlY2V0YXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxSZWFjdFByb2plY3RzXFxcXG1lZGlzdWl0ZS1wcm9cXFxcZnJvbnRlbmRcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcbWVkaWNvXFxcXHJlY2V0YXNcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0IH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbWVkaWNvL3JlY2V0YXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Frecetas%2Froute&page=%2Fapi%2Fmedico%2Frecetas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Frecetas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/medico/recetas/route.ts":
/*!*********************************************!*\
  !*** ./src/app/api/medico/recetas/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n// app/api/medico/recetas/route.ts\n\n\n\n// ========================================\n// CONSTANTES DE TABLAS (ajustadas a tu schema)\n// ========================================\nconst TABLE_RECETAS = \"recetas_medicas\";\nconst TABLE_MEDICAMENTOS = \"receta_medicamentos\";\n// ========================================\n// HELPER PARA OBTENER EL TOKEN\n// ========================================\nconst SESSION_COOKIE_CANDIDATES = [\n    \"session\",\n    \"session_token\",\n    \"medisalud_session\",\n    \"auth_session\",\n    \"next-auth.session-token\",\n    \"__Secure-next-auth.session-token\"\n];\nfunction getSessionToken(request) {\n    const cookieHeader = request.headers.get(\"cookie\") || \"\";\n    if (cookieHeader) {\n        const cookies = cookieHeader.split(\";\").map((c)=>c.trim()).filter(Boolean).reduce((acc, c)=>{\n            const [k, ...rest] = c.split(\"=\");\n            acc[k] = rest.join(\"=\");\n            return acc;\n        }, {});\n        for (const name of SESSION_COOKIE_CANDIDATES){\n            if (cookies[name]) {\n                return decodeURIComponent(cookies[name]);\n            }\n        }\n    }\n    const auth = request.headers.get(\"authorization\");\n    if (auth?.startsWith(\"Bearer \")) {\n        return auth.slice(7);\n    }\n    return null;\n}\n// ========================================\n// FUNCIONES AUXILIARES\n// ========================================\nasync function obtenerMedicoAutenticado(idUsuario) {\n    try {\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        m.id_medico,\r\n        m.id_usuario,\r\n        m.id_centro_principal,\r\n        m.numero_registro_medico,\r\n        CONCAT(u.nombre, ' ', u.apellido_paterno, ' ', COALESCE(u.apellido_materno, '')) as nombre_completo,\r\n        e.nombre as especialidad_principal,\r\n        m.firma_digital\r\n      FROM medicos m\r\n      INNER JOIN usuarios u ON m.id_usuario = u.id_usuario\r\n      LEFT JOIN especialidades e ON m.id_especialidad_principal = e.id_especialidad\r\n      WHERE m.id_usuario = ? AND m.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            idUsuario\n        ]);\n        if (rows.length === 0) {\n            return null;\n        }\n        return rows[0];\n    } catch (error) {\n        console.error(\"Error al obtener m\\xe9dico:\", error);\n        throw error;\n    }\n}\nfunction generarNumeroReceta(idMedico, idCentro, tipoReceta) {\n    const fecha = new Date();\n    const año = fecha.getFullYear();\n    const mes = String(fecha.getMonth() + 1).padStart(2, \"0\");\n    const dia = String(fecha.getDate()).padStart(2, \"0\");\n    const timestamp = Date.now().toString().slice(-6);\n    const prefijo = tipoReceta === \"controlada\" ? \"RC\" : \"RX\";\n    return `${prefijo}-${año}${mes}${dia}-${idMedico}-${idCentro}-${timestamp}`;\n}\nfunction generarCodigoVerificacion() {\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(6).toString(\"hex\").toUpperCase();\n}\nasync function obtenerRecetas(idMedico, fechaInicio, fechaFin, estados, tipos, paciente, esCronica) {\n    try {\n        let query = `\r\n      SELECT \r\n        r.id_receta,\r\n        r.numero_receta,\r\n        r.codigo_verificacion,\r\n        r.id_paciente,\r\n        r.id_medico,\r\n        r.id_centro,\r\n        r.fecha_emision,\r\n        r.fecha_vencimiento,\r\n        r.tipo_receta,\r\n        r.diagnostico,\r\n        r.codigo_cie10,\r\n        r.estado,\r\n        r.es_cronica,\r\n        r.observaciones,\r\n\r\n        -- datos paciente\r\n        p.id_paciente,\r\n        p.rut AS paciente_rut,\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno, ' ', COALESCE(p.apellido_materno, '')) AS paciente_nombre_completo,\r\n        TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) AS paciente_edad,\r\n        p.genero AS paciente_genero,\r\n        p.telefono AS paciente_telefono,\r\n        p.email AS paciente_email,\r\n        p.foto_url AS paciente_foto_url,\r\n        p.prevision AS paciente_prevision,\r\n\r\n        -- datos medico\r\n        m.id_medico,\r\n        m.numero_registro_medico,\r\n        CONCAT(um.nombre, ' ', um.apellido_paterno, ' ', COALESCE(um.apellido_materno, '')) AS medico_nombre_completo,\r\n        e.nombre AS medico_especialidad,\r\n\r\n        -- centro\r\n        c.id_centro,\r\n        c.nombre AS centro_nombre,\r\n        c.direccion AS centro_direccion,\r\n        c.ciudad AS centro_ciudad,\r\n        c.telefono AS centro_telefono,\r\n        c.email AS centro_email,\r\n        c.logo_url AS centro_logo_url,\r\n\r\n        (SELECT COUNT(*) FROM ${TABLE_MEDICAMENTOS} WHERE id_receta = r.id_receta) AS total_medicamentos,\r\n        (SELECT COUNT(*) FROM ${TABLE_MEDICAMENTOS} WHERE id_receta = r.id_receta AND es_controlado = 1) AS medicamentos_controlados,\r\n        (SELECT COUNT(*) FROM ${TABLE_MEDICAMENTOS} WHERE id_receta = r.id_receta AND dispensado = 1) AS medicamentos_dispensados\r\n      FROM ${TABLE_RECETAS} r\r\n      INNER JOIN pacientes p ON r.id_paciente = p.id_paciente\r\n      INNER JOIN medicos m ON r.id_medico = m.id_medico\r\n      INNER JOIN usuarios um ON m.id_usuario = um.id_usuario\r\n      LEFT JOIN especialidades e ON m.id_especialidad_principal = e.id_especialidad\r\n      INNER JOIN centros_medicos c ON r.id_centro = c.id_centro\r\n      WHERE r.id_medico = ?\r\n        AND DATE(r.fecha_emision) BETWEEN ? AND ?\r\n    `;\n        const params = [\n            idMedico,\n            fechaInicio,\n            fechaFin\n        ];\n        if (estados && estados.length > 0) {\n            query += ` AND r.estado IN (${estados.map(()=>\"?\").join(\",\")})`;\n            params.push(...estados);\n        }\n        if (tipos && tipos.length > 0) {\n            query += ` AND r.tipo_receta IN (${tipos.map(()=>\"?\").join(\",\")})`;\n            params.push(...tipos);\n        }\n        if (paciente && paciente.trim()) {\n            query += ` AND (\r\n        CONCAT(p.nombre, ' ', p.apellido_paterno, ' ', COALESCE(p.apellido_materno, '')) LIKE ?\r\n        OR p.rut LIKE ?\r\n        OR p.email LIKE ?\r\n      )`;\n            const term = `%${paciente}%`;\n            params.push(term, term, term);\n        }\n        if (esCronica !== undefined) {\n            query += ` AND r.es_cronica = ?`;\n            params.push(esCronica ? 1 : 0);\n        }\n        query += ` ORDER BY r.fecha_emision DESC`;\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(query, params);\n        const recetas = await Promise.all(rows.map(async (row)=>{\n            const [meds] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n          SELECT\r\n            id_receta_medicamento,\r\n            nombre_medicamento,\r\n            codigo_medicamento,\r\n            dosis,\r\n            frecuencia,\r\n            duracion,\r\n            cantidad,\r\n            unidad,\r\n            via_administracion,\r\n            instrucciones,\r\n            es_controlado,\r\n            dispensado,\r\n            fecha_dispensacion\r\n          FROM ${TABLE_MEDICAMENTOS}\r\n          WHERE id_receta = ?\r\n          ORDER BY id_receta_medicamento ASC\r\n          `, [\n                row.id_receta\n            ]);\n            return {\n                id_receta: row.id_receta,\n                numero_receta: row.numero_receta,\n                codigo_verificacion: row.codigo_verificacion,\n                fecha_emision: row.fecha_emision,\n                fecha_vencimiento: row.fecha_vencimiento,\n                tipo_receta: row.tipo_receta,\n                diagnostico: row.diagnostico,\n                codigo_cie10: row.codigo_cie10,\n                estado: row.estado,\n                es_cronica: row.es_cronica === 1,\n                observaciones: row.observaciones,\n                paciente: {\n                    id_paciente: row.id_paciente,\n                    rut: row.paciente_rut,\n                    nombre_completo: row.paciente_nombre_completo,\n                    edad: row.paciente_edad,\n                    genero: row.paciente_genero,\n                    telefono: row.paciente_telefono,\n                    email: row.paciente_email,\n                    foto_url: row.paciente_foto_url,\n                    prevision: row.paciente_prevision\n                },\n                medico: {\n                    id_medico: row.id_medico,\n                    numero_registro_medico: row.numero_registro_medico,\n                    nombre_completo: row.medico_nombre_completo,\n                    especialidad_principal: row.medico_especialidad\n                },\n                centro: {\n                    id_centro: row.id_centro,\n                    nombre: row.centro_nombre,\n                    direccion: row.centro_direccion,\n                    ciudad: row.centro_ciudad,\n                    telefono: row.centro_telefono,\n                    email: row.centro_email,\n                    logo_url: row.centro_logo_url\n                },\n                medicamentos: meds.map((m)=>({\n                        id_medicamento_receta: m.id_receta_medicamento,\n                        nombre_medicamento: m.nombre_medicamento,\n                        codigo_medicamento: m.codigo_medicamento,\n                        dosis: m.dosis,\n                        frecuencia: m.frecuencia,\n                        duracion: m.duracion,\n                        cantidad: m.cantidad,\n                        unidad: m.unidad,\n                        via_administracion: m.via_administracion,\n                        instrucciones: m.instrucciones,\n                        es_controlado: m.es_controlado === 1,\n                        dispensado: m.dispensado === 1,\n                        fecha_dispensacion: m.fecha_dispensacion\n                    })),\n                estadisticas: {\n                    total_medicamentos: row.total_medicamentos,\n                    medicamentos_controlados: row.medicamentos_controlados,\n                    medicamentos_dispensados: row.medicamentos_dispensados\n                }\n            };\n        }));\n        return recetas;\n    } catch (error) {\n        console.error(\"Error al obtener recetas:\", error);\n        throw error;\n    }\n}\nasync function calcularEstadisticas(idMedico, fechaInicio, fechaFin) {\n    try {\n        const [estadisticas] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        COUNT(DISTINCT r.id_receta) AS total_recetas,\r\n        SUM(CASE WHEN r.estado = 'emitida' THEN 1 ELSE 0 END) AS emitidas,\r\n        SUM(CASE WHEN r.estado = 'dispensada' THEN 1 ELSE 0 END) AS dispensadas,\r\n        SUM(CASE WHEN r.estado = 'vencida' THEN 1 ELSE 0 END) AS vencidas,\r\n        SUM(CASE WHEN r.estado = 'anulada' THEN 1 ELSE 0 END) AS anuladas,\r\n        SUM(CASE WHEN r.es_cronica = 1 THEN 1 ELSE 0 END) AS recetas_cronicas,\r\n        SUM(CASE WHEN r.tipo_receta = 'simple' THEN 1 ELSE 0 END) AS tipo_simple,\r\n        SUM(CASE WHEN r.tipo_receta = 'retenida' THEN 1 ELSE 0 END) AS tipo_retenida,\r\n        SUM(CASE WHEN r.tipo_receta = 'controlada' THEN 1 ELSE 0 END) AS tipo_controlada,\r\n        SUM(CASE WHEN r.tipo_receta = 'magistral' THEN 1 ELSE 0 END) AS tipo_magistral,\r\n        COUNT(mr.id_receta_medicamento) AS total_medicamentos,\r\n        SUM(CASE WHEN mr.es_controlado = 1 THEN 1 ELSE 0 END) AS medicamentos_controlados,\r\n        SUM(CASE WHEN mr.dispensado = 1 THEN 1 ELSE 0 END) AS medicamentos_dispensados\r\n      FROM ${TABLE_RECETAS} r\r\n      LEFT JOIN ${TABLE_MEDICAMENTOS} mr ON r.id_receta = mr.id_receta\r\n      WHERE r.id_medico = ?\r\n        AND DATE(r.fecha_emision) BETWEEN ? AND ?\r\n      `, [\n            idMedico,\n            fechaInicio,\n            fechaFin\n        ]);\n        const stats = estadisticas[0];\n        const tasa_dispensacion = stats.total_recetas > 0 ? stats.dispensadas / stats.total_recetas * 100 : 0;\n        const promedio_medicamentos = stats.total_recetas > 0 ? stats.total_medicamentos / stats.total_recetas : 0;\n        return {\n            total_recetas: stats.total_recetas || 0,\n            emitidas: stats.emitidas || 0,\n            dispensadas: stats.dispensadas || 0,\n            vencidas: stats.vencidas || 0,\n            anuladas: stats.anuladas || 0,\n            total_medicamentos: stats.total_medicamentos || 0,\n            medicamentos_controlados: stats.medicamentos_controlados || 0,\n            recetas_cronicas: stats.recetas_cronicas || 0,\n            tasa_dispensacion: parseFloat(tasa_dispensacion.toFixed(2)),\n            // tu tabla de medicamentos no tiene precio, así que lo dejamos en 0\n            valor_total_prescrito: 0,\n            promedio_medicamentos_por_receta: parseFloat(promedio_medicamentos.toFixed(2)),\n            tipos_receta: {\n                simple: stats.tipo_simple || 0,\n                retenida: stats.tipo_retenida || 0,\n                controlada: stats.tipo_controlada || 0,\n                magistral: stats.tipo_magistral || 0\n            }\n        };\n    } catch (error) {\n        console.error(\"Error al calcular estad\\xedsticas:\", error);\n        throw error;\n    }\n}\nasync function validarPaciente(idPaciente) {\n    try {\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT id_paciente FROM pacientes WHERE id_paciente = ? AND estado = 'activo'`, [\n            idPaciente\n        ]);\n        return rows.length > 0;\n    } catch (error) {\n        console.error(\"Error al validar paciente:\", error);\n        throw error;\n    }\n}\nasync function registrarAuditoria(idReceta, accion, idUsuario, detalles) {\n    try {\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      INSERT INTO auditoria_recetas (\r\n        id_receta,\r\n        accion,\r\n        id_usuario,\r\n        detalles,\r\n        fecha_accion,\r\n        ip_address\r\n      ) VALUES (?, ?, ?, ?, NOW(), ?)\r\n      `, [\n            idReceta,\n            accion,\n            idUsuario,\n            detalles || null,\n            \"0.0.0.0\"\n        ]);\n    } catch (error) {\n        console.error(\"Error al registrar auditor\\xeda:\", error);\n    }\n}\n// ========================================\n// GET\n// ========================================\nasync function GET(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const searchParams = request.nextUrl.searchParams;\n        const fechaInicio = searchParams.get(\"fecha_inicio\") || new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n        const fechaFin = searchParams.get(\"fecha_fin\") || new Date().toISOString().split(\"T\")[0];\n        const estados = searchParams.get(\"estados\")?.split(\",\");\n        const tipos = searchParams.get(\"tipos\")?.split(\",\");\n        const paciente = searchParams.get(\"paciente\") || \"\";\n        const esCronica = searchParams.get(\"es_cronica\") ? searchParams.get(\"es_cronica\") === \"true\" : undefined;\n        // actualizar actividad\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE sesiones_usuarios SET ultima_actividad = NOW() WHERE token = ?`, [\n            sessionToken\n        ]);\n        const [recetas, estadisticas] = await Promise.all([\n            obtenerRecetas(medico.id_medico, fechaInicio, fechaFin, estados, tipos, paciente, esCronica),\n            calcularEstadisticas(medico.id_medico, fechaInicio, fechaFin)\n        ]);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            recetas,\n            estadisticas,\n            filtros: {\n                fecha_inicio: fechaInicio,\n                fecha_fin: fechaFin,\n                estados: estados || [],\n                tipos: tipos || [],\n                paciente: paciente || \"\",\n                es_cronica: esCronica\n            },\n            medico: {\n                id_medico: medico.id_medico,\n                nombre_completo: medico.nombre_completo,\n                numero_registro_medico: medico.numero_registro_medico,\n                especialidad_principal: medico.especialidad_principal\n            },\n            timestamp: new Date().toISOString()\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en GET /api/medico/recetas:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// POST - Crear nueva receta\n// ========================================\nasync function POST(request) {\n    const connection = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConnection();\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await connection.query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { id_paciente, tipo_receta = \"simple\", diagnostico, codigo_cie10, fecha_vencimiento, es_cronica = false, observaciones, medicamentos = [] } = body;\n        if (!id_paciente || !diagnostico || medicamentos.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Faltan datos requeridos (paciente, diagn\\xf3stico, medicamentos)\"\n            }, {\n                status: 400\n            });\n        }\n        const pacienteValido = await validarPaciente(id_paciente);\n        if (!pacienteValido) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Paciente no encontrado o inactivo\"\n            }, {\n                status: 404\n            });\n        }\n        await connection.beginTransaction();\n        const numeroReceta = generarNumeroReceta(medico.id_medico, medico.id_centro_principal, tipo_receta);\n        const codigoVerificacion = generarCodigoVerificacion();\n        // esta es tu tabla real\n        const [resultReceta] = await connection.query(`\r\n      INSERT INTO ${TABLE_RECETAS} (\r\n        id_centro,\r\n        id_paciente,\r\n        id_medico,\r\n        tipo_receta,\r\n        fecha_emision,\r\n        fecha_vencimiento,\r\n        estado,\r\n        numero_receta,\r\n        codigo_verificacion,\r\n        diagnostico,\r\n        codigo_cie10,\r\n        es_cronica,\r\n        observaciones\r\n      ) VALUES (?, ?, ?, ?, NOW(), ?, 'emitida', ?, ?, ?, ?, ?, ?)\r\n      `, [\n            medico.id_centro_principal,\n            id_paciente,\n            medico.id_medico,\n            tipo_receta,\n            fecha_vencimiento || null,\n            numeroReceta,\n            codigoVerificacion,\n            diagnostico,\n            codigo_cie10 || null,\n            es_cronica ? 1 : 0,\n            observaciones || null\n        ]);\n        const idReceta = resultReceta.insertId;\n        for (const med of medicamentos){\n            await connection.query(`\r\n        INSERT INTO ${TABLE_MEDICAMENTOS} (\r\n          id_receta,\r\n          id_medicamento,\r\n          nombre_medicamento,\r\n          dosis,\r\n          frecuencia,\r\n          duracion,\r\n          cantidad,\r\n          unidad,\r\n          via_administracion,\r\n          instrucciones,\r\n          es_controlado,\r\n          codigo_medicamento\r\n        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n        `, [\n                idReceta,\n                null,\n                med.nombre_medicamento,\n                med.dosis,\n                med.frecuencia,\n                med.duracion || null,\n                med.cantidad,\n                med.unidad || \"unidades\",\n                med.via_administracion || \"oral\",\n                med.instrucciones || null,\n                med.es_controlado ? 1 : 0,\n                med.codigo_medicamento || null\n            ]);\n        }\n        await registrarAuditoria(idReceta, \"CREACION\", idUsuario, `Receta creada con ${medicamentos.length} medicamentos`);\n        await connection.commit();\n        // traerla de nuevo para devolverla completa\n        const recetasDelDia = await obtenerRecetas(medico.id_medico, new Date().toISOString().split(\"T\")[0], new Date().toISOString().split(\"T\")[0]);\n        const recetaNueva = recetasDelDia.find((r)=>r.id_receta === idReceta) || null;\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Receta emitida exitosamente\",\n            receta: recetaNueva,\n            id_receta: idReceta,\n            numero_receta: numeroReceta,\n            codigo_verificacion: codigoVerificacion\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        await connection.rollback();\n        console.error(\"❌ Error en POST /api/medico/recetas:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    } finally{\n        connection.release();\n    }\n}\n// ========================================\n// PUT - Actualizar receta\n// ========================================\nasync function PUT(request) {\n    const connection = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getConnection();\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await connection.query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { id_receta, diagnostico, codigo_cie10, fecha_vencimiento, observaciones, medicamentos } = body;\n        // validar que exista y sea del médico\n        const [recetaActual] = await connection.query(`SELECT * FROM ${TABLE_RECETAS} WHERE id_receta = ? AND id_medico = ?`, [\n            id_receta,\n            medico.id_medico\n        ]);\n        if (recetaActual.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Receta no encontrada\"\n            }, {\n                status: 404\n            });\n        }\n        // solo editar emitidas\n        if (recetaActual[0].estado !== \"emitida\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Solo se pueden editar recetas en estado 'emitida'\"\n            }, {\n                status: 400\n            });\n        }\n        await connection.beginTransaction();\n        const updates = [];\n        const params = [];\n        if (diagnostico !== undefined) {\n            updates.push(\"diagnostico = ?\");\n            params.push(diagnostico);\n        }\n        if (codigo_cie10 !== undefined) {\n            updates.push(\"codigo_cie10 = ?\");\n            params.push(codigo_cie10);\n        }\n        if (fecha_vencimiento !== undefined) {\n            updates.push(\"fecha_vencimiento = ?\");\n            params.push(fecha_vencimiento);\n        }\n        if (observaciones !== undefined) {\n            updates.push(\"observaciones = ?\");\n            params.push(observaciones);\n        }\n        if (updates.length > 0) {\n            params.push(id_receta);\n            await connection.query(`UPDATE ${TABLE_RECETAS} SET ${updates.join(\", \")} WHERE id_receta = ?`, params);\n        }\n        // actualizar medicamentos\n        if (medicamentos && Array.isArray(medicamentos)) {\n            await connection.query(`DELETE FROM ${TABLE_MEDICAMENTOS} WHERE id_receta = ?`, [\n                id_receta\n            ]);\n            for (const med of medicamentos){\n                await connection.query(`\r\n          INSERT INTO ${TABLE_MEDICAMENTOS} (\r\n            id_receta,\r\n            id_medicamento,\r\n            nombre_medicamento,\r\n            dosis,\r\n            frecuencia,\r\n            duracion,\r\n            cantidad,\r\n            unidad,\r\n            via_administracion,\r\n            instrucciones,\r\n            es_controlado,\r\n            codigo_medicamento\r\n          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n          `, [\n                    id_receta,\n                    null,\n                    med.nombre_medicamento,\n                    med.dosis,\n                    med.frecuencia,\n                    med.duracion || null,\n                    med.cantidad,\n                    med.unidad || \"unidades\",\n                    med.via_administracion || \"oral\",\n                    med.instrucciones || null,\n                    med.es_controlado ? 1 : 0,\n                    med.codigo_medicamento || null\n                ]);\n            }\n        }\n        await registrarAuditoria(id_receta, \"ACTUALIZACION\", idUsuario, \"Receta actualizada\");\n        await connection.commit();\n        // volver a traerla\n        const recetasActualizadas = await obtenerRecetas(medico.id_medico, new Date().toISOString().split(\"T\")[0], new Date().toISOString().split(\"T\")[0]);\n        const recetaActualizada = recetasActualizadas.find((r)=>r.id_receta === id_receta);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Receta actualizada exitosamente\",\n            receta: recetaActualizada\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        await connection.rollback();\n        console.error(\"❌ Error en PUT /api/medico/recetas:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    } finally{\n        connection.release();\n    }\n}\n// ========================================\n// DELETE - Anular receta\n// ========================================\nasync function DELETE(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const searchParams = request.nextUrl.searchParams;\n        const idReceta = searchParams.get(\"id_receta\");\n        const motivo = searchParams.get(\"motivo\") || \"Anulada por el m\\xe9dico\";\n        if (!idReceta) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"ID de receta requerido\"\n            }, {\n                status: 400\n            });\n        }\n        const [receta] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`SELECT * FROM ${TABLE_RECETAS} WHERE id_receta = ? AND id_medico = ?`, [\n            idReceta,\n            medico.id_medico\n        ]);\n        if (receta.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Receta no encontrada\"\n            }, {\n                status: 404\n            });\n        }\n        if (receta[0].estado === \"anulada\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"La receta ya est\\xe1 anulada\"\n            }, {\n                status: 400\n            });\n        }\n        if (receta[0].estado === \"dispensada\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No se puede anular una receta ya dispensada\"\n            }, {\n                status: 400\n            });\n        }\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE ${TABLE_RECETAS} SET estado = 'anulada' WHERE id_receta = ?`, [\n            idReceta\n        ]);\n        await registrarAuditoria(Number(idReceta), \"ANULACION\", idUsuario, motivo);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Receta anulada exitosamente\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"❌ Error en DELETE /api/medico/recetas:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tZWRpY28vcmVjZXRhcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLGtDQUFrQztBQUNzQjtBQUM1QjtBQUVBO0FBRTVCLDJDQUEyQztBQUMzQywrQ0FBK0M7QUFDL0MsMkNBQTJDO0FBQzNDLE1BQU1HLGdCQUFnQjtBQUN0QixNQUFNQyxxQkFBcUI7QUFvQzNCLDJDQUEyQztBQUMzQywrQkFBK0I7QUFDL0IsMkNBQTJDO0FBRTNDLE1BQU1DLDRCQUE0QjtJQUNoQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVELFNBQVNDLGdCQUFnQkMsT0FBb0I7SUFDM0MsTUFBTUMsZUFBZUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYTtJQUV0RCxJQUFJRixjQUFjO1FBQ2hCLE1BQU1HLFVBQVVILGFBQ2JJLEtBQUssQ0FBQyxLQUNOQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsSUFBSSxJQUNqQkMsTUFBTSxDQUFDQyxTQUNQQyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0w7WUFDWixNQUFNLENBQUNNLEdBQUcsR0FBR0MsS0FBSyxHQUFHUCxFQUFFRixLQUFLLENBQUM7WUFDN0JPLEdBQUcsQ0FBQ0MsRUFBRSxHQUFHQyxLQUFLQyxJQUFJLENBQUM7WUFDbkIsT0FBT0g7UUFDVCxHQUFHLENBQUM7UUFFTixLQUFLLE1BQU1JLFFBQVFsQiwwQkFBMkI7WUFDNUMsSUFBSU0sT0FBTyxDQUFDWSxLQUFLLEVBQUU7Z0JBQ2pCLE9BQU9DLG1CQUFtQmIsT0FBTyxDQUFDWSxLQUFLO1lBQ3pDO1FBQ0Y7SUFDRjtJQUVBLE1BQU1FLE9BQU9sQixRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNqQyxJQUFJZSxNQUFNQyxXQUFXLFlBQVk7UUFDL0IsT0FBT0QsS0FBS0UsS0FBSyxDQUFDO0lBQ3BCO0lBRUEsT0FBTztBQUNUO0FBRUEsMkNBQTJDO0FBQzNDLHVCQUF1QjtBQUN2QiwyQ0FB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cC9hcGkvbWVkaWNvL3JlY2V0YXMvcm91dGUudHM/YTgyZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHAvYXBpL21lZGljby9yZWNldGFzL3JvdXRlLnRzXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHBvb2wgZnJvbSBcIkAvbGliL2RiXCI7XHJcbmltcG9ydCB7IFJvd0RhdGFQYWNrZXQsIFJlc3VsdFNldEhlYWRlciB9IGZyb20gXCJteXNxbDJcIjtcclxuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIENPTlNUQU5URVMgREUgVEFCTEFTIChhanVzdGFkYXMgYSB0dSBzY2hlbWEpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuY29uc3QgVEFCTEVfUkVDRVRBUyA9IFwicmVjZXRhc19tZWRpY2FzXCI7XHJcbmNvbnN0IFRBQkxFX01FRElDQU1FTlRPUyA9IFwicmVjZXRhX21lZGljYW1lbnRvc1wiO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBUSVBPU1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbnRlcmZhY2UgTWVkaWNvRGF0YSB7XHJcbiAgaWRfbWVkaWNvOiBudW1iZXI7XHJcbiAgaWRfdXN1YXJpbzogbnVtYmVyO1xyXG4gIGlkX2NlbnRyb19wcmluY2lwYWw6IG51bWJlcjtcclxuICBudW1lcm9fcmVnaXN0cm9fbWVkaWNvOiBzdHJpbmc7XHJcbiAgbm9tYnJlX2NvbXBsZXRvOiBzdHJpbmc7XHJcbiAgZXNwZWNpYWxpZGFkX3ByaW5jaXBhbDogc3RyaW5nO1xyXG4gIGZpcm1hX2RpZ2l0YWw/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBFc3RhZGlzdGljYXNSZWNldGFzIHtcclxuICB0b3RhbF9yZWNldGFzOiBudW1iZXI7XHJcbiAgZW1pdGlkYXM6IG51bWJlcjtcclxuICBkaXNwZW5zYWRhczogbnVtYmVyO1xyXG4gIHZlbmNpZGFzOiBudW1iZXI7XHJcbiAgYW51bGFkYXM6IG51bWJlcjtcclxuICB0b3RhbF9tZWRpY2FtZW50b3M6IG51bWJlcjtcclxuICBtZWRpY2FtZW50b3NfY29udHJvbGFkb3M6IG51bWJlcjtcclxuICByZWNldGFzX2Nyb25pY2FzOiBudW1iZXI7XHJcbiAgdGFzYV9kaXNwZW5zYWNpb246IG51bWJlcjtcclxuICB2YWxvcl90b3RhbF9wcmVzY3JpdG86IG51bWJlcjtcclxuICBwcm9tZWRpb19tZWRpY2FtZW50b3NfcG9yX3JlY2V0YTogbnVtYmVyO1xyXG4gIHRpcG9zX3JlY2V0YToge1xyXG4gICAgc2ltcGxlOiBudW1iZXI7XHJcbiAgICByZXRlbmlkYTogbnVtYmVyO1xyXG4gICAgY29udHJvbGFkYTogbnVtYmVyO1xyXG4gICAgbWFnaXN0cmFsOiBudW1iZXI7XHJcbiAgfTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBIRUxQRVIgUEFSQSBPQlRFTkVSIEVMIFRPS0VOXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmNvbnN0IFNFU1NJT05fQ09PS0lFX0NBTkRJREFURVMgPSBbXHJcbiAgXCJzZXNzaW9uXCIsXHJcbiAgXCJzZXNzaW9uX3Rva2VuXCIsXHJcbiAgXCJtZWRpc2FsdWRfc2Vzc2lvblwiLFxyXG4gIFwiYXV0aF9zZXNzaW9uXCIsXHJcbiAgXCJuZXh0LWF1dGguc2Vzc2lvbi10b2tlblwiLFxyXG4gIFwiX19TZWN1cmUtbmV4dC1hdXRoLnNlc3Npb24tdG9rZW5cIixcclxuXTtcclxuXHJcbmZ1bmN0aW9uIGdldFNlc3Npb25Ub2tlbihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xyXG4gIGNvbnN0IGNvb2tpZUhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJjb29raWVcIikgfHwgXCJcIjtcclxuXHJcbiAgaWYgKGNvb2tpZUhlYWRlcikge1xyXG4gICAgY29uc3QgY29va2llcyA9IGNvb2tpZUhlYWRlclxyXG4gICAgICAuc3BsaXQoXCI7XCIpXHJcbiAgICAgIC5tYXAoKGMpID0+IGMudHJpbSgpKVxyXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgIC5yZWR1Y2UoKGFjYywgYykgPT4ge1xyXG4gICAgICAgIGNvbnN0IFtrLCAuLi5yZXN0XSA9IGMuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIGFjY1trXSA9IHJlc3Quam9pbihcIj1cIik7XHJcbiAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPik7XHJcblxyXG4gICAgZm9yIChjb25zdCBuYW1lIG9mIFNFU1NJT05fQ09PS0lFX0NBTkRJREFURVMpIHtcclxuICAgICAgaWYgKGNvb2tpZXNbbmFtZV0pIHtcclxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZXNbbmFtZV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBhdXRoID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIik7XHJcbiAgaWYgKGF1dGg/LnN0YXJ0c1dpdGgoXCJCZWFyZXIgXCIpKSB7XHJcbiAgICByZXR1cm4gYXV0aC5zbGljZSg3KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEZVTkNJT05FUyBBVVhJTElBUkVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyhcclxuICBpZFVzdWFyaW86IG51bWJlclxyXG4pOiBQcm9taXNlPE1lZGljb0RhdGEgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgbS5pZF9tZWRpY28sXHJcbiAgICAgICAgbS5pZF91c3VhcmlvLFxyXG4gICAgICAgIG0uaWRfY2VudHJvX3ByaW5jaXBhbCxcclxuICAgICAgICBtLm51bWVyb19yZWdpc3Ryb19tZWRpY28sXHJcbiAgICAgICAgQ09OQ0FUKHUubm9tYnJlLCAnICcsIHUuYXBlbGxpZG9fcGF0ZXJubywgJyAnLCBDT0FMRVNDRSh1LmFwZWxsaWRvX21hdGVybm8sICcnKSkgYXMgbm9tYnJlX2NvbXBsZXRvLFxyXG4gICAgICAgIGUubm9tYnJlIGFzIGVzcGVjaWFsaWRhZF9wcmluY2lwYWwsXHJcbiAgICAgICAgbS5maXJtYV9kaWdpdGFsXHJcbiAgICAgIEZST00gbWVkaWNvcyBtXHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdSBPTiBtLmlkX3VzdWFyaW8gPSB1LmlkX3VzdWFyaW9cclxuICAgICAgTEVGVCBKT0lOIGVzcGVjaWFsaWRhZGVzIGUgT04gbS5pZF9lc3BlY2lhbGlkYWRfcHJpbmNpcGFsID0gZS5pZF9lc3BlY2lhbGlkYWRcclxuICAgICAgV0hFUkUgbS5pZF91c3VhcmlvID0gPyBBTkQgbS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtpZFVzdWFyaW9dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcm93c1swXSBhcyBNZWRpY29EYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgb2J0ZW5lciBtw6lkaWNvOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXJOdW1lcm9SZWNldGEoXHJcbiAgaWRNZWRpY286IG51bWJlcixcclxuICBpZENlbnRybzogbnVtYmVyLFxyXG4gIHRpcG9SZWNldGE6IHN0cmluZ1xyXG4pOiBzdHJpbmcge1xyXG4gIGNvbnN0IGZlY2hhID0gbmV3IERhdGUoKTtcclxuICBjb25zdCBhw7FvID0gZmVjaGEuZ2V0RnVsbFllYXIoKTtcclxuICBjb25zdCBtZXMgPSBTdHJpbmcoZmVjaGEuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICBjb25zdCBkaWEgPSBTdHJpbmcoZmVjaGEuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCBcIjBcIik7XHJcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKS50b1N0cmluZygpLnNsaWNlKC02KTtcclxuXHJcbiAgY29uc3QgcHJlZmlqbyA9IHRpcG9SZWNldGEgPT09IFwiY29udHJvbGFkYVwiID8gXCJSQ1wiIDogXCJSWFwiO1xyXG4gIHJldHVybiBgJHtwcmVmaWpvfS0ke2HDsW99JHttZXN9JHtkaWF9LSR7aWRNZWRpY299LSR7aWRDZW50cm99LSR7dGltZXN0YW1wfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXJDb2RpZ29WZXJpZmljYWNpb24oKTogc3RyaW5nIHtcclxuICByZXR1cm4gY3J5cHRvLnJhbmRvbUJ5dGVzKDYpLnRvU3RyaW5nKFwiaGV4XCIpLnRvVXBwZXJDYXNlKCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJSZWNldGFzKFxyXG4gIGlkTWVkaWNvOiBudW1iZXIsXHJcbiAgZmVjaGFJbmljaW86IHN0cmluZyxcclxuICBmZWNoYUZpbjogc3RyaW5nLFxyXG4gIGVzdGFkb3M/OiBzdHJpbmdbXSxcclxuICB0aXBvcz86IHN0cmluZ1tdLFxyXG4gIHBhY2llbnRlPzogc3RyaW5nLFxyXG4gIGVzQ3JvbmljYT86IGJvb2xlYW5cclxuKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gIHRyeSB7XHJcbiAgICBsZXQgcXVlcnkgPSBgXHJcbiAgICAgIFNFTEVDVCBcclxuICAgICAgICByLmlkX3JlY2V0YSxcclxuICAgICAgICByLm51bWVyb19yZWNldGEsXHJcbiAgICAgICAgci5jb2RpZ29fdmVyaWZpY2FjaW9uLFxyXG4gICAgICAgIHIuaWRfcGFjaWVudGUsXHJcbiAgICAgICAgci5pZF9tZWRpY28sXHJcbiAgICAgICAgci5pZF9jZW50cm8sXHJcbiAgICAgICAgci5mZWNoYV9lbWlzaW9uLFxyXG4gICAgICAgIHIuZmVjaGFfdmVuY2ltaWVudG8sXHJcbiAgICAgICAgci50aXBvX3JlY2V0YSxcclxuICAgICAgICByLmRpYWdub3N0aWNvLFxyXG4gICAgICAgIHIuY29kaWdvX2NpZTEwLFxyXG4gICAgICAgIHIuZXN0YWRvLFxyXG4gICAgICAgIHIuZXNfY3JvbmljYSxcclxuICAgICAgICByLm9ic2VydmFjaW9uZXMsXHJcblxyXG4gICAgICAgIC0tIGRhdG9zIHBhY2llbnRlXHJcbiAgICAgICAgcC5pZF9wYWNpZW50ZSxcclxuICAgICAgICBwLnJ1dCBBUyBwYWNpZW50ZV9ydXQsXHJcbiAgICAgICAgQ09OQ0FUKHAubm9tYnJlLCAnICcsIHAuYXBlbGxpZG9fcGF0ZXJubywgJyAnLCBDT0FMRVNDRShwLmFwZWxsaWRvX21hdGVybm8sICcnKSkgQVMgcGFjaWVudGVfbm9tYnJlX2NvbXBsZXRvLFxyXG4gICAgICAgIFRJTUVTVEFNUERJRkYoWUVBUiwgcC5mZWNoYV9uYWNpbWllbnRvLCBDVVJEQVRFKCkpIEFTIHBhY2llbnRlX2VkYWQsXHJcbiAgICAgICAgcC5nZW5lcm8gQVMgcGFjaWVudGVfZ2VuZXJvLFxyXG4gICAgICAgIHAudGVsZWZvbm8gQVMgcGFjaWVudGVfdGVsZWZvbm8sXHJcbiAgICAgICAgcC5lbWFpbCBBUyBwYWNpZW50ZV9lbWFpbCxcclxuICAgICAgICBwLmZvdG9fdXJsIEFTIHBhY2llbnRlX2ZvdG9fdXJsLFxyXG4gICAgICAgIHAucHJldmlzaW9uIEFTIHBhY2llbnRlX3ByZXZpc2lvbixcclxuXHJcbiAgICAgICAgLS0gZGF0b3MgbWVkaWNvXHJcbiAgICAgICAgbS5pZF9tZWRpY28sXHJcbiAgICAgICAgbS5udW1lcm9fcmVnaXN0cm9fbWVkaWNvLFxyXG4gICAgICAgIENPTkNBVCh1bS5ub21icmUsICcgJywgdW0uYXBlbGxpZG9fcGF0ZXJubywgJyAnLCBDT0FMRVNDRSh1bS5hcGVsbGlkb19tYXRlcm5vLCAnJykpIEFTIG1lZGljb19ub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgZS5ub21icmUgQVMgbWVkaWNvX2VzcGVjaWFsaWRhZCxcclxuXHJcbiAgICAgICAgLS0gY2VudHJvXHJcbiAgICAgICAgYy5pZF9jZW50cm8sXHJcbiAgICAgICAgYy5ub21icmUgQVMgY2VudHJvX25vbWJyZSxcclxuICAgICAgICBjLmRpcmVjY2lvbiBBUyBjZW50cm9fZGlyZWNjaW9uLFxyXG4gICAgICAgIGMuY2l1ZGFkIEFTIGNlbnRyb19jaXVkYWQsXHJcbiAgICAgICAgYy50ZWxlZm9ubyBBUyBjZW50cm9fdGVsZWZvbm8sXHJcbiAgICAgICAgYy5lbWFpbCBBUyBjZW50cm9fZW1haWwsXHJcbiAgICAgICAgYy5sb2dvX3VybCBBUyBjZW50cm9fbG9nb191cmwsXHJcblxyXG4gICAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSAke1RBQkxFX01FRElDQU1FTlRPU30gV0hFUkUgaWRfcmVjZXRhID0gci5pZF9yZWNldGEpIEFTIHRvdGFsX21lZGljYW1lbnRvcyxcclxuICAgICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gJHtUQUJMRV9NRURJQ0FNRU5UT1N9IFdIRVJFIGlkX3JlY2V0YSA9IHIuaWRfcmVjZXRhIEFORCBlc19jb250cm9sYWRvID0gMSkgQVMgbWVkaWNhbWVudG9zX2NvbnRyb2xhZG9zLFxyXG4gICAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSAke1RBQkxFX01FRElDQU1FTlRPU30gV0hFUkUgaWRfcmVjZXRhID0gci5pZF9yZWNldGEgQU5EIGRpc3BlbnNhZG8gPSAxKSBBUyBtZWRpY2FtZW50b3NfZGlzcGVuc2Fkb3NcclxuICAgICAgRlJPTSAke1RBQkxFX1JFQ0VUQVN9IHJcclxuICAgICAgSU5ORVIgSk9JTiBwYWNpZW50ZXMgcCBPTiByLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgICBJTk5FUiBKT0lOIG1lZGljb3MgbSBPTiByLmlkX21lZGljbyA9IG0uaWRfbWVkaWNvXHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdW0gT04gbS5pZF91c3VhcmlvID0gdW0uaWRfdXN1YXJpb1xyXG4gICAgICBMRUZUIEpPSU4gZXNwZWNpYWxpZGFkZXMgZSBPTiBtLmlkX2VzcGVjaWFsaWRhZF9wcmluY2lwYWwgPSBlLmlkX2VzcGVjaWFsaWRhZFxyXG4gICAgICBJTk5FUiBKT0lOIGNlbnRyb3NfbWVkaWNvcyBjIE9OIHIuaWRfY2VudHJvID0gYy5pZF9jZW50cm9cclxuICAgICAgV0hFUkUgci5pZF9tZWRpY28gPSA/XHJcbiAgICAgICAgQU5EIERBVEUoci5mZWNoYV9lbWlzaW9uKSBCRVRXRUVOID8gQU5EID9cclxuICAgIGA7XHJcblxyXG4gICAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtpZE1lZGljbywgZmVjaGFJbmljaW8sIGZlY2hhRmluXTtcclxuXHJcbiAgICBpZiAoZXN0YWRvcyAmJiBlc3RhZG9zLmxlbmd0aCA+IDApIHtcclxuICAgICAgcXVlcnkgKz0gYCBBTkQgci5lc3RhZG8gSU4gKCR7ZXN0YWRvcy5tYXAoKCkgPT4gXCI/XCIpLmpvaW4oXCIsXCIpfSlgO1xyXG4gICAgICBwYXJhbXMucHVzaCguLi5lc3RhZG9zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGlwb3MgJiYgdGlwb3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBxdWVyeSArPSBgIEFORCByLnRpcG9fcmVjZXRhIElOICgke3RpcG9zLm1hcCgoKSA9PiBcIj9cIikuam9pbihcIixcIil9KWA7XHJcbiAgICAgIHBhcmFtcy5wdXNoKC4uLnRpcG9zKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocGFjaWVudGUgJiYgcGFjaWVudGUudHJpbSgpKSB7XHJcbiAgICAgIHF1ZXJ5ICs9IGAgQU5EIChcclxuICAgICAgICBDT05DQVQocC5ub21icmUsICcgJywgcC5hcGVsbGlkb19wYXRlcm5vLCAnICcsIENPQUxFU0NFKHAuYXBlbGxpZG9fbWF0ZXJubywgJycpKSBMSUtFID9cclxuICAgICAgICBPUiBwLnJ1dCBMSUtFID9cclxuICAgICAgICBPUiBwLmVtYWlsIExJS0UgP1xyXG4gICAgICApYDtcclxuICAgICAgY29uc3QgdGVybSA9IGAlJHtwYWNpZW50ZX0lYDtcclxuICAgICAgcGFyYW1zLnB1c2godGVybSwgdGVybSwgdGVybSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGVzQ3JvbmljYSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHF1ZXJ5ICs9IGAgQU5EIHIuZXNfY3JvbmljYSA9ID9gO1xyXG4gICAgICBwYXJhbXMucHVzaChlc0Nyb25pY2EgPyAxIDogMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcXVlcnkgKz0gYCBPUkRFUiBCWSByLmZlY2hhX2VtaXNpb24gREVTQ2A7XHJcblxyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KHF1ZXJ5LCBwYXJhbXMpO1xyXG5cclxuICAgIGNvbnN0IHJlY2V0YXMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgcm93cy5tYXAoYXN5bmMgKHJvdykgPT4ge1xyXG4gICAgICAgIGNvbnN0IFttZWRzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgICAgIGBcclxuICAgICAgICAgIFNFTEVDVFxyXG4gICAgICAgICAgICBpZF9yZWNldGFfbWVkaWNhbWVudG8sXHJcbiAgICAgICAgICAgIG5vbWJyZV9tZWRpY2FtZW50byxcclxuICAgICAgICAgICAgY29kaWdvX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgICBkb3NpcyxcclxuICAgICAgICAgICAgZnJlY3VlbmNpYSxcclxuICAgICAgICAgICAgZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhbnRpZGFkLFxyXG4gICAgICAgICAgICB1bmlkYWQsXHJcbiAgICAgICAgICAgIHZpYV9hZG1pbmlzdHJhY2lvbixcclxuICAgICAgICAgICAgaW5zdHJ1Y2Npb25lcyxcclxuICAgICAgICAgICAgZXNfY29udHJvbGFkbyxcclxuICAgICAgICAgICAgZGlzcGVuc2FkbyxcclxuICAgICAgICAgICAgZmVjaGFfZGlzcGVuc2FjaW9uXHJcbiAgICAgICAgICBGUk9NICR7VEFCTEVfTUVESUNBTUVOVE9TfVxyXG4gICAgICAgICAgV0hFUkUgaWRfcmVjZXRhID0gP1xyXG4gICAgICAgICAgT1JERVIgQlkgaWRfcmVjZXRhX21lZGljYW1lbnRvIEFTQ1xyXG4gICAgICAgICAgYCxcclxuICAgICAgICAgIFtyb3cuaWRfcmVjZXRhXVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBpZF9yZWNldGE6IHJvdy5pZF9yZWNldGEsXHJcbiAgICAgICAgICBudW1lcm9fcmVjZXRhOiByb3cubnVtZXJvX3JlY2V0YSxcclxuICAgICAgICAgIGNvZGlnb192ZXJpZmljYWNpb246IHJvdy5jb2RpZ29fdmVyaWZpY2FjaW9uLFxyXG4gICAgICAgICAgZmVjaGFfZW1pc2lvbjogcm93LmZlY2hhX2VtaXNpb24sXHJcbiAgICAgICAgICBmZWNoYV92ZW5jaW1pZW50bzogcm93LmZlY2hhX3ZlbmNpbWllbnRvLFxyXG4gICAgICAgICAgdGlwb19yZWNldGE6IHJvdy50aXBvX3JlY2V0YSxcclxuICAgICAgICAgIGRpYWdub3N0aWNvOiByb3cuZGlhZ25vc3RpY28sXHJcbiAgICAgICAgICBjb2RpZ29fY2llMTA6IHJvdy5jb2RpZ29fY2llMTAsXHJcbiAgICAgICAgICBlc3RhZG86IHJvdy5lc3RhZG8sXHJcbiAgICAgICAgICBlc19jcm9uaWNhOiByb3cuZXNfY3JvbmljYSA9PT0gMSxcclxuICAgICAgICAgIG9ic2VydmFjaW9uZXM6IHJvdy5vYnNlcnZhY2lvbmVzLFxyXG4gICAgICAgICAgcGFjaWVudGU6IHtcclxuICAgICAgICAgICAgaWRfcGFjaWVudGU6IHJvdy5pZF9wYWNpZW50ZSxcclxuICAgICAgICAgICAgcnV0OiByb3cucGFjaWVudGVfcnV0LFxyXG4gICAgICAgICAgICBub21icmVfY29tcGxldG86IHJvdy5wYWNpZW50ZV9ub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgICAgIGVkYWQ6IHJvdy5wYWNpZW50ZV9lZGFkLFxyXG4gICAgICAgICAgICBnZW5lcm86IHJvdy5wYWNpZW50ZV9nZW5lcm8sXHJcbiAgICAgICAgICAgIHRlbGVmb25vOiByb3cucGFjaWVudGVfdGVsZWZvbm8sXHJcbiAgICAgICAgICAgIGVtYWlsOiByb3cucGFjaWVudGVfZW1haWwsXHJcbiAgICAgICAgICAgIGZvdG9fdXJsOiByb3cucGFjaWVudGVfZm90b191cmwsXHJcbiAgICAgICAgICAgIHByZXZpc2lvbjogcm93LnBhY2llbnRlX3ByZXZpc2lvbixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtZWRpY286IHtcclxuICAgICAgICAgICAgaWRfbWVkaWNvOiByb3cuaWRfbWVkaWNvLFxyXG4gICAgICAgICAgICBudW1lcm9fcmVnaXN0cm9fbWVkaWNvOiByb3cubnVtZXJvX3JlZ2lzdHJvX21lZGljbyxcclxuICAgICAgICAgICAgbm9tYnJlX2NvbXBsZXRvOiByb3cubWVkaWNvX25vbWJyZV9jb21wbGV0byxcclxuICAgICAgICAgICAgZXNwZWNpYWxpZGFkX3ByaW5jaXBhbDogcm93Lm1lZGljb19lc3BlY2lhbGlkYWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY2VudHJvOiB7XHJcbiAgICAgICAgICAgIGlkX2NlbnRybzogcm93LmlkX2NlbnRybyxcclxuICAgICAgICAgICAgbm9tYnJlOiByb3cuY2VudHJvX25vbWJyZSxcclxuICAgICAgICAgICAgZGlyZWNjaW9uOiByb3cuY2VudHJvX2RpcmVjY2lvbixcclxuICAgICAgICAgICAgY2l1ZGFkOiByb3cuY2VudHJvX2NpdWRhZCxcclxuICAgICAgICAgICAgdGVsZWZvbm86IHJvdy5jZW50cm9fdGVsZWZvbm8sXHJcbiAgICAgICAgICAgIGVtYWlsOiByb3cuY2VudHJvX2VtYWlsLFxyXG4gICAgICAgICAgICBsb2dvX3VybDogcm93LmNlbnRyb19sb2dvX3VybCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBtZWRpY2FtZW50b3M6IG1lZHMubWFwKChtKSA9PiAoe1xyXG4gICAgICAgICAgICBpZF9tZWRpY2FtZW50b19yZWNldGE6IG0uaWRfcmVjZXRhX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgICBub21icmVfbWVkaWNhbWVudG86IG0ubm9tYnJlX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgICBjb2RpZ29fbWVkaWNhbWVudG86IG0uY29kaWdvX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgICBkb3NpczogbS5kb3NpcyxcclxuICAgICAgICAgICAgZnJlY3VlbmNpYTogbS5mcmVjdWVuY2lhLFxyXG4gICAgICAgICAgICBkdXJhY2lvbjogbS5kdXJhY2lvbixcclxuICAgICAgICAgICAgY2FudGlkYWQ6IG0uY2FudGlkYWQsXHJcbiAgICAgICAgICAgIHVuaWRhZDogbS51bmlkYWQsXHJcbiAgICAgICAgICAgIHZpYV9hZG1pbmlzdHJhY2lvbjogbS52aWFfYWRtaW5pc3RyYWNpb24sXHJcbiAgICAgICAgICAgIGluc3RydWNjaW9uZXM6IG0uaW5zdHJ1Y2Npb25lcyxcclxuICAgICAgICAgICAgZXNfY29udHJvbGFkbzogbS5lc19jb250cm9sYWRvID09PSAxLFxyXG4gICAgICAgICAgICBkaXNwZW5zYWRvOiBtLmRpc3BlbnNhZG8gPT09IDEsXHJcbiAgICAgICAgICAgIGZlY2hhX2Rpc3BlbnNhY2lvbjogbS5mZWNoYV9kaXNwZW5zYWNpb24sXHJcbiAgICAgICAgICB9KSksXHJcbiAgICAgICAgICBlc3RhZGlzdGljYXM6IHtcclxuICAgICAgICAgICAgdG90YWxfbWVkaWNhbWVudG9zOiByb3cudG90YWxfbWVkaWNhbWVudG9zLFxyXG4gICAgICAgICAgICBtZWRpY2FtZW50b3NfY29udHJvbGFkb3M6IHJvdy5tZWRpY2FtZW50b3NfY29udHJvbGFkb3MsXHJcbiAgICAgICAgICAgIG1lZGljYW1lbnRvc19kaXNwZW5zYWRvczogcm93Lm1lZGljYW1lbnRvc19kaXNwZW5zYWRvcyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHJlY2V0YXM7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIHJlY2V0YXM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXJFc3RhZGlzdGljYXMoXHJcbiAgaWRNZWRpY286IG51bWJlcixcclxuICBmZWNoYUluaWNpbzogc3RyaW5nLFxyXG4gIGZlY2hhRmluOiBzdHJpbmdcclxuKTogUHJvbWlzZTxFc3RhZGlzdGljYXNSZWNldGFzPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IFtlc3RhZGlzdGljYXNdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVCBcclxuICAgICAgICBDT1VOVChESVNUSU5DVCByLmlkX3JlY2V0YSkgQVMgdG90YWxfcmVjZXRhcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIHIuZXN0YWRvID0gJ2VtaXRpZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyBlbWl0aWRhcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIHIuZXN0YWRvID0gJ2Rpc3BlbnNhZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyBkaXNwZW5zYWRhcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIHIuZXN0YWRvID0gJ3ZlbmNpZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyB2ZW5jaWRhcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIHIuZXN0YWRvID0gJ2FudWxhZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyBhbnVsYWRhcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIHIuZXNfY3JvbmljYSA9IDEgVEhFTiAxIEVMU0UgMCBFTkQpIEFTIHJlY2V0YXNfY3JvbmljYXMsXHJcbiAgICAgICAgU1VNKENBU0UgV0hFTiByLnRpcG9fcmVjZXRhID0gJ3NpbXBsZScgVEhFTiAxIEVMU0UgMCBFTkQpIEFTIHRpcG9fc2ltcGxlLFxyXG4gICAgICAgIFNVTShDQVNFIFdIRU4gci50aXBvX3JlY2V0YSA9ICdyZXRlbmlkYScgVEhFTiAxIEVMU0UgMCBFTkQpIEFTIHRpcG9fcmV0ZW5pZGEsXHJcbiAgICAgICAgU1VNKENBU0UgV0hFTiByLnRpcG9fcmVjZXRhID0gJ2NvbnRyb2xhZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyB0aXBvX2NvbnRyb2xhZGEsXHJcbiAgICAgICAgU1VNKENBU0UgV0hFTiByLnRpcG9fcmVjZXRhID0gJ21hZ2lzdHJhbCcgVEhFTiAxIEVMU0UgMCBFTkQpIEFTIHRpcG9fbWFnaXN0cmFsLFxyXG4gICAgICAgIENPVU5UKG1yLmlkX3JlY2V0YV9tZWRpY2FtZW50bykgQVMgdG90YWxfbWVkaWNhbWVudG9zLFxyXG4gICAgICAgIFNVTShDQVNFIFdIRU4gbXIuZXNfY29udHJvbGFkbyA9IDEgVEhFTiAxIEVMU0UgMCBFTkQpIEFTIG1lZGljYW1lbnRvc19jb250cm9sYWRvcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIG1yLmRpc3BlbnNhZG8gPSAxIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyBtZWRpY2FtZW50b3NfZGlzcGVuc2Fkb3NcclxuICAgICAgRlJPTSAke1RBQkxFX1JFQ0VUQVN9IHJcclxuICAgICAgTEVGVCBKT0lOICR7VEFCTEVfTUVESUNBTUVOVE9TfSBtciBPTiByLmlkX3JlY2V0YSA9IG1yLmlkX3JlY2V0YVxyXG4gICAgICBXSEVSRSByLmlkX21lZGljbyA9ID9cclxuICAgICAgICBBTkQgREFURShyLmZlY2hhX2VtaXNpb24pIEJFVFdFRU4gPyBBTkQgP1xyXG4gICAgICBgLFxyXG4gICAgICBbaWRNZWRpY28sIGZlY2hhSW5pY2lvLCBmZWNoYUZpbl1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3Qgc3RhdHMgPSBlc3RhZGlzdGljYXNbMF07XHJcblxyXG4gICAgY29uc3QgdGFzYV9kaXNwZW5zYWNpb24gPVxyXG4gICAgICBzdGF0cy50b3RhbF9yZWNldGFzID4gMFxyXG4gICAgICAgID8gKHN0YXRzLmRpc3BlbnNhZGFzIC8gc3RhdHMudG90YWxfcmVjZXRhcykgKiAxMDBcclxuICAgICAgICA6IDA7XHJcblxyXG4gICAgY29uc3QgcHJvbWVkaW9fbWVkaWNhbWVudG9zID1cclxuICAgICAgc3RhdHMudG90YWxfcmVjZXRhcyA+IDBcclxuICAgICAgICA/IHN0YXRzLnRvdGFsX21lZGljYW1lbnRvcyAvIHN0YXRzLnRvdGFsX3JlY2V0YXNcclxuICAgICAgICA6IDA7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG90YWxfcmVjZXRhczogc3RhdHMudG90YWxfcmVjZXRhcyB8fCAwLFxyXG4gICAgICBlbWl0aWRhczogc3RhdHMuZW1pdGlkYXMgfHwgMCxcclxuICAgICAgZGlzcGVuc2FkYXM6IHN0YXRzLmRpc3BlbnNhZGFzIHx8IDAsXHJcbiAgICAgIHZlbmNpZGFzOiBzdGF0cy52ZW5jaWRhcyB8fCAwLFxyXG4gICAgICBhbnVsYWRhczogc3RhdHMuYW51bGFkYXMgfHwgMCxcclxuICAgICAgdG90YWxfbWVkaWNhbWVudG9zOiBzdGF0cy50b3RhbF9tZWRpY2FtZW50b3MgfHwgMCxcclxuICAgICAgbWVkaWNhbWVudG9zX2NvbnRyb2xhZG9zOiBzdGF0cy5tZWRpY2FtZW50b3NfY29udHJvbGFkb3MgfHwgMCxcclxuICAgICAgcmVjZXRhc19jcm9uaWNhczogc3RhdHMucmVjZXRhc19jcm9uaWNhcyB8fCAwLFxyXG4gICAgICB0YXNhX2Rpc3BlbnNhY2lvbjogcGFyc2VGbG9hdCh0YXNhX2Rpc3BlbnNhY2lvbi50b0ZpeGVkKDIpKSxcclxuICAgICAgLy8gdHUgdGFibGEgZGUgbWVkaWNhbWVudG9zIG5vIHRpZW5lIHByZWNpbywgYXPDrSBxdWUgbG8gZGVqYW1vcyBlbiAwXHJcbiAgICAgIHZhbG9yX3RvdGFsX3ByZXNjcml0bzogMCxcclxuICAgICAgcHJvbWVkaW9fbWVkaWNhbWVudG9zX3Bvcl9yZWNldGE6IHBhcnNlRmxvYXQoXHJcbiAgICAgICAgcHJvbWVkaW9fbWVkaWNhbWVudG9zLnRvRml4ZWQoMilcclxuICAgICAgKSxcclxuICAgICAgdGlwb3NfcmVjZXRhOiB7XHJcbiAgICAgICAgc2ltcGxlOiBzdGF0cy50aXBvX3NpbXBsZSB8fCAwLFxyXG4gICAgICAgIHJldGVuaWRhOiBzdGF0cy50aXBvX3JldGVuaWRhIHx8IDAsXHJcbiAgICAgICAgY29udHJvbGFkYTogc3RhdHMudGlwb19jb250cm9sYWRhIHx8IDAsXHJcbiAgICAgICAgbWFnaXN0cmFsOiBzdGF0cy50aXBvX21hZ2lzdHJhbCB8fCAwLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbGN1bGFyIGVzdGFkw61zdGljYXM6XCIsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhclBhY2llbnRlKGlkUGFjaWVudGU6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBbcm93c10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBTRUxFQ1QgaWRfcGFjaWVudGUgRlJPTSBwYWNpZW50ZXMgV0hFUkUgaWRfcGFjaWVudGUgPSA/IEFORCBlc3RhZG8gPSAnYWN0aXZvJ2AsXHJcbiAgICAgIFtpZFBhY2llbnRlXVxyXG4gICAgKTtcclxuICAgIHJldHVybiByb3dzLmxlbmd0aCA+IDA7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCB2YWxpZGFyIHBhY2llbnRlOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlZ2lzdHJhckF1ZGl0b3JpYShcclxuICBpZFJlY2V0YTogbnVtYmVyLFxyXG4gIGFjY2lvbjogc3RyaW5nLFxyXG4gIGlkVXN1YXJpbzogbnVtYmVyLFxyXG4gIGRldGFsbGVzPzogc3RyaW5nXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgXHJcbiAgICAgIElOU0VSVCBJTlRPIGF1ZGl0b3JpYV9yZWNldGFzIChcclxuICAgICAgICBpZF9yZWNldGEsXHJcbiAgICAgICAgYWNjaW9uLFxyXG4gICAgICAgIGlkX3VzdWFyaW8sXHJcbiAgICAgICAgZGV0YWxsZXMsXHJcbiAgICAgICAgZmVjaGFfYWNjaW9uLFxyXG4gICAgICAgIGlwX2FkZHJlc3NcclxuICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8sIE5PVygpLCA/KVxyXG4gICAgICBgLFxyXG4gICAgICBbaWRSZWNldGEsIGFjY2lvbiwgaWRVc3VhcmlvLCBkZXRhbGxlcyB8fCBudWxsLCBcIjAuMC4wLjBcIl1cclxuICAgICk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCByZWdpc3RyYXIgYXVkaXRvcsOtYTpcIiwgZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBHRVRcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBnZXRTZXNzaW9uVG9rZW4ocmVxdWVzdCk7XHJcblxyXG4gICAgaWYgKCFzZXNzaW9uVG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGhheSBzZXNpw7NuIGFjdGl2YVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgW3Nlc2lvbmVzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1Qgc3UuaWRfdXN1YXJpb1xyXG4gICAgICBGUk9NIHNlc2lvbmVzX3VzdWFyaW9zIHN1XHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdSBPTiBzdS5pZF91c3VhcmlvID0gdS5pZF91c3VhcmlvXHJcbiAgICAgIFdIRVJFIHN1LnRva2VuID0gP1xyXG4gICAgICAgIEFORCBzdS5hY3RpdmEgPSAxXHJcbiAgICAgICAgQU5EIHN1LmZlY2hhX2V4cGlyYWNpb24gPiBOT1coKVxyXG4gICAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgIExJTUlUIDFcclxuICAgICAgYCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgaWYgKHNlc2lvbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiU2VzacOzbiBpbnbDoWxpZGEgbyBleHBpcmFkYVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRVc3VhcmlvID0gc2VzaW9uZXNbMF0uaWRfdXN1YXJpbztcclxuICAgIGNvbnN0IG1lZGljbyA9IGF3YWl0IG9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyhpZFVzdWFyaW8pO1xyXG5cclxuICAgIGlmICghbWVkaWNvKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyB0aWVuZXMgdW4gcmVnaXN0cm8gZGUgbcOpZGljbyBhY3Rpdm9cIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXM7XHJcbiAgICBjb25zdCBmZWNoYUluaWNpbyA9XHJcbiAgICAgIHNlYXJjaFBhcmFtcy5nZXQoXCJmZWNoYV9pbmljaW9cIikgfHxcclxuICAgICAgbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMClcclxuICAgICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIC5zcGxpdChcIlRcIilbMF07XHJcbiAgICBjb25zdCBmZWNoYUZpbiA9XHJcbiAgICAgIHNlYXJjaFBhcmFtcy5nZXQoXCJmZWNoYV9maW5cIikgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcclxuICAgIGNvbnN0IGVzdGFkb3MgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiZXN0YWRvc1wiKT8uc3BsaXQoXCIsXCIpO1xyXG4gICAgY29uc3QgdGlwb3MgPSBzZWFyY2hQYXJhbXMuZ2V0KFwidGlwb3NcIik/LnNwbGl0KFwiLFwiKTtcclxuICAgIGNvbnN0IHBhY2llbnRlID0gc2VhcmNoUGFyYW1zLmdldChcInBhY2llbnRlXCIpIHx8IFwiXCI7XHJcbiAgICBjb25zdCBlc0Nyb25pY2EgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiZXNfY3JvbmljYVwiKVxyXG4gICAgICA/IHNlYXJjaFBhcmFtcy5nZXQoXCJlc19jcm9uaWNhXCIpID09PSBcInRydWVcIlxyXG4gICAgICA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvLyBhY3R1YWxpemFyIGFjdGl2aWRhZFxyXG4gICAgYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFVQREFURSBzZXNpb25lc191c3VhcmlvcyBTRVQgdWx0aW1hX2FjdGl2aWRhZCA9IE5PVygpIFdIRVJFIHRva2VuID0gP2AsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IFtyZWNldGFzLCBlc3RhZGlzdGljYXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICBvYnRlbmVyUmVjZXRhcyhcclxuICAgICAgICBtZWRpY28uaWRfbWVkaWNvLFxyXG4gICAgICAgIGZlY2hhSW5pY2lvLFxyXG4gICAgICAgIGZlY2hhRmluLFxyXG4gICAgICAgIGVzdGFkb3MsXHJcbiAgICAgICAgdGlwb3MsXHJcbiAgICAgICAgcGFjaWVudGUsXHJcbiAgICAgICAgZXNDcm9uaWNhXHJcbiAgICAgICksXHJcbiAgICAgIGNhbGN1bGFyRXN0YWRpc3RpY2FzKG1lZGljby5pZF9tZWRpY28sIGZlY2hhSW5pY2lvLCBmZWNoYUZpbiksXHJcbiAgICBdKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIHJlY2V0YXMsXHJcbiAgICAgICAgZXN0YWRpc3RpY2FzLFxyXG4gICAgICAgIGZpbHRyb3M6IHtcclxuICAgICAgICAgIGZlY2hhX2luaWNpbzogZmVjaGFJbmljaW8sXHJcbiAgICAgICAgICBmZWNoYV9maW46IGZlY2hhRmluLFxyXG4gICAgICAgICAgZXN0YWRvczogZXN0YWRvcyB8fCBbXSxcclxuICAgICAgICAgIHRpcG9zOiB0aXBvcyB8fCBbXSxcclxuICAgICAgICAgIHBhY2llbnRlOiBwYWNpZW50ZSB8fCBcIlwiLFxyXG4gICAgICAgICAgZXNfY3JvbmljYTogZXNDcm9uaWNhLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbWVkaWNvOiB7XHJcbiAgICAgICAgICBpZF9tZWRpY286IG1lZGljby5pZF9tZWRpY28sXHJcbiAgICAgICAgICBub21icmVfY29tcGxldG86IG1lZGljby5ub21icmVfY29tcGxldG8sXHJcbiAgICAgICAgICBudW1lcm9fcmVnaXN0cm9fbWVkaWNvOiBtZWRpY28ubnVtZXJvX3JlZ2lzdHJvX21lZGljbyxcclxuICAgICAgICAgIGVzcGVjaWFsaWRhZF9wcmluY2lwYWw6IG1lZGljby5lc3BlY2lhbGlkYWRfcHJpbmNpcGFsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIEdFVCAvYXBpL21lZGljby9yZWNldGFzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxyXG4gICAgICAgIGRldGFpbHM6XHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBQT1NUIC0gQ3JlYXIgbnVldmEgcmVjZXRhXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3QpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgc2VzacOzbiBhY3RpdmFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtzZXNpb25lc10gPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHN1LmlkX3VzdWFyaW9cclxuICAgICAgRlJPTSBzZXNpb25lc191c3VhcmlvcyBzdVxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gc3UuaWRfdXN1YXJpbyA9IHUuaWRfdXN1YXJpb1xyXG4gICAgICBXSEVSRSBzdS50b2tlbiA9ID9cclxuICAgICAgICBBTkQgc3UuYWN0aXZhID0gMVxyXG4gICAgICAgIEFORCBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKClcclxuICAgICAgICBBTkQgdS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzZXNpb25lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlNlc2nDs24gaW52w6FsaWRhIG8gZXhwaXJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlkVXN1YXJpbyA9IHNlc2lvbmVzWzBdLmlkX3VzdWFyaW87XHJcbiAgICBjb25zdCBtZWRpY28gPSBhd2FpdCBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oaWRVc3VhcmlvKTtcclxuXHJcbiAgICBpZiAoIW1lZGljbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gdGllbmVzIHVuIHJlZ2lzdHJvIGRlIG3DqWRpY28gYWN0aXZvXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGlkX3BhY2llbnRlLFxyXG4gICAgICB0aXBvX3JlY2V0YSA9IFwic2ltcGxlXCIsXHJcbiAgICAgIGRpYWdub3N0aWNvLFxyXG4gICAgICBjb2RpZ29fY2llMTAsXHJcbiAgICAgIGZlY2hhX3ZlbmNpbWllbnRvLFxyXG4gICAgICBlc19jcm9uaWNhID0gZmFsc2UsXHJcbiAgICAgIG9ic2VydmFjaW9uZXMsXHJcbiAgICAgIG1lZGljYW1lbnRvcyA9IFtdLFxyXG4gICAgfSA9IGJvZHk7XHJcblxyXG4gICAgaWYgKCFpZF9wYWNpZW50ZSB8fCAhZGlhZ25vc3RpY28gfHwgbWVkaWNhbWVudG9zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogXCJGYWx0YW4gZGF0b3MgcmVxdWVyaWRvcyAocGFjaWVudGUsIGRpYWduw7NzdGljbywgbWVkaWNhbWVudG9zKVwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGFjaWVudGVWYWxpZG8gPSBhd2FpdCB2YWxpZGFyUGFjaWVudGUoaWRfcGFjaWVudGUpO1xyXG4gICAgaWYgKCFwYWNpZW50ZVZhbGlkbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUGFjaWVudGUgbm8gZW5jb250cmFkbyBvIGluYWN0aXZvXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBjb25uZWN0aW9uLmJlZ2luVHJhbnNhY3Rpb24oKTtcclxuXHJcbiAgICBjb25zdCBudW1lcm9SZWNldGEgPSBnZW5lcmFyTnVtZXJvUmVjZXRhKFxyXG4gICAgICBtZWRpY28uaWRfbWVkaWNvLFxyXG4gICAgICBtZWRpY28uaWRfY2VudHJvX3ByaW5jaXBhbCxcclxuICAgICAgdGlwb19yZWNldGFcclxuICAgICk7XHJcbiAgICBjb25zdCBjb2RpZ29WZXJpZmljYWNpb24gPSBnZW5lcmFyQ29kaWdvVmVyaWZpY2FjaW9uKCk7XHJcblxyXG4gICAgLy8gZXN0YSBlcyB0dSB0YWJsYSByZWFsXHJcbiAgICBjb25zdCBbcmVzdWx0UmVjZXRhXSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnk8UmVzdWx0U2V0SGVhZGVyPihcclxuICAgICAgYFxyXG4gICAgICBJTlNFUlQgSU5UTyAke1RBQkxFX1JFQ0VUQVN9IChcclxuICAgICAgICBpZF9jZW50cm8sXHJcbiAgICAgICAgaWRfcGFjaWVudGUsXHJcbiAgICAgICAgaWRfbWVkaWNvLFxyXG4gICAgICAgIHRpcG9fcmVjZXRhLFxyXG4gICAgICAgIGZlY2hhX2VtaXNpb24sXHJcbiAgICAgICAgZmVjaGFfdmVuY2ltaWVudG8sXHJcbiAgICAgICAgZXN0YWRvLFxyXG4gICAgICAgIG51bWVyb19yZWNldGEsXHJcbiAgICAgICAgY29kaWdvX3ZlcmlmaWNhY2lvbixcclxuICAgICAgICBkaWFnbm9zdGljbyxcclxuICAgICAgICBjb2RpZ29fY2llMTAsXHJcbiAgICAgICAgZXNfY3JvbmljYSxcclxuICAgICAgICBvYnNlcnZhY2lvbmVzXHJcbiAgICAgICkgVkFMVUVTICg/LCA/LCA/LCA/LCBOT1coKSwgPywgJ2VtaXRpZGEnLCA/LCA/LCA/LCA/LCA/LCA/KVxyXG4gICAgICBgLFxyXG4gICAgICBbXHJcbiAgICAgICAgbWVkaWNvLmlkX2NlbnRyb19wcmluY2lwYWwsXHJcbiAgICAgICAgaWRfcGFjaWVudGUsXHJcbiAgICAgICAgbWVkaWNvLmlkX21lZGljbyxcclxuICAgICAgICB0aXBvX3JlY2V0YSxcclxuICAgICAgICBmZWNoYV92ZW5jaW1pZW50byB8fCBudWxsLFxyXG4gICAgICAgIG51bWVyb1JlY2V0YSxcclxuICAgICAgICBjb2RpZ29WZXJpZmljYWNpb24sXHJcbiAgICAgICAgZGlhZ25vc3RpY28sXHJcbiAgICAgICAgY29kaWdvX2NpZTEwIHx8IG51bGwsXHJcbiAgICAgICAgZXNfY3JvbmljYSA/IDEgOiAwLFxyXG4gICAgICAgIG9ic2VydmFjaW9uZXMgfHwgbnVsbCxcclxuICAgICAgXVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBpZFJlY2V0YSA9IHJlc3VsdFJlY2V0YS5pbnNlcnRJZDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG1lZCBvZiBtZWRpY2FtZW50b3MpIHtcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcclxuICAgICAgICBgXHJcbiAgICAgICAgSU5TRVJUIElOVE8gJHtUQUJMRV9NRURJQ0FNRU5UT1N9IChcclxuICAgICAgICAgIGlkX3JlY2V0YSxcclxuICAgICAgICAgIGlkX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgbm9tYnJlX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgZG9zaXMsXHJcbiAgICAgICAgICBmcmVjdWVuY2lhLFxyXG4gICAgICAgICAgZHVyYWNpb24sXHJcbiAgICAgICAgICBjYW50aWRhZCxcclxuICAgICAgICAgIHVuaWRhZCxcclxuICAgICAgICAgIHZpYV9hZG1pbmlzdHJhY2lvbixcclxuICAgICAgICAgIGluc3RydWNjaW9uZXMsXHJcbiAgICAgICAgICBlc19jb250cm9sYWRvLFxyXG4gICAgICAgICAgY29kaWdvX21lZGljYW1lbnRvXHJcbiAgICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pXHJcbiAgICAgICAgYCxcclxuICAgICAgICBbXHJcbiAgICAgICAgICBpZFJlY2V0YSxcclxuICAgICAgICAgIG51bGwsIC8vIHNpIHRpZW5lcyBpZCBkZSBjYXTDoWxvZ28gbG8gcG9uZXMgYXF1w61cclxuICAgICAgICAgIG1lZC5ub21icmVfbWVkaWNhbWVudG8sXHJcbiAgICAgICAgICBtZWQuZG9zaXMsXHJcbiAgICAgICAgICBtZWQuZnJlY3VlbmNpYSxcclxuICAgICAgICAgIG1lZC5kdXJhY2lvbiB8fCBudWxsLFxyXG4gICAgICAgICAgbWVkLmNhbnRpZGFkLFxyXG4gICAgICAgICAgbWVkLnVuaWRhZCB8fCBcInVuaWRhZGVzXCIsXHJcbiAgICAgICAgICBtZWQudmlhX2FkbWluaXN0cmFjaW9uIHx8IFwib3JhbFwiLFxyXG4gICAgICAgICAgbWVkLmluc3RydWNjaW9uZXMgfHwgbnVsbCxcclxuICAgICAgICAgIG1lZC5lc19jb250cm9sYWRvID8gMSA6IDAsXHJcbiAgICAgICAgICBtZWQuY29kaWdvX21lZGljYW1lbnRvIHx8IG51bGwsXHJcbiAgICAgICAgXVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHJlZ2lzdHJhckF1ZGl0b3JpYShcclxuICAgICAgaWRSZWNldGEsXHJcbiAgICAgIFwiQ1JFQUNJT05cIixcclxuICAgICAgaWRVc3VhcmlvLFxyXG4gICAgICBgUmVjZXRhIGNyZWFkYSBjb24gJHttZWRpY2FtZW50b3MubGVuZ3RofSBtZWRpY2FtZW50b3NgXHJcbiAgICApO1xyXG5cclxuICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWl0KCk7XHJcblxyXG4gICAgLy8gdHJhZXJsYSBkZSBudWV2byBwYXJhIGRldm9sdmVybGEgY29tcGxldGFcclxuICAgIGNvbnN0IHJlY2V0YXNEZWxEaWEgPSBhd2FpdCBvYnRlbmVyUmVjZXRhcyhcclxuICAgICAgbWVkaWNvLmlkX21lZGljbyxcclxuICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSxcclxuICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCByZWNldGFOdWV2YSA9XHJcbiAgICAgIHJlY2V0YXNEZWxEaWEuZmluZCgocikgPT4gci5pZF9yZWNldGEgPT09IGlkUmVjZXRhKSB8fCBudWxsO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogXCJSZWNldGEgZW1pdGlkYSBleGl0b3NhbWVudGVcIixcclxuICAgICAgICByZWNldGE6IHJlY2V0YU51ZXZhLFxyXG4gICAgICAgIGlkX3JlY2V0YTogaWRSZWNldGEsXHJcbiAgICAgICAgbnVtZXJvX3JlY2V0YTogbnVtZXJvUmVjZXRhLFxyXG4gICAgICAgIGNvZGlnb192ZXJpZmljYWNpb246IGNvZGlnb1ZlcmlmaWNhY2lvbixcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMSB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucm9sbGJhY2soKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gUE9TVCAvYXBpL21lZGljby9yZWNldGFzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxyXG4gICAgICAgIGRldGFpbHM6XHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUFVUIC0gQWN0dWFsaXphciByZWNldGFcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IGdldFNlc3Npb25Ub2tlbihyZXF1ZXN0KTtcclxuXHJcbiAgICBpZiAoIXNlc3Npb25Ub2tlbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gaGF5IHNlc2nDs24gYWN0aXZhXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbc2VzaW9uZXNdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgXHJcbiAgICAgIFNFTEVDVCBzdS5pZF91c3VhcmlvXHJcbiAgICAgIEZST00gc2VzaW9uZXNfdXN1YXJpb3Mgc3VcclxuICAgICAgSU5ORVIgSk9JTiB1c3VhcmlvcyB1IE9OIHN1LmlkX3VzdWFyaW8gPSB1LmlkX3VzdWFyaW9cclxuICAgICAgV0hFUkUgc3UudG9rZW4gPSA/XHJcbiAgICAgICAgQU5EIHN1LmFjdGl2YSA9IDFcclxuICAgICAgICBBTkQgc3UuZmVjaGFfZXhwaXJhY2lvbiA+IE5PVygpXHJcbiAgICAgICAgQU5EIHUuZXN0YWRvID0gJ2FjdGl2bydcclxuICAgICAgTElNSVQgMVxyXG4gICAgICBgLFxyXG4gICAgICBbc2Vzc2lvblRva2VuXVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoc2VzaW9uZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJTZXNpw7NuIGludsOhbGlkYSBvIGV4cGlyYWRhXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpZFVzdWFyaW8gPSBzZXNpb25lc1swXS5pZF91c3VhcmlvO1xyXG4gICAgY29uc3QgbWVkaWNvID0gYXdhaXQgb2J0ZW5lck1lZGljb0F1dGVudGljYWRvKGlkVXN1YXJpbyk7XHJcblxyXG4gICAgaWYgKCFtZWRpY28pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIHRpZW5lcyB1biByZWdpc3RybyBkZSBtw6lkaWNvIGFjdGl2b1wiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBpZF9yZWNldGEsXHJcbiAgICAgIGRpYWdub3N0aWNvLFxyXG4gICAgICBjb2RpZ29fY2llMTAsXHJcbiAgICAgIGZlY2hhX3ZlbmNpbWllbnRvLFxyXG4gICAgICBvYnNlcnZhY2lvbmVzLFxyXG4gICAgICBtZWRpY2FtZW50b3MsXHJcbiAgICB9ID0gYm9keTtcclxuXHJcbiAgICAvLyB2YWxpZGFyIHF1ZSBleGlzdGEgeSBzZWEgZGVsIG3DqWRpY29cclxuICAgIGNvbnN0IFtyZWNldGFBY3R1YWxdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke1RBQkxFX1JFQ0VUQVN9IFdIRVJFIGlkX3JlY2V0YSA9ID8gQU5EIGlkX21lZGljbyA9ID9gLFxyXG4gICAgICBbaWRfcmVjZXRhLCBtZWRpY28uaWRfbWVkaWNvXVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAocmVjZXRhQWN0dWFsLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUmVjZXRhIG5vIGVuY29udHJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNvbG8gZWRpdGFyIGVtaXRpZGFzXHJcbiAgICBpZiAocmVjZXRhQWN0dWFsWzBdLmVzdGFkbyAhPT0gXCJlbWl0aWRhXCIpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgZXJyb3I6IFwiU29sbyBzZSBwdWVkZW4gZWRpdGFyIHJlY2V0YXMgZW4gZXN0YWRvICdlbWl0aWRhJ1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgY29ubmVjdGlvbi5iZWdpblRyYW5zYWN0aW9uKCk7XHJcblxyXG4gICAgY29uc3QgdXBkYXRlczogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IHBhcmFtczogYW55W10gPSBbXTtcclxuXHJcbiAgICBpZiAoZGlhZ25vc3RpY28gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVzLnB1c2goXCJkaWFnbm9zdGljbyA9ID9cIik7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGRpYWdub3N0aWNvKTtcclxuICAgIH1cclxuICAgIGlmIChjb2RpZ29fY2llMTAgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVzLnB1c2goXCJjb2RpZ29fY2llMTAgPSA/XCIpO1xyXG4gICAgICBwYXJhbXMucHVzaChjb2RpZ29fY2llMTApO1xyXG4gICAgfVxyXG4gICAgaWYgKGZlY2hhX3ZlbmNpbWllbnRvICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdXBkYXRlcy5wdXNoKFwiZmVjaGFfdmVuY2ltaWVudG8gPSA/XCIpO1xyXG4gICAgICBwYXJhbXMucHVzaChmZWNoYV92ZW5jaW1pZW50byk7XHJcbiAgICB9XHJcbiAgICBpZiAob2JzZXJ2YWNpb25lcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHVwZGF0ZXMucHVzaChcIm9ic2VydmFjaW9uZXMgPSA/XCIpO1xyXG4gICAgICBwYXJhbXMucHVzaChvYnNlcnZhY2lvbmVzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodXBkYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGlkX3JlY2V0YSk7XHJcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoXHJcbiAgICAgICAgYFVQREFURSAke1RBQkxFX1JFQ0VUQVN9IFNFVCAke3VwZGF0ZXMuam9pbihcIiwgXCIpfSBXSEVSRSBpZF9yZWNldGEgPSA/YCxcclxuICAgICAgICBwYXJhbXNcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhY3R1YWxpemFyIG1lZGljYW1lbnRvc1xyXG4gICAgaWYgKG1lZGljYW1lbnRvcyAmJiBBcnJheS5pc0FycmF5KG1lZGljYW1lbnRvcykpIHtcclxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcclxuICAgICAgICBgREVMRVRFIEZST00gJHtUQUJMRV9NRURJQ0FNRU5UT1N9IFdIRVJFIGlkX3JlY2V0YSA9ID9gLFxyXG4gICAgICAgIFtpZF9yZWNldGFdXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBmb3IgKGNvbnN0IG1lZCBvZiBtZWRpY2FtZW50b3MpIHtcclxuICAgICAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxyXG4gICAgICAgICAgYFxyXG4gICAgICAgICAgSU5TRVJUIElOVE8gJHtUQUJMRV9NRURJQ0FNRU5UT1N9IChcclxuICAgICAgICAgICAgaWRfcmVjZXRhLFxyXG4gICAgICAgICAgICBpZF9tZWRpY2FtZW50byxcclxuICAgICAgICAgICAgbm9tYnJlX21lZGljYW1lbnRvLFxyXG4gICAgICAgICAgICBkb3NpcyxcclxuICAgICAgICAgICAgZnJlY3VlbmNpYSxcclxuICAgICAgICAgICAgZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhbnRpZGFkLFxyXG4gICAgICAgICAgICB1bmlkYWQsXHJcbiAgICAgICAgICAgIHZpYV9hZG1pbmlzdHJhY2lvbixcclxuICAgICAgICAgICAgaW5zdHJ1Y2Npb25lcyxcclxuICAgICAgICAgICAgZXNfY29udHJvbGFkbyxcclxuICAgICAgICAgICAgY29kaWdvX21lZGljYW1lbnRvXHJcbiAgICAgICAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcclxuICAgICAgICAgIGAsXHJcbiAgICAgICAgICBbXHJcbiAgICAgICAgICAgIGlkX3JlY2V0YSxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgbWVkLm5vbWJyZV9tZWRpY2FtZW50byxcclxuICAgICAgICAgICAgbWVkLmRvc2lzLFxyXG4gICAgICAgICAgICBtZWQuZnJlY3VlbmNpYSxcclxuICAgICAgICAgICAgbWVkLmR1cmFjaW9uIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG1lZC5jYW50aWRhZCxcclxuICAgICAgICAgICAgbWVkLnVuaWRhZCB8fCBcInVuaWRhZGVzXCIsXHJcbiAgICAgICAgICAgIG1lZC52aWFfYWRtaW5pc3RyYWNpb24gfHwgXCJvcmFsXCIsXHJcbiAgICAgICAgICAgIG1lZC5pbnN0cnVjY2lvbmVzIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG1lZC5lc19jb250cm9sYWRvID8gMSA6IDAsXHJcbiAgICAgICAgICAgIG1lZC5jb2RpZ29fbWVkaWNhbWVudG8gfHwgbnVsbCxcclxuICAgICAgICAgIF1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgcmVnaXN0cmFyQXVkaXRvcmlhKFxyXG4gICAgICBpZF9yZWNldGEsXHJcbiAgICAgIFwiQUNUVUFMSVpBQ0lPTlwiLFxyXG4gICAgICBpZFVzdWFyaW8sXHJcbiAgICAgIFwiUmVjZXRhIGFjdHVhbGl6YWRhXCJcclxuICAgICk7XHJcblxyXG4gICAgYXdhaXQgY29ubmVjdGlvbi5jb21taXQoKTtcclxuXHJcbiAgICAvLyB2b2x2ZXIgYSB0cmFlcmxhXHJcbiAgICBjb25zdCByZWNldGFzQWN0dWFsaXphZGFzID0gYXdhaXQgb2J0ZW5lclJlY2V0YXMoXHJcbiAgICAgIG1lZGljby5pZF9tZWRpY28sXHJcbiAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXHJcbiAgICAgIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgcmVjZXRhQWN0dWFsaXphZGEgPSByZWNldGFzQWN0dWFsaXphZGFzLmZpbmQoXHJcbiAgICAgIChyKSA9PiByLmlkX3JlY2V0YSA9PT0gaWRfcmVjZXRhXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgbWVzc2FnZTogXCJSZWNldGEgYWN0dWFsaXphZGEgZXhpdG9zYW1lbnRlXCIsXHJcbiAgICAgICAgcmVjZXRhOiByZWNldGFBY3R1YWxpemFkYSxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucm9sbGJhY2soKTtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gUFVUIC9hcGkvbWVkaWNvL3JlY2V0YXM6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgIGVycm9yOiBcIkVycm9yIGludGVybm8gZGVsIHNlcnZpZG9yXCIsXHJcbiAgICAgICAgZGV0YWlsczpcclxuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBlcnJvci5tZXNzYWdlIDogdW5kZWZpbmVkLFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBERUxFVEUgLSBBbnVsYXIgcmVjZXRhXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvblRva2VuID0gZ2V0U2Vzc2lvblRva2VuKHJlcXVlc3QpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgc2VzacOzbiBhY3RpdmFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtzZXNpb25lc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHN1LmlkX3VzdWFyaW9cclxuICAgICAgRlJPTSBzZXNpb25lc191c3VhcmlvcyBzdVxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gc3UuaWRfdXN1YXJpbyA9IHUuaWRfdXN1YXJpb1xyXG4gICAgICBXSEVSRSBzdS50b2tlbiA9ID9cclxuICAgICAgICBBTkQgc3UuYWN0aXZhID0gMVxyXG4gICAgICAgIEFORCBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKClcclxuICAgICAgICBBTkQgdS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzZXNpb25lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlNlc2nDs24gaW52w6FsaWRhIG8gZXhwaXJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlkVXN1YXJpbyA9IHNlc2lvbmVzWzBdLmlkX3VzdWFyaW87XHJcbiAgICBjb25zdCBtZWRpY28gPSBhd2FpdCBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oaWRVc3VhcmlvKTtcclxuXHJcbiAgICBpZiAoIW1lZGljbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gdGllbmVzIHVuIHJlZ2lzdHJvIGRlIG3DqWRpY28gYWN0aXZvXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zO1xyXG4gICAgY29uc3QgaWRSZWNldGEgPSBzZWFyY2hQYXJhbXMuZ2V0KFwiaWRfcmVjZXRhXCIpO1xyXG4gICAgY29uc3QgbW90aXZvID0gc2VhcmNoUGFyYW1zLmdldChcIm1vdGl2b1wiKSB8fCBcIkFudWxhZGEgcG9yIGVsIG3DqWRpY29cIjtcclxuXHJcbiAgICBpZiAoIWlkUmVjZXRhKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJJRCBkZSByZWNldGEgcmVxdWVyaWRvXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbcmVjZXRhXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCAqIEZST00gJHtUQUJMRV9SRUNFVEFTfSBXSEVSRSBpZF9yZWNldGEgPSA/IEFORCBpZF9tZWRpY28gPSA/YCxcclxuICAgICAgW2lkUmVjZXRhLCBtZWRpY28uaWRfbWVkaWNvXVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAocmVjZXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiUmVjZXRhIG5vIGVuY29udHJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZWNldGFbMF0uZXN0YWRvID09PSBcImFudWxhZGFcIikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTGEgcmVjZXRhIHlhIGVzdMOhIGFudWxhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChyZWNldGFbMF0uZXN0YWRvID09PSBcImRpc3BlbnNhZGFcIikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICBlcnJvcjogXCJObyBzZSBwdWVkZSBhbnVsYXIgdW5hIHJlY2V0YSB5YSBkaXNwZW5zYWRhXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBwb29sLnF1ZXJ5KFxyXG4gICAgICBgVVBEQVRFICR7VEFCTEVfUkVDRVRBU30gU0VUIGVzdGFkbyA9ICdhbnVsYWRhJyBXSEVSRSBpZF9yZWNldGEgPSA/YCxcclxuICAgICAgW2lkUmVjZXRhXVxyXG4gICAgKTtcclxuXHJcbiAgICBhd2FpdCByZWdpc3RyYXJBdWRpdG9yaWEoXHJcbiAgICAgIE51bWJlcihpZFJlY2V0YSksXHJcbiAgICAgIFwiQU5VTEFDSU9OXCIsXHJcbiAgICAgIGlkVXN1YXJpbyxcclxuICAgICAgbW90aXZvXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIlJlY2V0YSBhbnVsYWRhIGV4aXRvc2FtZW50ZVwiIH0sXHJcbiAgICAgIHsgc3RhdHVzOiAyMDAgfVxyXG4gICAgKTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIERFTEVURSAvYXBpL21lZGljby9yZWNldGFzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxyXG4gICAgICAgIGRldGFpbHM6XHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicG9vbCIsImNyeXB0byIsIlRBQkxFX1JFQ0VUQVMiLCJUQUJMRV9NRURJQ0FNRU5UT1MiLCJTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTIiwiZ2V0U2Vzc2lvblRva2VuIiwicmVxdWVzdCIsImNvb2tpZUhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJjb29raWVzIiwic3BsaXQiLCJtYXAiLCJjIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJyZWR1Y2UiLCJhY2MiLCJrIiwicmVzdCIsImpvaW4iLCJuYW1lIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXV0aCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsIm9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyIsImlkVXN1YXJpbyIsInJvd3MiLCJxdWVyeSIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsImdlbmVyYXJOdW1lcm9SZWNldGEiLCJpZE1lZGljbyIsImlkQ2VudHJvIiwidGlwb1JlY2V0YSIsImZlY2hhIiwiRGF0ZSIsImHDsW8iLCJnZXRGdWxsWWVhciIsIm1lcyIsIlN0cmluZyIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJkaWEiLCJnZXREYXRlIiwidGltZXN0YW1wIiwibm93IiwidG9TdHJpbmciLCJwcmVmaWpvIiwiZ2VuZXJhckNvZGlnb1ZlcmlmaWNhY2lvbiIsInJhbmRvbUJ5dGVzIiwidG9VcHBlckNhc2UiLCJvYnRlbmVyUmVjZXRhcyIsImZlY2hhSW5pY2lvIiwiZmVjaGFGaW4iLCJlc3RhZG9zIiwidGlwb3MiLCJwYWNpZW50ZSIsImVzQ3JvbmljYSIsInBhcmFtcyIsInB1c2giLCJ0ZXJtIiwidW5kZWZpbmVkIiwicmVjZXRhcyIsIlByb21pc2UiLCJhbGwiLCJyb3ciLCJtZWRzIiwiaWRfcmVjZXRhIiwibnVtZXJvX3JlY2V0YSIsImNvZGlnb192ZXJpZmljYWNpb24iLCJmZWNoYV9lbWlzaW9uIiwiZmVjaGFfdmVuY2ltaWVudG8iLCJ0aXBvX3JlY2V0YSIsImRpYWdub3N0aWNvIiwiY29kaWdvX2NpZTEwIiwiZXN0YWRvIiwiZXNfY3JvbmljYSIsIm9ic2VydmFjaW9uZXMiLCJpZF9wYWNpZW50ZSIsInJ1dCIsInBhY2llbnRlX3J1dCIsIm5vbWJyZV9jb21wbGV0byIsInBhY2llbnRlX25vbWJyZV9jb21wbGV0byIsImVkYWQiLCJwYWNpZW50ZV9lZGFkIiwiZ2VuZXJvIiwicGFjaWVudGVfZ2VuZXJvIiwidGVsZWZvbm8iLCJwYWNpZW50ZV90ZWxlZm9ubyIsImVtYWlsIiwicGFjaWVudGVfZW1haWwiLCJmb3RvX3VybCIsInBhY2llbnRlX2ZvdG9fdXJsIiwicHJldmlzaW9uIiwicGFjaWVudGVfcHJldmlzaW9uIiwibWVkaWNvIiwiaWRfbWVkaWNvIiwibnVtZXJvX3JlZ2lzdHJvX21lZGljbyIsIm1lZGljb19ub21icmVfY29tcGxldG8iLCJlc3BlY2lhbGlkYWRfcHJpbmNpcGFsIiwibWVkaWNvX2VzcGVjaWFsaWRhZCIsImNlbnRybyIsImlkX2NlbnRybyIsIm5vbWJyZSIsImNlbnRyb19ub21icmUiLCJkaXJlY2Npb24iLCJjZW50cm9fZGlyZWNjaW9uIiwiY2l1ZGFkIiwiY2VudHJvX2NpdWRhZCIsImNlbnRyb190ZWxlZm9ubyIsImNlbnRyb19lbWFpbCIsImxvZ29fdXJsIiwiY2VudHJvX2xvZ29fdXJsIiwibWVkaWNhbWVudG9zIiwibSIsImlkX21lZGljYW1lbnRvX3JlY2V0YSIsImlkX3JlY2V0YV9tZWRpY2FtZW50byIsIm5vbWJyZV9tZWRpY2FtZW50byIsImNvZGlnb19tZWRpY2FtZW50byIsImRvc2lzIiwiZnJlY3VlbmNpYSIsImR1cmFjaW9uIiwiY2FudGlkYWQiLCJ1bmlkYWQiLCJ2aWFfYWRtaW5pc3RyYWNpb24iLCJpbnN0cnVjY2lvbmVzIiwiZXNfY29udHJvbGFkbyIsImRpc3BlbnNhZG8iLCJmZWNoYV9kaXNwZW5zYWNpb24iLCJlc3RhZGlzdGljYXMiLCJ0b3RhbF9tZWRpY2FtZW50b3MiLCJtZWRpY2FtZW50b3NfY29udHJvbGFkb3MiLCJtZWRpY2FtZW50b3NfZGlzcGVuc2Fkb3MiLCJjYWxjdWxhckVzdGFkaXN0aWNhcyIsInN0YXRzIiwidGFzYV9kaXNwZW5zYWNpb24iLCJ0b3RhbF9yZWNldGFzIiwiZGlzcGVuc2FkYXMiLCJwcm9tZWRpb19tZWRpY2FtZW50b3MiLCJlbWl0aWRhcyIsInZlbmNpZGFzIiwiYW51bGFkYXMiLCJyZWNldGFzX2Nyb25pY2FzIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJ2YWxvcl90b3RhbF9wcmVzY3JpdG8iLCJwcm9tZWRpb19tZWRpY2FtZW50b3NfcG9yX3JlY2V0YSIsInRpcG9zX3JlY2V0YSIsInNpbXBsZSIsInRpcG9fc2ltcGxlIiwicmV0ZW5pZGEiLCJ0aXBvX3JldGVuaWRhIiwiY29udHJvbGFkYSIsInRpcG9fY29udHJvbGFkYSIsIm1hZ2lzdHJhbCIsInRpcG9fbWFnaXN0cmFsIiwidmFsaWRhclBhY2llbnRlIiwiaWRQYWNpZW50ZSIsInJlZ2lzdHJhckF1ZGl0b3JpYSIsImlkUmVjZXRhIiwiYWNjaW9uIiwiZGV0YWxsZXMiLCJHRVQiLCJzZXNzaW9uVG9rZW4iLCJqc29uIiwic3VjY2VzcyIsInN0YXR1cyIsInNlc2lvbmVzIiwiaWRfdXN1YXJpbyIsInNlYXJjaFBhcmFtcyIsIm5leHRVcmwiLCJ0b0lTT1N0cmluZyIsImZpbHRyb3MiLCJmZWNoYV9pbmljaW8iLCJmZWNoYV9maW4iLCJkZXRhaWxzIiwicHJvY2VzcyIsIm1lc3NhZ2UiLCJQT1NUIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJib2R5IiwicGFjaWVudGVWYWxpZG8iLCJiZWdpblRyYW5zYWN0aW9uIiwibnVtZXJvUmVjZXRhIiwiaWRfY2VudHJvX3ByaW5jaXBhbCIsImNvZGlnb1ZlcmlmaWNhY2lvbiIsInJlc3VsdFJlY2V0YSIsImluc2VydElkIiwibWVkIiwiY29tbWl0IiwicmVjZXRhc0RlbERpYSIsInJlY2V0YU51ZXZhIiwiZmluZCIsInIiLCJyZWNldGEiLCJyb2xsYmFjayIsInJlbGVhc2UiLCJQVVQiLCJyZWNldGFBY3R1YWwiLCJ1cGRhdGVzIiwiQXJyYXkiLCJpc0FycmF5IiwicmVjZXRhc0FjdHVhbGl6YWRhcyIsInJlY2V0YUFjdHVhbGl6YWRhIiwiREVMRVRFIiwibW90aXZvIiwiTnVtYmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/medico/recetas/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// 📦 Archivo: src/lib/db.ts\n// 🧠 Descripción: Configuración central de conexión a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// 🔗 Conexión al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// 🧩 Función genérica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"❌ Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// 👤 Obtener usuario por email o username (para login o validaciones)\n// ✅ Versión que PRIORIZA el rol MÉDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) médico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) técnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// 🔒 Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// 📊 Ejemplo de utilidad: obtener estadísticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// 🔌 NUEVO: obtener una conexión dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexión\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// 🔁 NUEVO (opcional): helper para ejecutar en transacción\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// 🔁 Exportar conexión global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fmedico%2Frecetas%2Froute&page=%2Fapi%2Fmedico%2Frecetas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmedico%2Frecetas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();