/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/telemedicina/estadisticas/route";
exports.ids = ["app/api/telemedicina/estadisticas/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&page=%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Festadisticas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&page=%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Festadisticas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_telemedicina_estadisticas_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/telemedicina/estadisticas/route.ts */ \"(rsc)/./src/app/api/telemedicina/estadisticas/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/telemedicina/estadisticas/route\",\n        pathname: \"/api/telemedicina/estadisticas\",\n        filename: \"route\",\n        bundlePath: \"app/api/telemedicina/estadisticas/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\telemedicina\\\\estadisticas\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_telemedicina_estadisticas_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/telemedicina/estadisticas/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0ZWxlbWVkaWNpbmElMkZlc3RhZGlzdGljYXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRlbGVtZWRpY2luYSUyRmVzdGFkaXN0aWNhcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRlbGVtZWRpY2luYSUyRmVzdGFkaXN0aWNhcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDK0M7QUFDNUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz9mNzA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx0ZWxlbWVkaWNpbmFcXFxcZXN0YWRpc3RpY2FzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90ZWxlbWVkaWNpbmEvZXN0YWRpc3RpY2FzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdGVsZW1lZGljaW5hL2VzdGFkaXN0aWNhc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdGVsZW1lZGljaW5hL2VzdGFkaXN0aWNhcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx0ZWxlbWVkaWNpbmFcXFxcZXN0YWRpc3RpY2FzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3RlbGVtZWRpY2luYS9lc3RhZGlzdGljYXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&page=%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Festadisticas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/telemedicina/estadisticas/route.ts":
/*!********************************************************!*\
  !*** ./src/app/api/telemedicina/estadisticas/route.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\nconst SESSION_COOKIE_CANDIDATES = [\n    \"session\",\n    \"session_token\",\n    \"medisalud_session\",\n    \"auth_session\",\n    \"next-auth.session-token\",\n    \"__Secure-next-auth.session-token\"\n];\n// mismo helper que usas en /sesiones\nfunction getSessionToken(request) {\n    const cookieHeader = request.headers.get(\"cookie\") || \"\";\n    if (cookieHeader) {\n        const cookies = cookieHeader.split(\";\").map((c)=>c.trim()).filter(Boolean).reduce((acc, c)=>{\n            const [k, ...rest] = c.split(\"=\");\n            acc[k] = rest.join(\"=\");\n            return acc;\n        }, {});\n        for (const name of SESSION_COOKIE_CANDIDATES){\n            if (cookies[name]) {\n                return decodeURIComponent(cookies[name]);\n            }\n        }\n    }\n    const authLower = request.headers.get(\"authorization\");\n    const authUpper = request.headers.get(\"Authorization\");\n    const auth = authLower || authUpper;\n    if (auth && auth.startsWith(\"Bearer \")) {\n        return auth.slice(7);\n    }\n    return null;\n}\nasync function obtenerMedicoAutenticado(idUsuario) {\n    const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n    SELECT \r\n      m.id_medico,\r\n      m.id_usuario,\r\n      m.id_centro_principal\r\n    FROM medicos m\r\n    WHERE m.id_usuario = ? AND m.estado = 'activo'\r\n    LIMIT 1\r\n    `, [\n        idUsuario\n    ]);\n    return rows.length ? rows[0] : null;\n}\nasync function GET(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        console.log(\"\\uD83E\\uDDE9 GET /telemedicina/estadisticas token:\", sessionToken);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        // validar sesi√≥n\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (!sesiones.length) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        // opcional: marcar actividad\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE sesiones_usuarios SET ultima_actividad = NOW() WHERE token = ?`, [\n            sessionToken\n        ]);\n        // === per√≠odo igual que en el frontend ===\n        const searchParams = request.nextUrl.searchParams;\n        const periodo = searchParams.get(\"periodo\") || \"hoy\";\n        // ESTE es el \"hoy\" que usa tu app (igual que en /sesiones)\n        const hoyApp = new Date().toISOString().split(\"T\")[0];\n        let fechaInicio;\n        const fechaFin = hoyApp;\n        switch(periodo){\n            case \"semana\":\n                fechaInicio = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n                break;\n            case \"mes\":\n                fechaInicio = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0];\n                break;\n            default:\n                // hoy\n                fechaInicio = fechaFin;\n                break;\n        }\n        // ===== 1) estad√≠sticas del rango =====\n        const [rowsEstadisticas] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT \r\n        COUNT(*) AS total_sesiones_rango,\r\n        SUM(CASE WHEN estado = 'finalizada' THEN 1 ELSE 0 END) AS sesiones_completadas,\r\n        SUM(CASE WHEN estado IN ('programada','en_espera') THEN 1 ELSE 0 END) AS sesiones_pendientes,\r\n        SUM(CASE WHEN estado = 'cancelada' THEN 1 ELSE 0 END) AS sesiones_canceladas,\r\n        AVG(\r\n          CASE \r\n            WHEN duracion_segundos IS NOT NULL THEN duracion_segundos / 60\r\n            ELSE NULL\r\n          END\r\n        ) AS tiempo_promedio_sesion,\r\n        AVG(\r\n          CASE \r\n            WHEN evaluacion_medico IS NOT NULL THEN evaluacion_medico\r\n            ELSE NULL\r\n          END\r\n        ) AS calificacion_promedio,\r\n        COUNT(DISTINCT id_paciente) AS pacientes_atendidos_mes,\r\n        SUM(\r\n          CASE \r\n            WHEN estado = 'finalizada' THEN 25000\r\n            ELSE 0\r\n          END\r\n        ) AS ingresos_mes,\r\n        SUM(\r\n          CASE \r\n            WHEN estado IN ('finalizada','en_curso') THEN 1\r\n            ELSE 0\r\n          END\r\n        ) AS sesiones_asistidas,\r\n        SUM(\r\n          CASE \r\n            WHEN estado IN ('cancelada','no_asistio','problema_tecnico') THEN 1\r\n            ELSE 0\r\n          END\r\n        ) AS sesiones_no_asistidas,\r\n        AVG(\r\n          CASE \r\n            WHEN fecha_hora_inicio_real IS NOT NULL \r\n            THEN TIMESTAMPDIFF(MINUTE, fecha_hora_inicio_programada, fecha_hora_inicio_real)\r\n            ELSE NULL\r\n          END\r\n        ) AS tiempo_espera_promedio\r\n      FROM telemedicina_sesiones\r\n      WHERE id_medico = ?\r\n        AND DATE(fecha_hora_inicio_programada) BETWEEN ? AND ?\r\n      `, [\n            medico.id_medico,\n            fechaInicio,\n            fechaFin\n        ]);\n        const statsRango = rowsEstadisticas[0] || {};\n        // ===== 2) total de HOY usando el mismo \"hoyApp\" =====\n        const [rowsHoy] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT COUNT(*) AS total_hoy\r\n      FROM telemedicina_sesiones\r\n      WHERE id_medico = ?\r\n        AND DATE(fecha_hora_inicio_programada) = ?\r\n      `, [\n            medico.id_medico,\n            hoyApp\n        ]);\n        const totalHoy = Number(rowsHoy[0]?.total_hoy ?? 0);\n        // tasa asistencia real\n        const sesionesAsistidas = Number(statsRango.sesiones_asistidas ?? 0);\n        const sesionesNoAsistidas = Number(statsRango.sesiones_no_asistidas ?? 0);\n        const totalParaAsistencia = sesionesAsistidas + sesionesNoAsistidas;\n        const tasaAsistencia = totalParaAsistencia > 0 ? sesionesAsistidas / totalParaAsistencia * 100 : 0;\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            estadisticas: {\n                // <-- esto alimenta la card que te sale en 0\n                total_sesiones_hoy: totalHoy,\n                sesiones_completadas: Number(statsRango.sesiones_completadas ?? 0),\n                sesiones_pendientes: Number(statsRango.sesiones_pendientes ?? 0),\n                sesiones_canceladas: Number(statsRango.sesiones_canceladas ?? 0),\n                tiempo_promedio_sesion: Number((statsRango.tiempo_promedio_sesion ?? 0).toFixed(2)),\n                calificacion_promedio: Number((statsRango.calificacion_promedio ?? 0).toFixed(1)),\n                pacientes_atendidos_mes: Number(statsRango.pacientes_atendidos_mes ?? 0),\n                ingresos_mes: Number(statsRango.ingresos_mes ?? 0),\n                tasa_asistencia: Number(tasaAsistencia.toFixed(0)),\n                tiempo_espera_promedio: Number((statsRango.tiempo_espera_promedio ?? 0).toFixed(2))\n            },\n            periodo: {\n                tipo: periodo,\n                fecha_inicio: fechaInicio,\n                fecha_fin: fechaFin\n            },\n            timestamp: new Date().toISOString()\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"‚ùå Error en GET /api/telemedicina/estadisticas:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90ZWxlbWVkaWNpbmEvZXN0YWRpc3RpY2FzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RDtBQUM1QjtBQUc1QixNQUFNRSw0QkFBNEI7SUFDaEM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFRCxxQ0FBcUM7QUFDckMsU0FBU0MsZ0JBQWdCQyxPQUFvQjtJQUMzQyxNQUFNQyxlQUFlRCxRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxhQUFhO0lBRXRELElBQUlGLGNBQWM7UUFDaEIsTUFBTUcsVUFBVUgsYUFDYkksS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ2pCQyxNQUFNLENBQUNDLFNBQ1BDLE1BQU0sQ0FBQyxDQUFDQyxLQUFLTDtZQUNaLE1BQU0sQ0FBQ00sR0FBRyxHQUFHQyxLQUFLLEdBQUdQLEVBQUVGLEtBQUssQ0FBQztZQUM3Qk8sR0FBRyxDQUFDQyxFQUFFLEdBQUdDLEtBQUtDLElBQUksQ0FBQztZQUNuQixPQUFPSDtRQUNULEdBQUcsQ0FBQztRQUVOLEtBQUssTUFBTUksUUFBUWxCLDBCQUEyQjtZQUM1QyxJQUFJTSxPQUFPLENBQUNZLEtBQUssRUFBRTtnQkFDakIsT0FBT0MsbUJBQW1CYixPQUFPLENBQUNZLEtBQUs7WUFDekM7UUFDRjtJQUNGO0lBRUEsTUFBTUUsWUFBWWxCLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3RDLE1BQU1nQixZQUFZbkIsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFDdEMsTUFBTWlCLE9BQU9GLGFBQWFDO0lBRTFCLElBQUlDLFFBQVFBLEtBQUtDLFVBQVUsQ0FBQyxZQUFZO1FBQ3RDLE9BQU9ELEtBQUtFLEtBQUssQ0FBQztJQUNwQjtJQUVBLE9BQU87QUFDVDtBQUVBLGVBQWVDLHlCQUF5QkMsU0FBaUI7SUFDdkQsTUFBTSxDQUFDQyxLQUFLLEdBQUcsTUFBTTVCLHFEQUFVLENB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c291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVkaXN1aXRlLXByby8uL3NyYy9hcHAvYXBpL3RlbGVtZWRpY2luYS9lc3RhZGlzdGljYXMvcm91dGUudHM/OTcwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCBwb29sIGZyb20gXCJAL2xpYi9kYlwiO1xyXG5pbXBvcnQgeyBSb3dEYXRhUGFja2V0IH0gZnJvbSBcIm15c3FsMlwiO1xyXG5cclxuY29uc3QgU0VTU0lPTl9DT09LSUVfQ0FORElEQVRFUyA9IFtcclxuICBcInNlc3Npb25cIixcclxuICBcInNlc3Npb25fdG9rZW5cIixcclxuICBcIm1lZGlzYWx1ZF9zZXNzaW9uXCIsXHJcbiAgXCJhdXRoX3Nlc3Npb25cIixcclxuICBcIm5leHQtYXV0aC5zZXNzaW9uLXRva2VuXCIsXHJcbiAgXCJfX1NlY3VyZS1uZXh0LWF1dGguc2Vzc2lvbi10b2tlblwiLFxyXG5dO1xyXG5cclxuLy8gbWlzbW8gaGVscGVyIHF1ZSB1c2FzIGVuIC9zZXNpb25lc1xyXG5mdW5jdGlvbiBnZXRTZXNzaW9uVG9rZW4ocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcclxuICBjb25zdCBjb29raWVIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiY29va2llXCIpIHx8IFwiXCI7XHJcblxyXG4gIGlmIChjb29raWVIZWFkZXIpIHtcclxuICAgIGNvbnN0IGNvb2tpZXMgPSBjb29raWVIZWFkZXJcclxuICAgICAgLnNwbGl0KFwiO1wiKVxyXG4gICAgICAubWFwKChjKSA9PiBjLnRyaW0oKSlcclxuICAgICAgLmZpbHRlcihCb29sZWFuKVxyXG4gICAgICAucmVkdWNlKChhY2MsIGMpID0+IHtcclxuICAgICAgICBjb25zdCBbaywgLi4ucmVzdF0gPSBjLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBhY2Nba10gPSByZXN0LmpvaW4oXCI9XCIpO1xyXG4gICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pO1xyXG5cclxuICAgIGZvciAoY29uc3QgbmFtZSBvZiBTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTKSB7XHJcbiAgICAgIGlmIChjb29raWVzW25hbWVdKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjb29raWVzW25hbWVdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgYXV0aExvd2VyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIik7XHJcbiAgY29uc3QgYXV0aFVwcGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIkF1dGhvcml6YXRpb25cIik7XHJcbiAgY29uc3QgYXV0aCA9IGF1dGhMb3dlciB8fCBhdXRoVXBwZXI7XHJcblxyXG4gIGlmIChhdXRoICYmIGF1dGguc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcclxuICAgIHJldHVybiBhdXRoLnNsaWNlKDcpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyhpZFVzdWFyaW86IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICBtLmlkX21lZGljbyxcclxuICAgICAgbS5pZF91c3VhcmlvLFxyXG4gICAgICBtLmlkX2NlbnRyb19wcmluY2lwYWxcclxuICAgIEZST00gbWVkaWNvcyBtXHJcbiAgICBXSEVSRSBtLmlkX3VzdWFyaW8gPSA/IEFORCBtLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBMSU1JVCAxXHJcbiAgICBgLFxyXG4gICAgW2lkVXN1YXJpb11cclxuICApO1xyXG5cclxuICByZXR1cm4gcm93cy5sZW5ndGggPyByb3dzWzBdIDogbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBnZXRTZXNzaW9uVG9rZW4ocmVxdWVzdCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCfp6kgR0VUIC90ZWxlbWVkaWNpbmEvZXN0YWRpc3RpY2FzIHRva2VuOlwiLCBzZXNzaW9uVG9rZW4pO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgc2VzacOzbiBhY3RpdmFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHZhbGlkYXIgc2VzacOzblxyXG4gICAgY29uc3QgW3Nlc2lvbmVzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1Qgc3UuaWRfdXN1YXJpb1xyXG4gICAgICBGUk9NIHNlc2lvbmVzX3VzdWFyaW9zIHN1XHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdSBPTiBzdS5pZF91c3VhcmlvID0gdS5pZF91c3VhcmlvXHJcbiAgICAgIFdIRVJFIHN1LnRva2VuID0gP1xyXG4gICAgICAgIEFORCBzdS5hY3RpdmEgPSAxXHJcbiAgICAgICAgQU5EIHN1LmZlY2hhX2V4cGlyYWNpb24gPiBOT1coKVxyXG4gICAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgIExJTUlUIDFcclxuICAgICAgYCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgaWYgKCFzZXNpb25lcy5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlNlc2nDs24gaW52w6FsaWRhIG8gZXhwaXJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlkVXN1YXJpbyA9IHNlc2lvbmVzWzBdLmlkX3VzdWFyaW8gYXMgbnVtYmVyO1xyXG4gICAgY29uc3QgbWVkaWNvID0gYXdhaXQgb2J0ZW5lck1lZGljb0F1dGVudGljYWRvKGlkVXN1YXJpbyk7XHJcblxyXG4gICAgaWYgKCFtZWRpY28pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIHRpZW5lcyB1biByZWdpc3RybyBkZSBtw6lkaWNvIGFjdGl2b1wiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gb3BjaW9uYWw6IG1hcmNhciBhY3RpdmlkYWRcclxuICAgIGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgIGBVUERBVEUgc2VzaW9uZXNfdXN1YXJpb3MgU0VUIHVsdGltYV9hY3RpdmlkYWQgPSBOT1coKSBXSEVSRSB0b2tlbiA9ID9gLFxyXG4gICAgICBbc2Vzc2lvblRva2VuXVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyA9PT0gcGVyw61vZG8gaWd1YWwgcXVlIGVuIGVsIGZyb250ZW5kID09PVxyXG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcztcclxuICAgIGNvbnN0IHBlcmlvZG8gPSBzZWFyY2hQYXJhbXMuZ2V0KFwicGVyaW9kb1wiKSB8fCBcImhveVwiO1xyXG5cclxuICAgIC8vIEVTVEUgZXMgZWwgXCJob3lcIiBxdWUgdXNhIHR1IGFwcCAoaWd1YWwgcXVlIGVuIC9zZXNpb25lcylcclxuICAgIGNvbnN0IGhveUFwcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF07XHJcblxyXG4gICAgbGV0IGZlY2hhSW5pY2lvOiBzdHJpbmc7XHJcbiAgICBjb25zdCBmZWNoYUZpbiA9IGhveUFwcDtcclxuXHJcbiAgICBzd2l0Y2ggKHBlcmlvZG8pIHtcclxuICAgICAgY2FzZSBcInNlbWFuYVwiOlxyXG4gICAgICAgIGZlY2hhSW5pY2lvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxyXG4gICAgICAgICAgLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIC5zcGxpdChcIlRcIilbMF07XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgXCJtZXNcIjpcclxuICAgICAgICBmZWNoYUluaWNpbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApXHJcbiAgICAgICAgICAudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgLnNwbGl0KFwiVFwiKVswXTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICAvLyBob3lcclxuICAgICAgICBmZWNoYUluaWNpbyA9IGZlY2hhRmluO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIC8vID09PT09IDEpIGVzdGFkw61zdGljYXMgZGVsIHJhbmdvID09PT09XHJcbiAgICBjb25zdCBbcm93c0VzdGFkaXN0aWNhc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIENPVU5UKCopIEFTIHRvdGFsX3Nlc2lvbmVzX3JhbmdvLFxyXG4gICAgICAgIFNVTShDQVNFIFdIRU4gZXN0YWRvID0gJ2ZpbmFsaXphZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyBzZXNpb25lc19jb21wbGV0YWRhcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIGVzdGFkbyBJTiAoJ3Byb2dyYW1hZGEnLCdlbl9lc3BlcmEnKSBUSEVOIDEgRUxTRSAwIEVORCkgQVMgc2VzaW9uZXNfcGVuZGllbnRlcyxcclxuICAgICAgICBTVU0oQ0FTRSBXSEVOIGVzdGFkbyA9ICdjYW5jZWxhZGEnIFRIRU4gMSBFTFNFIDAgRU5EKSBBUyBzZXNpb25lc19jYW5jZWxhZGFzLFxyXG4gICAgICAgIEFWRyhcclxuICAgICAgICAgIENBU0UgXHJcbiAgICAgICAgICAgIFdIRU4gZHVyYWNpb25fc2VndW5kb3MgSVMgTk9UIE5VTEwgVEhFTiBkdXJhY2lvbl9zZWd1bmRvcyAvIDYwXHJcbiAgICAgICAgICAgIEVMU0UgTlVMTFxyXG4gICAgICAgICAgRU5EXHJcbiAgICAgICAgKSBBUyB0aWVtcG9fcHJvbWVkaW9fc2VzaW9uLFxyXG4gICAgICAgIEFWRyhcclxuICAgICAgICAgIENBU0UgXHJcbiAgICAgICAgICAgIFdIRU4gZXZhbHVhY2lvbl9tZWRpY28gSVMgTk9UIE5VTEwgVEhFTiBldmFsdWFjaW9uX21lZGljb1xyXG4gICAgICAgICAgICBFTFNFIE5VTExcclxuICAgICAgICAgIEVORFxyXG4gICAgICAgICkgQVMgY2FsaWZpY2FjaW9uX3Byb21lZGlvLFxyXG4gICAgICAgIENPVU5UKERJU1RJTkNUIGlkX3BhY2llbnRlKSBBUyBwYWNpZW50ZXNfYXRlbmRpZG9zX21lcyxcclxuICAgICAgICBTVU0oXHJcbiAgICAgICAgICBDQVNFIFxyXG4gICAgICAgICAgICBXSEVOIGVzdGFkbyA9ICdmaW5hbGl6YWRhJyBUSEVOIDI1MDAwXHJcbiAgICAgICAgICAgIEVMU0UgMFxyXG4gICAgICAgICAgRU5EXHJcbiAgICAgICAgKSBBUyBpbmdyZXNvc19tZXMsXHJcbiAgICAgICAgU1VNKFxyXG4gICAgICAgICAgQ0FTRSBcclxuICAgICAgICAgICAgV0hFTiBlc3RhZG8gSU4gKCdmaW5hbGl6YWRhJywnZW5fY3Vyc28nKSBUSEVOIDFcclxuICAgICAgICAgICAgRUxTRSAwXHJcbiAgICAgICAgICBFTkRcclxuICAgICAgICApIEFTIHNlc2lvbmVzX2FzaXN0aWRhcyxcclxuICAgICAgICBTVU0oXHJcbiAgICAgICAgICBDQVNFIFxyXG4gICAgICAgICAgICBXSEVOIGVzdGFkbyBJTiAoJ2NhbmNlbGFkYScsJ25vX2FzaXN0aW8nLCdwcm9ibGVtYV90ZWNuaWNvJykgVEhFTiAxXHJcbiAgICAgICAgICAgIEVMU0UgMFxyXG4gICAgICAgICAgRU5EXHJcbiAgICAgICAgKSBBUyBzZXNpb25lc19ub19hc2lzdGlkYXMsXHJcbiAgICAgICAgQVZHKFxyXG4gICAgICAgICAgQ0FTRSBcclxuICAgICAgICAgICAgV0hFTiBmZWNoYV9ob3JhX2luaWNpb19yZWFsIElTIE5PVCBOVUxMIFxyXG4gICAgICAgICAgICBUSEVOIFRJTUVTVEFNUERJRkYoTUlOVVRFLCBmZWNoYV9ob3JhX2luaWNpb19wcm9ncmFtYWRhLCBmZWNoYV9ob3JhX2luaWNpb19yZWFsKVxyXG4gICAgICAgICAgICBFTFNFIE5VTExcclxuICAgICAgICAgIEVORFxyXG4gICAgICAgICkgQVMgdGllbXBvX2VzcGVyYV9wcm9tZWRpb1xyXG4gICAgICBGUk9NIHRlbGVtZWRpY2luYV9zZXNpb25lc1xyXG4gICAgICBXSEVSRSBpZF9tZWRpY28gPSA/XHJcbiAgICAgICAgQU5EIERBVEUoZmVjaGFfaG9yYV9pbmljaW9fcHJvZ3JhbWFkYSkgQkVUV0VFTiA/IEFORCA/XHJcbiAgICAgIGAsXHJcbiAgICAgIFttZWRpY28uaWRfbWVkaWNvLCBmZWNoYUluaWNpbywgZmVjaGFGaW5dXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHN0YXRzUmFuZ28gPSByb3dzRXN0YWRpc3RpY2FzWzBdIHx8ICh7fSBhcyBSb3dEYXRhUGFja2V0KTtcclxuXHJcbiAgICAvLyA9PT09PSAyKSB0b3RhbCBkZSBIT1kgdXNhbmRvIGVsIG1pc21vIFwiaG95QXBwXCIgPT09PT1cclxuICAgIGNvbnN0IFtyb3dzSG95XSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1QgQ09VTlQoKikgQVMgdG90YWxfaG95XHJcbiAgICAgIEZST00gdGVsZW1lZGljaW5hX3Nlc2lvbmVzXHJcbiAgICAgIFdIRVJFIGlkX21lZGljbyA9ID9cclxuICAgICAgICBBTkQgREFURShmZWNoYV9ob3JhX2luaWNpb19wcm9ncmFtYWRhKSA9ID9cclxuICAgICAgYCxcclxuICAgICAgW21lZGljby5pZF9tZWRpY28sIGhveUFwcF1cclxuICAgICk7XHJcbiAgICBjb25zdCB0b3RhbEhveSA9IE51bWJlcihyb3dzSG95WzBdPy50b3RhbF9ob3kgPz8gMCk7XHJcblxyXG4gICAgLy8gdGFzYSBhc2lzdGVuY2lhIHJlYWxcclxuICAgIGNvbnN0IHNlc2lvbmVzQXNpc3RpZGFzID0gTnVtYmVyKHN0YXRzUmFuZ28uc2VzaW9uZXNfYXNpc3RpZGFzID8/IDApO1xyXG4gICAgY29uc3Qgc2VzaW9uZXNOb0FzaXN0aWRhcyA9IE51bWJlcihzdGF0c1JhbmdvLnNlc2lvbmVzX25vX2FzaXN0aWRhcyA/PyAwKTtcclxuICAgIGNvbnN0IHRvdGFsUGFyYUFzaXN0ZW5jaWEgPSBzZXNpb25lc0FzaXN0aWRhcyArIHNlc2lvbmVzTm9Bc2lzdGlkYXM7XHJcbiAgICBjb25zdCB0YXNhQXNpc3RlbmNpYSA9XHJcbiAgICAgIHRvdGFsUGFyYUFzaXN0ZW5jaWEgPiAwXHJcbiAgICAgICAgPyAoc2VzaW9uZXNBc2lzdGlkYXMgLyB0b3RhbFBhcmFBc2lzdGVuY2lhKSAqIDEwMFxyXG4gICAgICAgIDogMDtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGVzdGFkaXN0aWNhczoge1xyXG4gICAgICAgICAgLy8gPC0tIGVzdG8gYWxpbWVudGEgbGEgY2FyZCBxdWUgdGUgc2FsZSBlbiAwXHJcbiAgICAgICAgICB0b3RhbF9zZXNpb25lc19ob3k6IHRvdGFsSG95LFxyXG5cclxuICAgICAgICAgIHNlc2lvbmVzX2NvbXBsZXRhZGFzOiBOdW1iZXIoc3RhdHNSYW5nby5zZXNpb25lc19jb21wbGV0YWRhcyA/PyAwKSxcclxuICAgICAgICAgIHNlc2lvbmVzX3BlbmRpZW50ZXM6IE51bWJlcihzdGF0c1JhbmdvLnNlc2lvbmVzX3BlbmRpZW50ZXMgPz8gMCksXHJcbiAgICAgICAgICBzZXNpb25lc19jYW5jZWxhZGFzOiBOdW1iZXIoc3RhdHNSYW5nby5zZXNpb25lc19jYW5jZWxhZGFzID8/IDApLFxyXG4gICAgICAgICAgdGllbXBvX3Byb21lZGlvX3Nlc2lvbjogTnVtYmVyKFxyXG4gICAgICAgICAgICAoc3RhdHNSYW5nby50aWVtcG9fcHJvbWVkaW9fc2VzaW9uID8/IDApLnRvRml4ZWQoMilcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBjYWxpZmljYWNpb25fcHJvbWVkaW86IE51bWJlcihcclxuICAgICAgICAgICAgKHN0YXRzUmFuZ28uY2FsaWZpY2FjaW9uX3Byb21lZGlvID8/IDApLnRvRml4ZWQoMSlcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBwYWNpZW50ZXNfYXRlbmRpZG9zX21lczogTnVtYmVyKFxyXG4gICAgICAgICAgICBzdGF0c1JhbmdvLnBhY2llbnRlc19hdGVuZGlkb3NfbWVzID8/IDBcclxuICAgICAgICAgICksXHJcbiAgICAgICAgICBpbmdyZXNvc19tZXM6IE51bWJlcihzdGF0c1JhbmdvLmluZ3Jlc29zX21lcyA/PyAwKSxcclxuICAgICAgICAgIHRhc2FfYXNpc3RlbmNpYTogTnVtYmVyKHRhc2FBc2lzdGVuY2lhLnRvRml4ZWQoMCkpLFxyXG4gICAgICAgICAgdGllbXBvX2VzcGVyYV9wcm9tZWRpbzogTnVtYmVyKFxyXG4gICAgICAgICAgICAoKHN0YXRzUmFuZ28udGllbXBvX2VzcGVyYV9wcm9tZWRpbyBhcyBudW1iZXIpID8/IDApLnRvRml4ZWQoMilcclxuICAgICAgICAgICksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwZXJpb2RvOiB7XHJcbiAgICAgICAgICB0aXBvOiBwZXJpb2RvLFxyXG4gICAgICAgICAgZmVjaGFfaW5pY2lvOiBmZWNoYUluaWNpbyxcclxuICAgICAgICAgIGZlY2hhX2ZpbjogZmVjaGFGaW4sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gR0VUIC9hcGkvdGVsZW1lZGljaW5hL2VzdGFkaXN0aWNhczpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3JcIixcclxuICAgICAgICBkZXRhaWxzOlxyXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInBvb2wiLCJTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTIiwiZ2V0U2Vzc2lvblRva2VuIiwicmVxdWVzdCIsImNvb2tpZUhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJjb29raWVzIiwic3BsaXQiLCJtYXAiLCJjIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJyZWR1Y2UiLCJhY2MiLCJrIiwicmVzdCIsImpvaW4iLCJuYW1lIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXV0aExvd2VyIiwiYXV0aFVwcGVyIiwiYXV0aCIsInN0YXJ0c1dpdGgiLCJzbGljZSIsIm9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyIsImlkVXN1YXJpbyIsInJvd3MiLCJxdWVyeSIsImxlbmd0aCIsIkdFVCIsInNlc3Npb25Ub2tlbiIsImNvbnNvbGUiLCJsb2ciLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwic2VzaW9uZXMiLCJpZF91c3VhcmlvIiwibWVkaWNvIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInBlcmlvZG8iLCJob3lBcHAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJmZWNoYUluaWNpbyIsImZlY2hhRmluIiwibm93Iiwicm93c0VzdGFkaXN0aWNhcyIsImlkX21lZGljbyIsInN0YXRzUmFuZ28iLCJyb3dzSG95IiwidG90YWxIb3kiLCJOdW1iZXIiLCJ0b3RhbF9ob3kiLCJzZXNpb25lc0FzaXN0aWRhcyIsInNlc2lvbmVzX2FzaXN0aWRhcyIsInNlc2lvbmVzTm9Bc2lzdGlkYXMiLCJzZXNpb25lc19ub19hc2lzdGlkYXMiLCJ0b3RhbFBhcmFBc2lzdGVuY2lhIiwidGFzYUFzaXN0ZW5jaWEiLCJlc3RhZGlzdGljYXMiLCJ0b3RhbF9zZXNpb25lc19ob3kiLCJzZXNpb25lc19jb21wbGV0YWRhcyIsInNlc2lvbmVzX3BlbmRpZW50ZXMiLCJzZXNpb25lc19jYW5jZWxhZGFzIiwidGllbXBvX3Byb21lZGlvX3Nlc2lvbiIsInRvRml4ZWQiLCJjYWxpZmljYWNpb25fcHJvbWVkaW8iLCJwYWNpZW50ZXNfYXRlbmRpZG9zX21lcyIsImluZ3Jlc29zX21lcyIsInRhc2FfYXNpc3RlbmNpYSIsInRpZW1wb19lc3BlcmFfcHJvbWVkaW8iLCJ0aXBvIiwiZmVjaGFfaW5pY2lvIiwiZmVjaGFfZmluIiwidGltZXN0YW1wIiwiZGV0YWlscyIsInByb2Nlc3MiLCJtZXNzYWdlIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/telemedicina/estadisticas/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// üì¶ Archivo: src/lib/db.ts\n// üß† Descripci√≥n: Configuraci√≥n central de conexi√≥n a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// üîó Conexi√≥n al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// üß© Funci√≥n gen√©rica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"‚ùå Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// üë§ Obtener usuario por email o username (para login o validaciones)\n// ‚úÖ Versi√≥n que PRIORIZA el rol M√âDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) m√©dico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) t√©cnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// üîí Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// üìä Ejemplo de utilidad: obtener estad√≠sticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// üîå NUEVO: obtener una conexi√≥n dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexi√≥n\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// üîÅ NUEVO (opcional): helper para ejecutar en transacci√≥n\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// üîÅ Exportar conexi√≥n global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&page=%2Fapi%2Ftelemedicina%2Festadisticas%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Festadisticas%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();