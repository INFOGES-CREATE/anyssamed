/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/telemedicina/sesiones/route";
exports.ids = ["app/api/telemedicina/sesiones/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&page=%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Fsesiones%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&page=%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Fsesiones%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_ReactProjects_medisuite_pro_frontend_src_app_api_telemedicina_sesiones_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/telemedicina/sesiones/route.ts */ \"(rsc)/./src/app/api/telemedicina/sesiones/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/telemedicina/sesiones/route\",\n        pathname: \"/api/telemedicina/sesiones\",\n        filename: \"route\",\n        bundlePath: \"app/api/telemedicina/sesiones/route\"\n    },\n    resolvedPagePath: \"C:\\\\ReactProjects\\\\medisuite-pro\\\\frontend\\\\src\\\\app\\\\api\\\\telemedicina\\\\sesiones\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_ReactProjects_medisuite_pro_frontend_src_app_api_telemedicina_sesiones_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/telemedicina/sesiones/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0ZWxlbWVkaWNpbmElMkZzZXNpb25lcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGVsZW1lZGljaW5hJTJGc2VzaW9uZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0ZWxlbWVkaWNpbmElMkZzZXNpb25lcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDUmVhY3RQcm9qZWN0cyU1Q21lZGlzdWl0ZS1wcm8lNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1JlYWN0UHJvamVjdHMlNUNtZWRpc3VpdGUtcHJvJTVDZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMkM7QUFDeEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWRpc3VpdGUtcHJvLz82YjQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFJlYWN0UHJvamVjdHNcXFxcbWVkaXN1aXRlLXByb1xcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx0ZWxlbWVkaWNpbmFcXFxcc2VzaW9uZXNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RlbGVtZWRpY2luYS9zZXNpb25lcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RlbGVtZWRpY2luYS9zZXNpb25lc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdGVsZW1lZGljaW5hL3Nlc2lvbmVzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcUmVhY3RQcm9qZWN0c1xcXFxtZWRpc3VpdGUtcHJvXFxcXGZyb250ZW5kXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHRlbGVtZWRpY2luYVxcXFxzZXNpb25lc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90ZWxlbWVkaWNpbmEvc2VzaW9uZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&page=%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Fsesiones%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/telemedicina/sesiones/route.ts":
/*!****************************************************!*\
  !*** ./src/app/api/telemedicina/sesiones/route.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n// frontend/src/app/api/telemedicina/sesiones/route.ts\n\n\n// ========================================\n// HELPER PARA OBTENER TOKEN\n// ========================================\nconst SESSION_COOKIE_CANDIDATES = [\n    \"session\",\n    \"session_token\",\n    \"medisalud_session\",\n    \"auth_session\",\n    \"next-auth.session-token\",\n    \"__Secure-next-auth.session-token\"\n];\n// üëâ versi√≥n m√°s tolerante: cookies + Authorization + Authorization (may√∫scula)\nfunction getSessionToken(request) {\n    // 1) revisar cookies\n    const cookieHeader = request.headers.get(\"cookie\") || \"\";\n    if (cookieHeader) {\n        const cookies = cookieHeader.split(\";\").map((c)=>c.trim()).filter(Boolean).reduce((acc, c)=>{\n            const [k, ...rest] = c.split(\"=\");\n            acc[k] = rest.join(\"=\");\n            return acc;\n        }, {});\n        for (const name of SESSION_COOKIE_CANDIDATES){\n            if (cookies[name]) {\n                return decodeURIComponent(cookies[name]);\n            }\n        }\n    }\n    // 2) revisar headers de autorizaci√≥n (min√∫scula o may√∫scula)\n    const authLower = request.headers.get(\"authorization\");\n    const authUpper = request.headers.get(\"Authorization\");\n    const auth = authLower || authUpper;\n    if (auth && auth.startsWith(\"Bearer \")) {\n        return auth.slice(7);\n    }\n    return null;\n}\n// ========================================\n// FUNCIONES AUXILIARES\n// ========================================\nasync function obtenerMedicoAutenticado(idUsuario) {\n    const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n    SELECT \r\n      m.id_medico,\r\n      m.id_usuario,\r\n      m.id_centro_principal\r\n    FROM medicos m\r\n    WHERE m.id_usuario = ? AND m.estado = 'activo'\r\n    LIMIT 1\r\n    `, [\n        idUsuario\n    ]);\n    if (rows.length === 0) {\n        return null;\n    }\n    return rows[0];\n}\nasync function obtenerSesionesTelemedicina(idMedico, fechaInicio, fechaFin, estados) {\n    let query = `\r\n    SELECT \r\n      ts.id_sesion,\r\n      ts.id_cita,\r\n      ts.id_paciente,\r\n      ts.id_medico,\r\n      ts.token_acceso,\r\n      ts.url_sesion,\r\n      ts.estado,\r\n      ts.fecha_hora_inicio_programada,\r\n      ts.fecha_hora_fin_programada,\r\n      ts.fecha_hora_inicio_real,\r\n      ts.fecha_hora_fin_real,\r\n      ts.duracion_segundos,\r\n      ts.proveedor_servicio,\r\n      ts.calidad_conexion,\r\n      ts.grabacion_autorizada,\r\n      ts.url_grabacion,\r\n      ts.evaluacion_paciente,\r\n      ts.evaluacion_medico,\r\n\r\n      -- Paciente\r\n      p.id_paciente,\r\n      p.nombre AS paciente_nombre,\r\n      p.apellido_paterno AS paciente_apellido_paterno,\r\n      p.apellido_materno AS paciente_apellido_materno,\r\n      TIMESTAMPDIFF(YEAR, p.fecha_nacimiento, CURDATE()) AS paciente_edad,\r\n      p.genero AS paciente_genero,\r\n      p.telefono AS paciente_telefono,\r\n      p.email AS paciente_email,\r\n      p.foto_url AS paciente_foto_url,\r\n      p.grupo_sanguineo AS paciente_grupo_sanguineo,\r\n      p.alergias AS paciente_alergias,\r\n      p.condiciones_cronicas AS paciente_condiciones_cronicas,\r\n\r\n      -- Cita\r\n      c.id_cita,\r\n      c.motivo AS cita_motivo,\r\n      c.tipo_cita,\r\n      c.notas AS cita_notas_previas\r\n\r\n    FROM telemedicina_sesiones ts\r\n    INNER JOIN pacientes p ON ts.id_paciente = p.id_paciente\r\n    INNER JOIN citas c ON ts.id_cita = c.id_cita\r\n    WHERE ts.id_medico = ?\r\n      AND DATE(ts.fecha_hora_inicio_programada) BETWEEN ? AND ?\r\n  `;\n    const params = [\n        idMedico,\n        fechaInicio,\n        fechaFin\n    ];\n    if (estados && estados.length > 0) {\n        query += ` AND ts.estado IN (${estados.map(()=>\"?\").join(\",\")})`;\n        params.push(...estados);\n    }\n    query += ` ORDER BY ts.fecha_hora_inicio_programada ASC`;\n    const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(query, params);\n    return rows.map((row)=>{\n        let alergias = [];\n        let condiciones_cronicas = [];\n        // tus campos en pacientes son TEXT que dicen \"JSON ...\" ‚Üí intentamos parsear\n        try {\n            if (row.paciente_alergias) {\n                const parsed = JSON.parse(row.paciente_alergias);\n                if (Array.isArray(parsed)) alergias = parsed;\n            }\n        } catch  {\n            alergias = [];\n        }\n        try {\n            if (row.paciente_condiciones_cronicas) {\n                const parsed = JSON.parse(row.paciente_condiciones_cronicas);\n                if (Array.isArray(parsed)) condiciones_cronicas = parsed;\n            }\n        } catch  {\n            condiciones_cronicas = [];\n        }\n        return {\n            id_sesion: row.id_sesion,\n            id_cita: row.id_cita,\n            id_paciente: row.id_paciente,\n            id_medico: row.id_medico,\n            token_acceso: row.token_acceso,\n            url_sesion: `/medico/telemedicina/sala?sesion=${row.id_sesion}`,\n            estado: row.estado,\n            fecha_hora_inicio_programada: row.fecha_hora_inicio_programada,\n            fecha_hora_fin_programada: row.fecha_hora_fin_programada,\n            fecha_hora_inicio_real: row.fecha_hora_inicio_real,\n            fecha_hora_fin_real: row.fecha_hora_fin_real,\n            duracion_segundos: row.duracion_segundos,\n            proveedor_servicio: row.proveedor_servicio,\n            calidad_conexion: row.calidad_conexion,\n            grabacion_autorizada: row.grabacion_autorizada === 1,\n            url_grabacion: row.url_grabacion,\n            evaluacion_paciente: row.evaluacion_paciente,\n            evaluacion_medico: row.evaluacion_medico,\n            paciente: {\n                id_paciente: row.id_paciente,\n                nombre_completo: `${row.paciente_nombre} ${row.paciente_apellido_paterno} ${row.paciente_apellido_materno || \"\"}`.trim(),\n                edad: row.paciente_edad,\n                genero: row.paciente_genero,\n                telefono: row.paciente_telefono,\n                email: row.paciente_email,\n                foto_url: row.paciente_foto_url,\n                grupo_sanguineo: row.paciente_grupo_sanguineo || \"N/A\",\n                alergias,\n                condiciones_cronicas\n            },\n            cita: {\n                id_cita: row.id_cita,\n                motivo: row.cita_motivo,\n                tipo_cita: row.tipo_cita,\n                notas_previas: row.cita_notas_previas\n            }\n        };\n    });\n}\n// ========================================\n// HANDLER GET - Obtener sesiones\n// ========================================\nasync function GET(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        console.log(\"\\uD83E\\uDDE9 TOKEN DETECTADO GET /telemedicina/sesiones:\", sessionToken);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const searchParams = request.nextUrl.searchParams;\n        const fechaInicio = searchParams.get(\"fecha_inicio\") || new Date().toISOString().split(\"T\")[0];\n        const fechaFin = searchParams.get(\"fecha_fin\") || new Date().toISOString().split(\"T\")[0];\n        const estados = searchParams.get(\"estados\")?.split(\",\");\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE sesiones_usuarios SET ultima_actividad = NOW() WHERE token = ?`, [\n            sessionToken\n        ]);\n        const sesionesTele = await obtenerSesionesTelemedicina(medico.id_medico, fechaInicio, fechaFin, estados);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            sesiones: sesionesTele,\n            filtros: {\n                fecha_inicio: fechaInicio,\n                fecha_fin: fechaFin,\n                estados: estados || []\n            },\n            timestamp: new Date().toISOString()\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"‚ùå Error en GET /api/telemedicina/sesiones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// HANDLER POST - Crear sesi√≥n\n// ========================================\nasync function POST(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        console.log(\"\\uD83E\\uDDE9 TOKEN DETECTADO POST /telemedicina/sesiones:\", sessionToken);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { id_cita, id_paciente, fecha_hora_inicio, fecha_hora_fin, proveedor_servicio = \"AnySSA Video Conference\" } = body;\n        if (!id_cita || !id_paciente || !fecha_hora_inicio || !fecha_hora_fin) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Faltan datos requeridos\"\n            }, {\n                status: 400\n            });\n        }\n        const tokenAcceso = `tele_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n        const urlSesion = `/medico/telemedicina/sala?token=${tokenAcceso}`;\n        const [result] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      INSERT INTO telemedicina_sesiones (\r\n        id_cita,\r\n        id_paciente,\r\n        id_medico,\r\n        token_acceso,\r\n        url_sesion,\r\n        estado,\r\n        fecha_hora_inicio_programada,\r\n        fecha_hora_fin_programada,\r\n        proveedor_servicio\r\n      ) VALUES (?, ?, ?, ?, ?, 'programada', ?, ?, ?)\r\n      `, [\n            id_cita,\n            id_paciente,\n            medico.id_medico,\n            tokenAcceso,\n            urlSesion,\n            fecha_hora_inicio,\n            fecha_hora_fin,\n            proveedor_servicio\n        ]);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Sesi\\xf3n de telemedicina creada exitosamente\",\n            id_sesion: result.insertId,\n            token_acceso: tokenAcceso,\n            url_sesion: urlSesion\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"‚ùå Error en POST /api/telemedicina/sesiones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n// ========================================\n// HANDLER PUT - Actualizar sesi√≥n\n// ========================================\nasync function PUT(request) {\n    try {\n        const sessionToken = getSessionToken(request);\n        console.log(\"\\uD83E\\uDDE9 TOKEN DETECTADO PUT /telemedicina/sesiones:\", sessionToken);\n        if (!sessionToken) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No hay sesi\\xf3n activa\"\n            }, {\n                status: 401\n            });\n        }\n        const [sesiones] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`\r\n      SELECT su.id_usuario\r\n      FROM sesiones_usuarios su\r\n      INNER JOIN usuarios u ON su.id_usuario = u.id_usuario\r\n      WHERE su.token = ?\r\n        AND su.activa = 1\r\n        AND su.fecha_expiracion > NOW()\r\n        AND u.estado = 'activo'\r\n      LIMIT 1\r\n      `, [\n            sessionToken\n        ]);\n        if (sesiones.length === 0) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Sesi\\xf3n inv\\xe1lida o expirada\"\n            }, {\n                status: 401\n            });\n        }\n        const idUsuario = sesiones[0].id_usuario;\n        const medico = await obtenerMedicoAutenticado(idUsuario);\n        if (!medico) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"No tienes un registro de m\\xe9dico activo\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { id_sesion, estado, calidad_conexion, evaluacion_medico } = body;\n        if (!id_sesion) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"ID de sesi\\xf3n requerido\"\n            }, {\n                status: 400\n            });\n        }\n        const updates = [];\n        const params = [];\n        if (estado) {\n            updates.push(\"estado = ?\");\n            params.push(estado);\n            if (estado === \"en_curso\") {\n                updates.push(\"fecha_hora_inicio_real = NOW()\");\n            }\n            if (estado === \"finalizada\") {\n                updates.push(\"fecha_hora_fin_real = NOW()\");\n                updates.push(\"duracion_segundos = TIMESTAMPDIFF(SECOND, fecha_hora_inicio_real, NOW())\");\n            }\n        }\n        if (calidad_conexion) {\n            updates.push(\"calidad_conexion = ?\");\n            params.push(calidad_conexion);\n        }\n        if (evaluacion_medico !== undefined) {\n            updates.push(\"evaluacion_medico = ?\");\n            params.push(evaluacion_medico);\n        }\n        params.push(id_sesion, medico.id_medico);\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__[\"default\"].query(`UPDATE telemedicina_sesiones SET ${updates.join(\", \")} WHERE id_sesion = ? AND id_medico = ?`, params);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            message: \"Sesi\\xf3n actualizada exitosamente\"\n        }, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"‚ùå Error en PUT /api/telemedicina/sesiones:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: \"Error interno del servidor\",\n            details:  true ? error.message : 0\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS90ZWxlbWVkaWNpbmEvc2VzaW9uZXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxzREFBc0Q7QUFFRTtBQUM1QjtBQWE1QiwyQ0FBMkM7QUFDM0MsNEJBQTRCO0FBQzVCLDJDQUEyQztBQUUzQyxNQUFNRSw0QkFBNEI7SUFDaEM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Q7QUFFRCxnRkFBZ0Y7QUFDaEYsU0FBU0MsZ0JBQWdCQyxPQUFvQjtJQUMzQyxxQkFBcUI7SUFDckIsTUFBTUMsZUFBZUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsYUFBYTtJQUV0RCxJQUFJRixjQUFjO1FBQ2hCLE1BQU1HLFVBQVVILGFBQ2JJLEtBQUssQ0FBQyxLQUNOQyxHQUFHLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsSUFBSSxJQUNqQkMsTUFBTSxDQUFDQyxTQUNQQyxNQUFNLENBQUMsQ0FBQ0MsS0FBS0w7WUFDWixNQUFNLENBQUNNLEdBQUcsR0FBR0MsS0FBSyxHQUFHUCxFQUFFRixLQUFLLENBQUM7WUFDN0JPLEdBQUcsQ0FBQ0MsRUFBRSxHQUFHQyxLQUFLQyxJQUFJLENBQUM7WUFDbkIsT0FBT0g7UUFDVCxHQUFHLENBQUM7UUFFTixLQUFLLE1BQU1JLFFBQVFsQiwwQkFBMkI7WUFDNUMsSUFBSU0sT0FBTyxDQUFDWSxLQUFLLEVBQUU7Z0JBQ2pCLE9BQU9DLG1CQUFtQmIsT0FBTyxDQUFDWSxLQUFLO1lBQ3pDO1FBQ0Y7SUFDRjtJQUVBLDZEQUE2RDtJQUM3RCxNQUFNRSxZQUFZbEIsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFDdEMsTUFBTWdCLFlBQVluQixRQUFRRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUV0QyxNQUFNaUIsT0FBT0YsYUFBYUM7SUFFMUIsSUFBSUMsUUFBUUEsS0FBS0MsVUFBVSxDQUFDLFlBQVk7UUFDdEMsT0FBT0QsS0FBS0UsS0FBSyxDQUFDO0lBQ3BCO0lBRUEsT0FB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UUFBUTFGLElBQUksQ0FDVjtZQUVKO1FBQ0Y7UUFFQSxJQUFJd0Isa0JBQWtCO1lBQ3BCa0UsUUFBUTFGLElBQUksQ0FBQztZQUNiRCxPQUFPQyxJQUFJLENBQUN3QjtRQUNkO1FBRUEsSUFBSUksc0JBQXNCK0MsV0FBVztZQUNuQ2UsUUFBUTFGLElBQUksQ0FBQztZQUNiRCxPQUFPQyxJQUFJLENBQUM0QjtRQUNkO1FBRUE3QixPQUFPQyxJQUFJLENBQUNXLFdBQVdtRCxPQUFPaEQsU0FBUztRQUV2QyxNQUFNbkQscURBQVUsQ0FDZCxDQUFDLGlDQUFpQyxFQUFFK0gsUUFBUTdHLElBQUksQ0FDOUMsTUFDQSxzQ0FBc0MsQ0FBQyxFQUN6Q2tCO1FBR0YsT0FBT3JDLGtGQUFZQSxDQUFDOEYsSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RpQixTQUFTO1FBQ1gsR0FDQTtZQUFFZixRQUFRO1FBQUk7SUFFbEIsRUFBRSxPQUFPRCxPQUFZO1FBQ25CSixRQUFRSSxLQUFLLENBQUMsOENBQThDQTtRQUM1RCxPQUFPaEcsa0ZBQVlBLENBQUM4RixJQUFJLENBQ3RCO1lBQ0VDLFNBQVM7WUFDVEMsT0FBTztZQUNQYyxTQUNFQyxLQUFzQyxHQUFHZixNQUFNZ0IsT0FBTyxHQUFHQyxDQUFTQTtRQUN0RSxHQUNBO1lBQUVoQixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvYXBwL2FwaS90ZWxlbWVkaWNpbmEvc2VzaW9uZXMvcm91dGUudHM/ZGQxMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBmcm9udGVuZC9zcmMvYXBwL2FwaS90ZWxlbWVkaWNpbmEvc2VzaW9uZXMvcm91dGUudHNcclxuXHJcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHBvb2wgZnJvbSBcIkAvbGliL2RiXCI7XHJcbmltcG9ydCB7IFJvd0RhdGFQYWNrZXQsIFJlc3VsdFNldEhlYWRlciB9IGZyb20gXCJteXNxbDJcIjtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gVElQT1NcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW50ZXJmYWNlIE1lZGljb0RhdGEge1xyXG4gIGlkX21lZGljbzogbnVtYmVyO1xyXG4gIGlkX3VzdWFyaW86IG51bWJlcjtcclxuICBpZF9jZW50cm9fcHJpbmNpcGFsOiBudW1iZXI7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSEVMUEVSIFBBUkEgT0JURU5FUiBUT0tFTlxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5jb25zdCBTRVNTSU9OX0NPT0tJRV9DQU5ESURBVEVTID0gW1xyXG4gIFwic2Vzc2lvblwiLFxyXG4gIFwic2Vzc2lvbl90b2tlblwiLFxyXG4gIFwibWVkaXNhbHVkX3Nlc3Npb25cIixcclxuICBcImF1dGhfc2Vzc2lvblwiLFxyXG4gIFwibmV4dC1hdXRoLnNlc3Npb24tdG9rZW5cIixcclxuICBcIl9fU2VjdXJlLW5leHQtYXV0aC5zZXNzaW9uLXRva2VuXCIsXHJcbl07XHJcblxyXG4vLyDwn5GJIHZlcnNpw7NuIG3DoXMgdG9sZXJhbnRlOiBjb29raWVzICsgQXV0aG9yaXphdGlvbiArIEF1dGhvcml6YXRpb24gKG1hecO6c2N1bGEpXHJcbmZ1bmN0aW9uIGdldFNlc3Npb25Ub2tlbihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB8IG51bGwge1xyXG4gIC8vIDEpIHJldmlzYXIgY29va2llc1xyXG4gIGNvbnN0IGNvb2tpZUhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJjb29raWVcIikgfHwgXCJcIjtcclxuXHJcbiAgaWYgKGNvb2tpZUhlYWRlcikge1xyXG4gICAgY29uc3QgY29va2llcyA9IGNvb2tpZUhlYWRlclxyXG4gICAgICAuc3BsaXQoXCI7XCIpXHJcbiAgICAgIC5tYXAoKGMpID0+IGMudHJpbSgpKVxyXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pXHJcbiAgICAgIC5yZWR1Y2UoKGFjYywgYykgPT4ge1xyXG4gICAgICAgIGNvbnN0IFtrLCAuLi5yZXN0XSA9IGMuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIGFjY1trXSA9IHJlc3Quam9pbihcIj1cIik7XHJcbiAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPik7XHJcblxyXG4gICAgZm9yIChjb25zdCBuYW1lIG9mIFNFU1NJT05fQ09PS0lFX0NBTkRJREFURVMpIHtcclxuICAgICAgaWYgKGNvb2tpZXNbbmFtZV0pIHtcclxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZXNbbmFtZV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAyKSByZXZpc2FyIGhlYWRlcnMgZGUgYXV0b3JpemFjacOzbiAobWluw7pzY3VsYSBvIG1hecO6c2N1bGEpXHJcbiAgY29uc3QgYXV0aExvd2VyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIik7XHJcbiAgY29uc3QgYXV0aFVwcGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIkF1dGhvcml6YXRpb25cIik7XHJcblxyXG4gIGNvbnN0IGF1dGggPSBhdXRoTG93ZXIgfHwgYXV0aFVwcGVyO1xyXG5cclxuICBpZiAoYXV0aCAmJiBhdXRoLnN0YXJ0c1dpdGgoXCJCZWFyZXIgXCIpKSB7XHJcbiAgICByZXR1cm4gYXV0aC5zbGljZSg3KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEZVTkNJT05FUyBBVVhJTElBUkVTXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyhcclxuICBpZFVzdWFyaW86IG51bWJlclxyXG4pOiBQcm9taXNlPE1lZGljb0RhdGEgfCBudWxsPiB7XHJcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICBtLmlkX21lZGljbyxcclxuICAgICAgbS5pZF91c3VhcmlvLFxyXG4gICAgICBtLmlkX2NlbnRyb19wcmluY2lwYWxcclxuICAgIEZST00gbWVkaWNvcyBtXHJcbiAgICBXSEVSRSBtLmlkX3VzdWFyaW8gPSA/IEFORCBtLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBMSU1JVCAxXHJcbiAgICBgLFxyXG4gICAgW2lkVXN1YXJpb11cclxuICApO1xyXG5cclxuICBpZiAocm93cy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJvd3NbMF0gYXMgTWVkaWNvRGF0YTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gb2J0ZW5lclNlc2lvbmVzVGVsZW1lZGljaW5hKFxyXG4gIGlkTWVkaWNvOiBudW1iZXIsXHJcbiAgZmVjaGFJbmljaW86IHN0cmluZyxcclxuICBmZWNoYUZpbjogc3RyaW5nLFxyXG4gIGVzdGFkb3M/OiBzdHJpbmdbXVxyXG4pOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgbGV0IHF1ZXJ5ID0gYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICB0cy5pZF9zZXNpb24sXHJcbiAgICAgIHRzLmlkX2NpdGEsXHJcbiAgICAgIHRzLmlkX3BhY2llbnRlLFxyXG4gICAgICB0cy5pZF9tZWRpY28sXHJcbiAgICAgIHRzLnRva2VuX2FjY2VzbyxcclxuICAgICAgdHMudXJsX3Nlc2lvbixcclxuICAgICAgdHMuZXN0YWRvLFxyXG4gICAgICB0cy5mZWNoYV9ob3JhX2luaWNpb19wcm9ncmFtYWRhLFxyXG4gICAgICB0cy5mZWNoYV9ob3JhX2Zpbl9wcm9ncmFtYWRhLFxyXG4gICAgICB0cy5mZWNoYV9ob3JhX2luaWNpb19yZWFsLFxyXG4gICAgICB0cy5mZWNoYV9ob3JhX2Zpbl9yZWFsLFxyXG4gICAgICB0cy5kdXJhY2lvbl9zZWd1bmRvcyxcclxuICAgICAgdHMucHJvdmVlZG9yX3NlcnZpY2lvLFxyXG4gICAgICB0cy5jYWxpZGFkX2NvbmV4aW9uLFxyXG4gICAgICB0cy5ncmFiYWNpb25fYXV0b3JpemFkYSxcclxuICAgICAgdHMudXJsX2dyYWJhY2lvbixcclxuICAgICAgdHMuZXZhbHVhY2lvbl9wYWNpZW50ZSxcclxuICAgICAgdHMuZXZhbHVhY2lvbl9tZWRpY28sXHJcblxyXG4gICAgICAtLSBQYWNpZW50ZVxyXG4gICAgICBwLmlkX3BhY2llbnRlLFxyXG4gICAgICBwLm5vbWJyZSBBUyBwYWNpZW50ZV9ub21icmUsXHJcbiAgICAgIHAuYXBlbGxpZG9fcGF0ZXJubyBBUyBwYWNpZW50ZV9hcGVsbGlkb19wYXRlcm5vLFxyXG4gICAgICBwLmFwZWxsaWRvX21hdGVybm8gQVMgcGFjaWVudGVfYXBlbGxpZG9fbWF0ZXJubyxcclxuICAgICAgVElNRVNUQU1QRElGRihZRUFSLCBwLmZlY2hhX25hY2ltaWVudG8sIENVUkRBVEUoKSkgQVMgcGFjaWVudGVfZWRhZCxcclxuICAgICAgcC5nZW5lcm8gQVMgcGFjaWVudGVfZ2VuZXJvLFxyXG4gICAgICBwLnRlbGVmb25vIEFTIHBhY2llbnRlX3RlbGVmb25vLFxyXG4gICAgICBwLmVtYWlsIEFTIHBhY2llbnRlX2VtYWlsLFxyXG4gICAgICBwLmZvdG9fdXJsIEFTIHBhY2llbnRlX2ZvdG9fdXJsLFxyXG4gICAgICBwLmdydXBvX3Nhbmd1aW5lbyBBUyBwYWNpZW50ZV9ncnVwb19zYW5ndWluZW8sXHJcbiAgICAgIHAuYWxlcmdpYXMgQVMgcGFjaWVudGVfYWxlcmdpYXMsXHJcbiAgICAgIHAuY29uZGljaW9uZXNfY3JvbmljYXMgQVMgcGFjaWVudGVfY29uZGljaW9uZXNfY3JvbmljYXMsXHJcblxyXG4gICAgICAtLSBDaXRhXHJcbiAgICAgIGMuaWRfY2l0YSxcclxuICAgICAgYy5tb3Rpdm8gQVMgY2l0YV9tb3Rpdm8sXHJcbiAgICAgIGMudGlwb19jaXRhLFxyXG4gICAgICBjLm5vdGFzIEFTIGNpdGFfbm90YXNfcHJldmlhc1xyXG5cclxuICAgIEZST00gdGVsZW1lZGljaW5hX3Nlc2lvbmVzIHRzXHJcbiAgICBJTk5FUiBKT0lOIHBhY2llbnRlcyBwIE9OIHRzLmlkX3BhY2llbnRlID0gcC5pZF9wYWNpZW50ZVxyXG4gICAgSU5ORVIgSk9JTiBjaXRhcyBjIE9OIHRzLmlkX2NpdGEgPSBjLmlkX2NpdGFcclxuICAgIFdIRVJFIHRzLmlkX21lZGljbyA9ID9cclxuICAgICAgQU5EIERBVEUodHMuZmVjaGFfaG9yYV9pbmljaW9fcHJvZ3JhbWFkYSkgQkVUV0VFTiA/IEFORCA/XHJcbiAgYDtcclxuXHJcbiAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtpZE1lZGljbywgZmVjaGFJbmljaW8sIGZlY2hhRmluXTtcclxuXHJcbiAgaWYgKGVzdGFkb3MgJiYgZXN0YWRvcy5sZW5ndGggPiAwKSB7XHJcbiAgICBxdWVyeSArPSBgIEFORCB0cy5lc3RhZG8gSU4gKCR7ZXN0YWRvcy5tYXAoKCkgPT4gXCI/XCIpLmpvaW4oXCIsXCIpfSlgO1xyXG4gICAgcGFyYW1zLnB1c2goLi4uZXN0YWRvcyk7XHJcbiAgfVxyXG5cclxuICBxdWVyeSArPSBgIE9SREVSIEJZIHRzLmZlY2hhX2hvcmFfaW5pY2lvX3Byb2dyYW1hZGEgQVNDYDtcclxuXHJcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeTxSb3dEYXRhUGFja2V0W10+KHF1ZXJ5LCBwYXJhbXMpO1xyXG5cclxuICByZXR1cm4gcm93cy5tYXAoKHJvdykgPT4ge1xyXG4gICAgbGV0IGFsZXJnaWFzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgbGV0IGNvbmRpY2lvbmVzX2Nyb25pY2FzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIC8vIHR1cyBjYW1wb3MgZW4gcGFjaWVudGVzIHNvbiBURVhUIHF1ZSBkaWNlbiBcIkpTT04gLi4uXCIg4oaSIGludGVudGFtb3MgcGFyc2VhclxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHJvdy5wYWNpZW50ZV9hbGVyZ2lhcykge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uocm93LnBhY2llbnRlX2FsZXJnaWFzKTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQpKSBhbGVyZ2lhcyA9IHBhcnNlZDtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIGFsZXJnaWFzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHJvdy5wYWNpZW50ZV9jb25kaWNpb25lc19jcm9uaWNhcykge1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uocm93LnBhY2llbnRlX2NvbmRpY2lvbmVzX2Nyb25pY2FzKTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQpKSBjb25kaWNpb25lc19jcm9uaWNhcyA9IHBhcnNlZDtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIGNvbmRpY2lvbmVzX2Nyb25pY2FzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWRfc2VzaW9uOiByb3cuaWRfc2VzaW9uLFxyXG4gICAgICBpZF9jaXRhOiByb3cuaWRfY2l0YSxcclxuICAgICAgaWRfcGFjaWVudGU6IHJvdy5pZF9wYWNpZW50ZSxcclxuICAgICAgaWRfbWVkaWNvOiByb3cuaWRfbWVkaWNvLFxyXG4gICAgICB0b2tlbl9hY2Nlc286IHJvdy50b2tlbl9hY2Nlc28sXHJcbiAgICAgIHVybF9zZXNpb246IGAvbWVkaWNvL3RlbGVtZWRpY2luYS9zYWxhP3Nlc2lvbj0ke3Jvdy5pZF9zZXNpb259YCxcclxuICAgICAgZXN0YWRvOiByb3cuZXN0YWRvLFxyXG4gICAgICBmZWNoYV9ob3JhX2luaWNpb19wcm9ncmFtYWRhOiByb3cuZmVjaGFfaG9yYV9pbmljaW9fcHJvZ3JhbWFkYSxcclxuICAgICAgZmVjaGFfaG9yYV9maW5fcHJvZ3JhbWFkYTogcm93LmZlY2hhX2hvcmFfZmluX3Byb2dyYW1hZGEsXHJcbiAgICAgIGZlY2hhX2hvcmFfaW5pY2lvX3JlYWw6IHJvdy5mZWNoYV9ob3JhX2luaWNpb19yZWFsLFxyXG4gICAgICBmZWNoYV9ob3JhX2Zpbl9yZWFsOiByb3cuZmVjaGFfaG9yYV9maW5fcmVhbCxcclxuICAgICAgZHVyYWNpb25fc2VndW5kb3M6IHJvdy5kdXJhY2lvbl9zZWd1bmRvcyxcclxuICAgICAgcHJvdmVlZG9yX3NlcnZpY2lvOiByb3cucHJvdmVlZG9yX3NlcnZpY2lvLFxyXG4gICAgICBjYWxpZGFkX2NvbmV4aW9uOiByb3cuY2FsaWRhZF9jb25leGlvbixcclxuICAgICAgZ3JhYmFjaW9uX2F1dG9yaXphZGE6IHJvdy5ncmFiYWNpb25fYXV0b3JpemFkYSA9PT0gMSxcclxuICAgICAgdXJsX2dyYWJhY2lvbjogcm93LnVybF9ncmFiYWNpb24sXHJcbiAgICAgIGV2YWx1YWNpb25fcGFjaWVudGU6IHJvdy5ldmFsdWFjaW9uX3BhY2llbnRlLFxyXG4gICAgICBldmFsdWFjaW9uX21lZGljbzogcm93LmV2YWx1YWNpb25fbWVkaWNvLFxyXG4gICAgICBwYWNpZW50ZToge1xyXG4gICAgICAgIGlkX3BhY2llbnRlOiByb3cuaWRfcGFjaWVudGUsXHJcbiAgICAgICAgbm9tYnJlX2NvbXBsZXRvOiBgJHtyb3cucGFjaWVudGVfbm9tYnJlfSAke3Jvdy5wYWNpZW50ZV9hcGVsbGlkb19wYXRlcm5vfSAke3Jvdy5wYWNpZW50ZV9hcGVsbGlkb19tYXRlcm5vIHx8IFwiXCJ9YC50cmltKCksXHJcbiAgICAgICAgZWRhZDogcm93LnBhY2llbnRlX2VkYWQsXHJcbiAgICAgICAgZ2VuZXJvOiByb3cucGFjaWVudGVfZ2VuZXJvLFxyXG4gICAgICAgIHRlbGVmb25vOiByb3cucGFjaWVudGVfdGVsZWZvbm8sXHJcbiAgICAgICAgZW1haWw6IHJvdy5wYWNpZW50ZV9lbWFpbCxcclxuICAgICAgICBmb3RvX3VybDogcm93LnBhY2llbnRlX2ZvdG9fdXJsLFxyXG4gICAgICAgIGdydXBvX3Nhbmd1aW5lbzogcm93LnBhY2llbnRlX2dydXBvX3Nhbmd1aW5lbyB8fCBcIk4vQVwiLFxyXG4gICAgICAgIGFsZXJnaWFzLFxyXG4gICAgICAgIGNvbmRpY2lvbmVzX2Nyb25pY2FzLFxyXG4gICAgICB9LFxyXG4gICAgICBjaXRhOiB7XHJcbiAgICAgICAgaWRfY2l0YTogcm93LmlkX2NpdGEsXHJcbiAgICAgICAgbW90aXZvOiByb3cuY2l0YV9tb3Rpdm8sXHJcbiAgICAgICAgdGlwb19jaXRhOiByb3cudGlwb19jaXRhLFxyXG4gICAgICAgIG5vdGFzX3ByZXZpYXM6IHJvdy5jaXRhX25vdGFzX3ByZXZpYXMsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIEhBTkRMRVIgR0VUIC0gT2J0ZW5lciBzZXNpb25lc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IGdldFNlc3Npb25Ub2tlbihyZXF1ZXN0KTtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+nqSBUT0tFTiBERVRFQ1RBRE8gR0VUIC90ZWxlbWVkaWNpbmEvc2VzaW9uZXM6XCIsIHNlc3Npb25Ub2tlbik7XHJcblxyXG4gICAgaWYgKCFzZXNzaW9uVG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIk5vIGhheSBzZXNpw7NuIGFjdGl2YVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgW3Nlc2lvbmVzXSA9IGF3YWl0IHBvb2wucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFxyXG4gICAgICBTRUxFQ1Qgc3UuaWRfdXN1YXJpb1xyXG4gICAgICBGUk9NIHNlc2lvbmVzX3VzdWFyaW9zIHN1XHJcbiAgICAgIElOTkVSIEpPSU4gdXN1YXJpb3MgdSBPTiBzdS5pZF91c3VhcmlvID0gdS5pZF91c3VhcmlvXHJcbiAgICAgIFdIRVJFIHN1LnRva2VuID0gP1xyXG4gICAgICAgIEFORCBzdS5hY3RpdmEgPSAxXHJcbiAgICAgICAgQU5EIHN1LmZlY2hhX2V4cGlyYWNpb24gPiBOT1coKVxyXG4gICAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAgIExJTUlUIDFcclxuICAgICAgYCxcclxuICAgICAgW3Nlc3Npb25Ub2tlbl1cclxuICAgICk7XHJcblxyXG4gICAgaWYgKHNlc2lvbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiU2VzacOzbiBpbnbDoWxpZGEgbyBleHBpcmFkYVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaWRVc3VhcmlvID0gc2VzaW9uZXNbMF0uaWRfdXN1YXJpbztcclxuICAgIGNvbnN0IG1lZGljbyA9IGF3YWl0IG9idGVuZXJNZWRpY29BdXRlbnRpY2FkbyhpZFVzdWFyaW8pO1xyXG5cclxuICAgIGlmICghbWVkaWNvKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyB0aWVuZXMgdW4gcmVnaXN0cm8gZGUgbcOpZGljbyBhY3Rpdm9cIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDMgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXM7XHJcbiAgICBjb25zdCBmZWNoYUluaWNpbyA9XHJcbiAgICAgIHNlYXJjaFBhcmFtcy5nZXQoXCJmZWNoYV9pbmljaW9cIikgfHxcclxuICAgICAgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcclxuICAgIGNvbnN0IGZlY2hhRmluID1cclxuICAgICAgc2VhcmNoUGFyYW1zLmdldChcImZlY2hhX2ZpblwiKSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xyXG4gICAgY29uc3QgZXN0YWRvcyA9IHNlYXJjaFBhcmFtcy5nZXQoXCJlc3RhZG9zXCIpPy5zcGxpdChcIixcIik7XHJcblxyXG4gICAgYXdhaXQgcG9vbC5xdWVyeShcclxuICAgICAgYFVQREFURSBzZXNpb25lc191c3VhcmlvcyBTRVQgdWx0aW1hX2FjdGl2aWRhZCA9IE5PVygpIFdIRVJFIHRva2VuID0gP2AsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHNlc2lvbmVzVGVsZSA9IGF3YWl0IG9idGVuZXJTZXNpb25lc1RlbGVtZWRpY2luYShcclxuICAgICAgbWVkaWNvLmlkX21lZGljbyxcclxuICAgICAgZmVjaGFJbmljaW8sXHJcbiAgICAgIGZlY2hhRmluLFxyXG4gICAgICBlc3RhZG9zXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgc2VzaW9uZXM6IHNlc2lvbmVzVGVsZSxcclxuICAgICAgICBmaWx0cm9zOiB7XHJcbiAgICAgICAgICBmZWNoYV9pbmljaW86IGZlY2hhSW5pY2lvLFxyXG4gICAgICAgICAgZmVjaGFfZmluOiBmZWNoYUZpbixcclxuICAgICAgICAgIGVzdGFkb3M6IGVzdGFkb3MgfHwgW10sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gR0VUIC9hcGkvdGVsZW1lZGljaW5hL3Nlc2lvbmVzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxyXG4gICAgICAgIGRldGFpbHM6XHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBIQU5ETEVSIFBPU1QgLSBDcmVhciBzZXNpw7NuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb25Ub2tlbiA9IGdldFNlc3Npb25Ub2tlbihyZXF1ZXN0KTtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+nqSBUT0tFTiBERVRFQ1RBRE8gUE9TVCAvdGVsZW1lZGljaW5hL3Nlc2lvbmVzOlwiLCBzZXNzaW9uVG9rZW4pO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgc2VzacOzbiBhY3RpdmFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtzZXNpb25lc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHN1LmlkX3VzdWFyaW9cclxuICAgICAgRlJPTSBzZXNpb25lc191c3VhcmlvcyBzdVxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gc3UuaWRfdXN1YXJpbyA9IHUuaWRfdXN1YXJpb1xyXG4gICAgICBXSEVSRSBzdS50b2tlbiA9ID9cclxuICAgICAgICBBTkQgc3UuYWN0aXZhID0gMVxyXG4gICAgICAgIEFORCBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKClcclxuICAgICAgICBBTkQgdS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzZXNpb25lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlNlc2nDs24gaW52w6FsaWRhIG8gZXhwaXJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlkVXN1YXJpbyA9IHNlc2lvbmVzWzBdLmlkX3VzdWFyaW87XHJcbiAgICBjb25zdCBtZWRpY28gPSBhd2FpdCBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oaWRVc3VhcmlvKTtcclxuXHJcbiAgICBpZiAoIW1lZGljbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gdGllbmVzIHVuIHJlZ2lzdHJvIGRlIG3DqWRpY28gYWN0aXZvXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGlkX2NpdGEsXHJcbiAgICAgIGlkX3BhY2llbnRlLFxyXG4gICAgICBmZWNoYV9ob3JhX2luaWNpbyxcclxuICAgICAgZmVjaGFfaG9yYV9maW4sXHJcbiAgICAgIHByb3ZlZWRvcl9zZXJ2aWNpbyA9IFwiQW55U1NBIFZpZGVvIENvbmZlcmVuY2VcIixcclxuICAgIH0gPSBib2R5O1xyXG5cclxuICAgIGlmICghaWRfY2l0YSB8fCAhaWRfcGFjaWVudGUgfHwgIWZlY2hhX2hvcmFfaW5pY2lvIHx8ICFmZWNoYV9ob3JhX2Zpbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiRmFsdGFuIGRhdG9zIHJlcXVlcmlkb3NcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRva2VuQWNjZXNvID0gYHRlbGVfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKClcclxuICAgICAgLnRvU3RyaW5nKDM2KVxyXG4gICAgICAuc3Vic3RyaW5nKDcpfWA7XHJcbiAgICBjb25zdCB1cmxTZXNpb24gPSBgL21lZGljby90ZWxlbWVkaWNpbmEvc2FsYT90b2tlbj0ke3Rva2VuQWNjZXNvfWA7XHJcblxyXG4gICAgY29uc3QgW3Jlc3VsdF0gPSBhd2FpdCBwb29sLnF1ZXJ5PFJlc3VsdFNldEhlYWRlcj4oXHJcbiAgICAgIGBcclxuICAgICAgSU5TRVJUIElOVE8gdGVsZW1lZGljaW5hX3Nlc2lvbmVzIChcclxuICAgICAgICBpZF9jaXRhLFxyXG4gICAgICAgIGlkX3BhY2llbnRlLFxyXG4gICAgICAgIGlkX21lZGljbyxcclxuICAgICAgICB0b2tlbl9hY2Nlc28sXHJcbiAgICAgICAgdXJsX3Nlc2lvbixcclxuICAgICAgICBlc3RhZG8sXHJcbiAgICAgICAgZmVjaGFfaG9yYV9pbmljaW9fcHJvZ3JhbWFkYSxcclxuICAgICAgICBmZWNoYV9ob3JhX2Zpbl9wcm9ncmFtYWRhLFxyXG4gICAgICAgIHByb3ZlZWRvcl9zZXJ2aWNpb1xyXG4gICAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgJ3Byb2dyYW1hZGEnLCA/LCA/LCA/KVxyXG4gICAgICBgLFxyXG4gICAgICBbXHJcbiAgICAgICAgaWRfY2l0YSxcclxuICAgICAgICBpZF9wYWNpZW50ZSxcclxuICAgICAgICBtZWRpY28uaWRfbWVkaWNvLFxyXG4gICAgICAgIHRva2VuQWNjZXNvLFxyXG4gICAgICAgIHVybFNlc2lvbixcclxuICAgICAgICBmZWNoYV9ob3JhX2luaWNpbyxcclxuICAgICAgICBmZWNoYV9ob3JhX2ZpbixcclxuICAgICAgICBwcm92ZWVkb3Jfc2VydmljaW8sXHJcbiAgICAgIF1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBtZXNzYWdlOiBcIlNlc2nDs24gZGUgdGVsZW1lZGljaW5hIGNyZWFkYSBleGl0b3NhbWVudGVcIixcclxuICAgICAgICBpZF9zZXNpb246IHJlc3VsdC5pbnNlcnRJZCxcclxuICAgICAgICB0b2tlbl9hY2Nlc286IHRva2VuQWNjZXNvLFxyXG4gICAgICAgIHVybF9zZXNpb246IHVybFNlc2lvbixcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMSB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gUE9TVCAvYXBpL3RlbGVtZWRpY2luYS9zZXNpb25lczpcIiwgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IFwiRXJyb3IgaW50ZXJubyBkZWwgc2Vydmlkb3JcIixcclxuICAgICAgICBkZXRhaWxzOlxyXG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IGVycm9yLm1lc3NhZ2UgOiB1bmRlZmluZWQsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gSEFORExFUiBQVVQgLSBBY3R1YWxpemFyIHNlc2nDs25cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzZXNzaW9uVG9rZW4gPSBnZXRTZXNzaW9uVG9rZW4ocmVxdWVzdCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCfp6kgVE9LRU4gREVURUNUQURPIFBVVCAvdGVsZW1lZGljaW5hL3Nlc2lvbmVzOlwiLCBzZXNzaW9uVG9rZW4pO1xyXG5cclxuICAgIGlmICghc2Vzc2lvblRva2VuKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJObyBoYXkgc2VzacOzbiBhY3RpdmFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IFtzZXNpb25lc10gPSBhd2FpdCBwb29sLnF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICAgIGBcclxuICAgICAgU0VMRUNUIHN1LmlkX3VzdWFyaW9cclxuICAgICAgRlJPTSBzZXNpb25lc191c3VhcmlvcyBzdVxyXG4gICAgICBJTk5FUiBKT0lOIHVzdWFyaW9zIHUgT04gc3UuaWRfdXN1YXJpbyA9IHUuaWRfdXN1YXJpb1xyXG4gICAgICBXSEVSRSBzdS50b2tlbiA9ID9cclxuICAgICAgICBBTkQgc3UuYWN0aXZhID0gMVxyXG4gICAgICAgIEFORCBzdS5mZWNoYV9leHBpcmFjaW9uID4gTk9XKClcclxuICAgICAgICBBTkQgdS5lc3RhZG8gPSAnYWN0aXZvJ1xyXG4gICAgICBMSU1JVCAxXHJcbiAgICAgIGAsXHJcbiAgICAgIFtzZXNzaW9uVG9rZW5dXHJcbiAgICApO1xyXG5cclxuICAgIGlmIChzZXNpb25lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlNlc2nDs24gaW52w6FsaWRhIG8gZXhwaXJhZGFcIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGlkVXN1YXJpbyA9IHNlc2lvbmVzWzBdLmlkX3VzdWFyaW87XHJcbiAgICBjb25zdCBtZWRpY28gPSBhd2FpdCBvYnRlbmVyTWVkaWNvQXV0ZW50aWNhZG8oaWRVc3VhcmlvKTtcclxuXHJcbiAgICBpZiAoIW1lZGljbykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gdGllbmVzIHVuIHJlZ2lzdHJvIGRlIG3DqWRpY28gYWN0aXZvXCIgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCB7IGlkX3Nlc2lvbiwgZXN0YWRvLCBjYWxpZGFkX2NvbmV4aW9uLCBldmFsdWFjaW9uX21lZGljbyB9ID0gYm9keTtcclxuXHJcbiAgICBpZiAoIWlkX3Nlc2lvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiSUQgZGUgc2VzacOzbiByZXF1ZXJpZG9cIiB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVwZGF0ZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBwYXJhbXM6IGFueVtdID0gW107XHJcblxyXG4gICAgaWYgKGVzdGFkbykge1xyXG4gICAgICB1cGRhdGVzLnB1c2goXCJlc3RhZG8gPSA/XCIpO1xyXG4gICAgICBwYXJhbXMucHVzaChlc3RhZG8pO1xyXG5cclxuICAgICAgaWYgKGVzdGFkbyA9PT0gXCJlbl9jdXJzb1wiKSB7XHJcbiAgICAgICAgdXBkYXRlcy5wdXNoKFwiZmVjaGFfaG9yYV9pbmljaW9fcmVhbCA9IE5PVygpXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXN0YWRvID09PSBcImZpbmFsaXphZGFcIikge1xyXG4gICAgICAgIHVwZGF0ZXMucHVzaChcImZlY2hhX2hvcmFfZmluX3JlYWwgPSBOT1coKVwiKTtcclxuICAgICAgICB1cGRhdGVzLnB1c2goXHJcbiAgICAgICAgICBcImR1cmFjaW9uX3NlZ3VuZG9zID0gVElNRVNUQU1QRElGRihTRUNPTkQsIGZlY2hhX2hvcmFfaW5pY2lvX3JlYWwsIE5PVygpKVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChjYWxpZGFkX2NvbmV4aW9uKSB7XHJcbiAgICAgIHVwZGF0ZXMucHVzaChcImNhbGlkYWRfY29uZXhpb24gPSA/XCIpO1xyXG4gICAgICBwYXJhbXMucHVzaChjYWxpZGFkX2NvbmV4aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZhbHVhY2lvbl9tZWRpY28gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB1cGRhdGVzLnB1c2goXCJldmFsdWFjaW9uX21lZGljbyA9ID9cIik7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGV2YWx1YWNpb25fbWVkaWNvKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXJhbXMucHVzaChpZF9zZXNpb24sIG1lZGljby5pZF9tZWRpY28pO1xyXG5cclxuICAgIGF3YWl0IHBvb2wucXVlcnkoXHJcbiAgICAgIGBVUERBVEUgdGVsZW1lZGljaW5hX3Nlc2lvbmVzIFNFVCAke3VwZGF0ZXMuam9pbihcclxuICAgICAgICBcIiwgXCJcclxuICAgICAgKX0gV0hFUkUgaWRfc2VzaW9uID0gPyBBTkQgaWRfbWVkaWNvID0gP2AsXHJcbiAgICAgIHBhcmFtc1xyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwiU2VzacOzbiBhY3R1YWxpemFkYSBleGl0b3NhbWVudGVcIixcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDIwMCB9XHJcbiAgICApO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRXJyb3IgZW4gUFVUIC9hcGkvdGVsZW1lZGljaW5hL3Nlc2lvbmVzOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogXCJFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvclwiLFxyXG4gICAgICAgIGRldGFpbHM6XHJcbiAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiID8gZXJyb3IubWVzc2FnZSA6IHVuZGVmaW5lZCxcclxuICAgICAgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicG9vbCIsIlNFU1NJT05fQ09PS0lFX0NBTkRJREFURVMiLCJnZXRTZXNzaW9uVG9rZW4iLCJyZXF1ZXN0IiwiY29va2llSGVhZGVyIiwiaGVhZGVycyIsImdldCIsImNvb2tpZXMiLCJzcGxpdCIsIm1hcCIsImMiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlZHVjZSIsImFjYyIsImsiLCJyZXN0Iiwiam9pbiIsIm5hbWUiLCJkZWNvZGVVUklDb21wb25lbnQiLCJhdXRoTG93ZXIiLCJhdXRoVXBwZXIiLCJhdXRoIiwic3RhcnRzV2l0aCIsInNsaWNlIiwib2J0ZW5lck1lZGljb0F1dGVudGljYWRvIiwiaWRVc3VhcmlvIiwicm93cyIsInF1ZXJ5IiwibGVuZ3RoIiwib2J0ZW5lclNlc2lvbmVzVGVsZW1lZGljaW5hIiwiaWRNZWRpY28iLCJmZWNoYUluaWNpbyIsImZlY2hhRmluIiwiZXN0YWRvcyIsInBhcmFtcyIsInB1c2giLCJyb3ciLCJhbGVyZ2lhcyIsImNvbmRpY2lvbmVzX2Nyb25pY2FzIiwicGFjaWVudGVfYWxlcmdpYXMiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJwYWNpZW50ZV9jb25kaWNpb25lc19jcm9uaWNhcyIsImlkX3Nlc2lvbiIsImlkX2NpdGEiLCJpZF9wYWNpZW50ZSIsImlkX21lZGljbyIsInRva2VuX2FjY2VzbyIsInVybF9zZXNpb24iLCJlc3RhZG8iLCJmZWNoYV9ob3JhX2luaWNpb19wcm9ncmFtYWRhIiwiZmVjaGFfaG9yYV9maW5fcHJvZ3JhbWFkYSIsImZlY2hhX2hvcmFfaW5pY2lvX3JlYWwiLCJmZWNoYV9ob3JhX2Zpbl9yZWFsIiwiZHVyYWNpb25fc2VndW5kb3MiLCJwcm92ZWVkb3Jfc2VydmljaW8iLCJjYWxpZGFkX2NvbmV4aW9uIiwiZ3JhYmFjaW9uX2F1dG9yaXphZGEiLCJ1cmxfZ3JhYmFjaW9uIiwiZXZhbHVhY2lvbl9wYWNpZW50ZSIsImV2YWx1YWNpb25fbWVkaWNvIiwicGFjaWVudGUiLCJub21icmVfY29tcGxldG8iLCJwYWNpZW50ZV9ub21icmUiLCJwYWNpZW50ZV9hcGVsbGlkb19wYXRlcm5vIiwicGFjaWVudGVfYXBlbGxpZG9fbWF0ZXJubyIsImVkYWQiLCJwYWNpZW50ZV9lZGFkIiwiZ2VuZXJvIiwicGFjaWVudGVfZ2VuZXJvIiwidGVsZWZvbm8iLCJwYWNpZW50ZV90ZWxlZm9ubyIsImVtYWlsIiwicGFjaWVudGVfZW1haWwiLCJmb3RvX3VybCIsInBhY2llbnRlX2ZvdG9fdXJsIiwiZ3J1cG9fc2FuZ3VpbmVvIiwicGFjaWVudGVfZ3J1cG9fc2FuZ3VpbmVvIiwiY2l0YSIsIm1vdGl2byIsImNpdGFfbW90aXZvIiwidGlwb19jaXRhIiwibm90YXNfcHJldmlhcyIsImNpdGFfbm90YXNfcHJldmlhcyIsIkdFVCIsInNlc3Npb25Ub2tlbiIsImNvbnNvbGUiLCJsb2ciLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwic2VzaW9uZXMiLCJpZF91c3VhcmlvIiwibWVkaWNvIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNlc2lvbmVzVGVsZSIsImZpbHRyb3MiLCJmZWNoYV9pbmljaW8iLCJmZWNoYV9maW4iLCJ0aW1lc3RhbXAiLCJkZXRhaWxzIiwicHJvY2VzcyIsIm1lc3NhZ2UiLCJ1bmRlZmluZWQiLCJQT1NUIiwiYm9keSIsImZlY2hhX2hvcmFfaW5pY2lvIiwiZmVjaGFfaG9yYV9maW4iLCJ0b2tlbkFjY2VzbyIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsInVybFNlc2lvbiIsInJlc3VsdCIsImluc2VydElkIiwiUFVUIiwidXBkYXRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/telemedicina/sesiones/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   getGlobalStats: () => (/* binding */ getGlobalStats),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials),\n/* harmony export */   withTransaction: () => (/* binding */ withTransaction)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n// ===============================================================\n// üì¶ Archivo: src/lib/db.ts\n// üß† Descripci√≥n: Configuraci√≥n central de conexi√≥n a MySQL y utilidades\n// ===============================================================\n\n// ===============================================================\n// üîó Conexi√≥n al pool MySQL (segura, reutilizable y escalable)\n// ===============================================================\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASS || \"\",\n    database: process.env.DB_NAME || \"Anyssamed\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    multipleStatements: false,\n    namedPlaceholders: true\n});\n// ===============================================================\n// üß© Funci√≥n gen√©rica para ejecutar consultas seguras\n// ===============================================================\nasync function query(sql, params = []) {\n    try {\n        const [rows] = await pool.query(sql, params);\n        return rows;\n    } catch (error) {\n        console.error(\"‚ùå Error en query MySQL:\", error.message);\n        throw new Error(`Error en consulta: ${error.message}`);\n    }\n}\n// ===============================================================\n// üë§ Obtener usuario por email o username (para login o validaciones)\n// ‚úÖ Versi√≥n que PRIORIZA el rol M√âDICO y solo toma roles activos\n// ===============================================================\nasync function getUserByEmail(emailOrUsername) {\n    const sql = `\r\n    SELECT \r\n      u.id_usuario,\r\n      u.email,\r\n      u.username,\r\n      u.nombre,\r\n      u.apellido_paterno,\r\n      u.password_hash,\r\n      -- si no hay rol, devolvemos 'Sin Rol'\r\n      COALESCE(r.nombre, 'Sin Rol') AS rol\r\n    FROM usuarios u\r\n    -- solo roles activos del usuario\r\n    LEFT JOIN usuarios_roles ur \r\n      ON u.id_usuario = ur.id_usuario\r\n      AND ur.activo = 1\r\n    -- solo roles activos en la tabla roles\r\n    LEFT JOIN roles r \r\n      ON ur.id_rol = r.id_rol\r\n      AND r.estado = 'activo'\r\n    WHERE (u.email = ? OR u.username = ?)\r\n      AND u.estado = 'activo'\r\n    -- PRIORIDAD de rol:\r\n    -- 1) m√©dico\r\n    -- 2) superadmin\r\n    -- 3) admin/administrativo\r\n    -- 4) secretaria\r\n    -- 5) t√©cnico\r\n    -- 6) lo que quede\r\n    ORDER BY\r\n      CASE\r\n        WHEN LOWER(r.nombre) LIKE '%medico%' THEN 1\r\n        WHEN LOWER(r.nombre) LIKE '%super%' THEN 2\r\n        WHEN LOWER(r.nombre) LIKE '%admin%' THEN 3\r\n        WHEN LOWER(r.nombre) LIKE '%secret%' THEN 4\r\n        WHEN LOWER(r.nombre) LIKE '%tecnic%' THEN 5\r\n        ELSE 99\r\n      END,\r\n      r.nivel_jerarquia DESC\r\n    LIMIT 1\r\n  `;\n    const [rows] = await pool.query(sql, [\n        emailOrUsername,\n        emailOrUsername\n    ]);\n    return Array.isArray(rows) && rows.length > 0 ? rows[0] : null;\n}\n// ===============================================================\n// üîí Verificar credenciales del usuario\n// ===============================================================\nasync function verifyUserCredentials(emailOrUsername, passwordHash) {\n    const user = await getUserByEmail(emailOrUsername);\n    if (!user) return null;\n    if (user.password_hash !== passwordHash) return null;\n    return user;\n}\n// ===============================================================\n// üìä Ejemplo de utilidad: obtener estad√≠sticas globales\n// ===============================================================\nasync function getGlobalStats() {\n    const [[stats]] = await pool.query(`\r\n    SELECT \r\n      (SELECT COUNT(*) FROM usuarios) AS total_usuarios,\r\n      (SELECT COUNT(*) FROM pacientes) AS total_pacientes,\r\n      (SELECT COUNT(*) FROM medicos) AS total_medicos,\r\n      (SELECT COUNT(*) FROM centros_medicos) AS total_centros\r\n  `);\n    return stats;\n}\n// ===============================================================\n// üîå NUEVO: obtener una conexi√≥n dedicada (para transacciones)\n// ===============================================================\nasync function getConnection() {\n    const conn = await pool.getConnection();\n    try {\n        await conn.ping(); // valida la conexi√≥n\n    } catch (e) {\n        conn.release();\n        throw e;\n    }\n    return conn;\n}\n// ===============================================================\n// üîÅ NUEVO (opcional): helper para ejecutar en transacci√≥n\n// ===============================================================\nasync function withTransaction(fn) {\n    const conn = await getConnection();\n    try {\n        await conn.beginTransaction();\n        const result = await fn(conn);\n        await conn.commit();\n        return result;\n    } catch (err) {\n        try {\n            await conn.rollback();\n        } catch  {}\n        throw err;\n    } finally{\n        try {\n            conn.release();\n        } catch  {}\n    }\n}\n// ===============================================================\n// üîÅ Exportar conexi√≥n global\n// ===============================================================\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxRQUFRO1FBQUksRUFBRSxPQUFNLENBQUM7UUFDdEMsTUFBTUQ7SUFDUixTQUFVO1FBQ1IsSUFBSTtZQUFFVCxLQUFLRyxPQUFPO1FBQUksRUFBRSxPQUFNLENBQUM7SUFDakM7QUFDRjtBQUVBLGtFQUFrRTtBQUNsRSw4QkFBOEI7QUFDOUIsa0VBQWtFO0FBQ2xFLGlFQUFldkMsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21lZGlzdWl0ZS1wcm8vLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCfk6YgQXJjaGl2bzogc3JjL2xpYi9kYi50c1xyXG4vLyDwn6egIERlc2NyaXBjacOzbjogQ29uZmlndXJhY2nDs24gY2VudHJhbCBkZSBjb25leGnDs24gYSBNeVNRTCB5IHV0aWxpZGFkZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XHJcbmltcG9ydCB0eXBlIHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjsgLy8g4oaQIChzb2xvIHRpcG8pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UlyBDb25leGnDs24gYWwgcG9vbCBNeVNRTCAoc2VndXJhLCByZXV0aWxpemFibGUgeSBlc2NhbGFibGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCBcImxvY2FsaG9zdFwiLFxyXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgXCJcIixcclxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcIkFueXNzYW1lZFwiLFxyXG4gIHdhaXRGb3JDb25uZWN0aW9uczogdHJ1ZSxcclxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxyXG4gIHF1ZXVlTGltaXQ6IDAsXHJcbiAgbXVsdGlwbGVTdGF0ZW1lbnRzOiBmYWxzZSxcclxuICBuYW1lZFBsYWNlaG9sZGVyczogdHJ1ZSxcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+nqSBGdW5jacOzbiBnZW7DqXJpY2EgcGFyYSBlamVjdXRhciBjb25zdWx0YXMgc2VndXJhc1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgcG9vbC5xdWVyeShzcWwsIHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcm93cztcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi4p2MIEVycm9yIGVuIHF1ZXJ5IE15U1FMOlwiLCBlcnJvci5tZXNzYWdlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZW4gY29uc3VsdGE6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5GkIE9idGVuZXIgdXN1YXJpbyBwb3IgZW1haWwgbyB1c2VybmFtZSAocGFyYSBsb2dpbiBvIHZhbGlkYWNpb25lcylcclxuLy8g4pyFIFZlcnNpw7NuIHF1ZSBQUklPUklaQSBlbCByb2wgTcOJRElDTyB5IHNvbG8gdG9tYSByb2xlcyBhY3Rpdm9zXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcpIHtcclxuICBjb25zdCBzcWwgPSBgXHJcbiAgICBTRUxFQ1QgXHJcbiAgICAgIHUuaWRfdXN1YXJpbyxcclxuICAgICAgdS5lbWFpbCxcclxuICAgICAgdS51c2VybmFtZSxcclxuICAgICAgdS5ub21icmUsXHJcbiAgICAgIHUuYXBlbGxpZG9fcGF0ZXJubyxcclxuICAgICAgdS5wYXNzd29yZF9oYXNoLFxyXG4gICAgICAtLSBzaSBubyBoYXkgcm9sLCBkZXZvbHZlbW9zICdTaW4gUm9sJ1xyXG4gICAgICBDT0FMRVNDRShyLm5vbWJyZSwgJ1NpbiBSb2wnKSBBUyByb2xcclxuICAgIEZST00gdXN1YXJpb3MgdVxyXG4gICAgLS0gc29sbyByb2xlcyBhY3Rpdm9zIGRlbCB1c3VhcmlvXHJcbiAgICBMRUZUIEpPSU4gdXN1YXJpb3Nfcm9sZXMgdXIgXHJcbiAgICAgIE9OIHUuaWRfdXN1YXJpbyA9IHVyLmlkX3VzdWFyaW9cclxuICAgICAgQU5EIHVyLmFjdGl2byA9IDFcclxuICAgIC0tIHNvbG8gcm9sZXMgYWN0aXZvcyBlbiBsYSB0YWJsYSByb2xlc1xyXG4gICAgTEVGVCBKT0lOIHJvbGVzIHIgXHJcbiAgICAgIE9OIHVyLmlkX3JvbCA9IHIuaWRfcm9sXHJcbiAgICAgIEFORCByLmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICBXSEVSRSAodS5lbWFpbCA9ID8gT1IgdS51c2VybmFtZSA9ID8pXHJcbiAgICAgIEFORCB1LmVzdGFkbyA9ICdhY3Rpdm8nXHJcbiAgICAtLSBQUklPUklEQUQgZGUgcm9sOlxyXG4gICAgLS0gMSkgbcOpZGljb1xyXG4gICAgLS0gMikgc3VwZXJhZG1pblxyXG4gICAgLS0gMykgYWRtaW4vYWRtaW5pc3RyYXRpdm9cclxuICAgIC0tIDQpIHNlY3JldGFyaWFcclxuICAgIC0tIDUpIHTDqWNuaWNvXHJcbiAgICAtLSA2KSBsbyBxdWUgcXVlZGVcclxuICAgIE9SREVSIEJZXHJcbiAgICAgIENBU0VcclxuICAgICAgICBXSEVOIExPV0VSKHIubm9tYnJlKSBMSUtFICclbWVkaWNvJScgVEhFTiAxXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXN1cGVyJScgVEhFTiAyXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJWFkbWluJScgVEhFTiAzXHJcbiAgICAgICAgV0hFTiBMT1dFUihyLm5vbWJyZSkgTElLRSAnJXNlY3JldCUnIFRIRU4gNFxyXG4gICAgICAgIFdIRU4gTE9XRVIoci5ub21icmUpIExJS0UgJyV0ZWNuaWMlJyBUSEVOIDVcclxuICAgICAgICBFTFNFIDk5XHJcbiAgICAgIEVORCxcclxuICAgICAgci5uaXZlbF9qZXJhcnF1aWEgREVTQ1xyXG4gICAgTElNSVQgMVxyXG4gIGA7XHJcbiAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBwb29sLnF1ZXJ5KHNxbCwgW2VtYWlsT3JVc2VybmFtZSwgZW1haWxPclVzZXJuYW1lXSk7XHJcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkocm93cykgJiYgcm93cy5sZW5ndGggPiAwID8gcm93c1swXSA6IG51bGw7XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SSIFZlcmlmaWNhciBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW9cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlVc2VyQ3JlZGVudGlhbHMoZW1haWxPclVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkSGFzaDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJCeUVtYWlsKGVtYWlsT3JVc2VybmFtZSk7XHJcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcclxuICBpZiAodXNlci5wYXNzd29yZF9oYXNoICE9PSBwYXNzd29yZEhhc2gpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+TiiBFamVtcGxvIGRlIHV0aWxpZGFkOiBvYnRlbmVyIGVzdGFkw61zdGljYXMgZ2xvYmFsZXNcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHbG9iYWxTdGF0cygpIHtcclxuICBjb25zdCBbW3N0YXRzXV06IGFueSA9IGF3YWl0IHBvb2wucXVlcnkoYFxyXG4gICAgU0VMRUNUIFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gdXN1YXJpb3MpIEFTIHRvdGFsX3VzdWFyaW9zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gcGFjaWVudGVzKSBBUyB0b3RhbF9wYWNpZW50ZXMsXHJcbiAgICAgIChTRUxFQ1QgQ09VTlQoKikgRlJPTSBtZWRpY29zKSBBUyB0b3RhbF9tZWRpY29zLFxyXG4gICAgICAoU0VMRUNUIENPVU5UKCopIEZST00gY2VudHJvc19tZWRpY29zKSBBUyB0b3RhbF9jZW50cm9zXHJcbiAgYCk7XHJcbiAgcmV0dXJuIHN0YXRzO1xyXG59XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g8J+UjCBOVUVWTzogb2J0ZW5lciB1bmEgY29uZXhpw7NuIGRlZGljYWRhIChwYXJhIHRyYW5zYWNjaW9uZXMpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29ubmVjdGlvbigpOiBQcm9taXNlPFBvb2xDb25uZWN0aW9uPiB7XHJcbiAgY29uc3QgY29ubiA9IGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uLnBpbmcoKTsgLy8gdmFsaWRhIGxhIGNvbmV4acOzblxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNvbm4ucmVsZWFzZSgpO1xyXG4gICAgdGhyb3cgZTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbm47XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyDwn5SBIE5VRVZPIChvcGNpb25hbCk6IGhlbHBlciBwYXJhIGVqZWN1dGFyIGVuIHRyYW5zYWNjacOzblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFuc2FjdGlvbjxUPihcclxuICBmbjogKGNvbm46IFBvb2xDb25uZWN0aW9uKSA9PiBQcm9taXNlPFQ+XHJcbik6IFByb21pc2U8VD4ge1xyXG4gIGNvbnN0IGNvbm4gPSBhd2FpdCBnZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm4uYmVnaW5UcmFuc2FjdGlvbigpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZm4oY29ubik7XHJcbiAgICBhd2FpdCBjb25uLmNvbW1pdCgpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIHRyeSB7IGF3YWl0IGNvbm4ucm9sbGJhY2soKTsgfSBjYXRjaCB7fVxyXG4gICAgdGhyb3cgZXJyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICB0cnkgeyBjb25uLnJlbGVhc2UoKTsgfSBjYXRjaCB7fVxyXG4gIH1cclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIPCflIEgRXhwb3J0YXIgY29uZXhpw7NuIGdsb2JhbFxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuZXhwb3J0IGRlZmF1bHQgcG9vbDtcclxuXHJcbi8vIChvcGNpb25hbCkgcmUtZXhwb3J0IGRlbCB0aXBvIHBhcmEgdXNhcmxvIGVuIHJ1dGFzIHNpIHF1aWVyZXMgdGlwYXIgcGFyw6FtZXRyb3NcclxuZXhwb3J0IHR5cGUgeyBQb29sQ29ubmVjdGlvbiB9O1xyXG4iXSwibmFtZXMiOlsibXlzcWwiLCJwb29sIiwiY3JlYXRlUG9vbCIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiREJfSE9TVCIsInVzZXIiLCJEQl9VU0VSIiwicGFzc3dvcmQiLCJEQl9QQVNTIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwid2FpdEZvckNvbm5lY3Rpb25zIiwiY29ubmVjdGlvbkxpbWl0IiwicXVldWVMaW1pdCIsIm11bHRpcGxlU3RhdGVtZW50cyIsIm5hbWVkUGxhY2Vob2xkZXJzIiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyb3dzIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIiwiZ2V0VXNlckJ5RW1haWwiLCJlbWFpbE9yVXNlcm5hbWUiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ2ZXJpZnlVc2VyQ3JlZGVudGlhbHMiLCJwYXNzd29yZEhhc2giLCJwYXNzd29yZF9oYXNoIiwiZ2V0R2xvYmFsU3RhdHMiLCJzdGF0cyIsImdldENvbm5lY3Rpb24iLCJjb25uIiwicGluZyIsImUiLCJyZWxlYXNlIiwid2l0aFRyYW5zYWN0aW9uIiwiZm4iLCJiZWdpblRyYW5zYWN0aW9uIiwicmVzdWx0IiwiY29tbWl0IiwiZXJyIiwicm9sbGJhY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&page=%2Fapi%2Ftelemedicina%2Fsesiones%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftelemedicina%2Fsesiones%2Froute.ts&appDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CReactProjects%5Cmedisuite-pro%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();